var Kp=Object.defineProperty;var Zp=(e,t,s)=>t in e?Kp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Us=(e,t,s)=>(Zp(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();function Vl(e,t){const s=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)s[i[r]]=!0;return t?r=>!!s[r.toLowerCase()]:r=>!!s[r]}const Mt={},Pi=[],Be=()=>{},Jp=()=>!1,Qp=/^on[^a-z]/,fo=e=>Qp.test(e),Xl=e=>e.startsWith("onUpdate:"),qt=Object.assign,zl=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},tm=Object.prototype.hasOwnProperty,Et=(e,t)=>tm.call(e,t),ct=Array.isArray,Ri=e=>Xr(e)==="[object Map]",of=e=>Xr(e)==="[object Set]",Fh=e=>Xr(e)==="[object Date]",dt=e=>typeof e=="function",Vt=e=>typeof e=="string",Ir=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",af=e=>Rt(e)&&dt(e.then)&&dt(e.catch),lf=Object.prototype.toString,Xr=e=>lf.call(e),em=e=>Xr(e).slice(8,-1),hf=e=>Xr(e)==="[object Object]",Wl=e=>Vt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Pn=Vl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),po=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},sm=/-(\w)/g,Qe=po(e=>e.replace(sm,(t,s)=>s?s.toUpperCase():"")),im=/\B([A-Z])/g,qi=po(e=>e.replace(im,"-$1").toLowerCase()),mo=po(e=>e.charAt(0).toUpperCase()+e.slice(1)),Vo=po(e=>e?`on${mo(e)}`:""),Pr=(e,t)=>!Object.is(e,t),Rn=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},Hn=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},La=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Nh;const ka=()=>Nh||(Nh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jl(e){if(ct(e)){const t={};for(let s=0;s<e.length;s++){const i=e[s],r=Vt(i)?am(i):jl(i);if(r)for(const n in r)t[n]=r[n]}return t}else{if(Vt(e))return e;if(Rt(e))return e}}const rm=/;(?![^(]*\))/g,nm=/:([^]+)/,om=/\/\*[^]*?\*\//g;function am(e){const t={};return e.replace(om,"").split(rm).forEach(s=>{if(s){const i=s.split(nm);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ds(e){let t="";if(Vt(e))t=e;else if(ct(e))for(let s=0;s<e.length;s++){const i=Ds(e[s]);i&&(t+=i+" ")}else if(Rt(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const lm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hm=Vl(lm);function cf(e){return!!e||e===""}function cm(e,t){if(e.length!==t.length)return!1;let s=!0;for(let i=0;s&&i<e.length;i++)s=$n(e[i],t[i]);return s}function $n(e,t){if(e===t)return!0;let s=Fh(e),i=Fh(t);if(s||i)return s&&i?e.getTime()===t.getTime():!1;if(s=Ir(e),i=Ir(t),s||i)return e===t;if(s=ct(e),i=ct(t),s||i)return s&&i?cm(e,t):!1;if(s=Rt(e),i=Rt(t),s||i){if(!s||!i)return!1;const r=Object.keys(e).length,n=Object.keys(t).length;if(r!==n)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!$n(e[o],t[o]))return!1}}return String(e)===String(t)}const um=e=>Vt(e)?e:e==null?"":ct(e)||Rt(e)&&(e.toString===lf||!dt(e.toString))?JSON.stringify(e,uf,2):String(e),uf=(e,t)=>t&&t.__v_isRef?uf(e,t.value):Ri(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[i,r])=>(s[`${i} =>`]=r,s),{})}:of(t)?{[`Set(${t.size})`]:[...t.values()]}:Rt(t)&&!ct(t)&&!hf(t)?String(t):t;let ue;class ff{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ue,!t&&ue&&(this.index=(ue.scopes||(ue.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const s=ue;try{return ue=this,t()}finally{ue=s}}}on(){ue=this}off(){ue=this.parent}stop(t){if(this._active){let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.scopes)for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function df(e){return new ff(e)}function fm(e,t=ue){t&&t.active&&t.effects.push(e)}function pf(){return ue}function dm(e){ue&&ue.cleanups.push(e)}const Yl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},mf=e=>(e.w&Bs)>0,gf=e=>(e.n&Bs)>0,pm=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Bs},mm=e=>{const{deps:t}=e;if(t.length){let s=0;for(let i=0;i<t.length;i++){const r=t[i];mf(r)&&!gf(r)?r.delete(e):t[s++]=r,r.w&=~Bs,r.n&=~Bs}t.length=s}},Vn=new WeakMap;let ur=0,Bs=1;const Ua=30;let Pe;const Qs=Symbol(""),Ga=Symbol("");class ql{constructor(t,s=null,i){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,fm(this,i)}run(){if(!this.active)return this.fn();let t=Pe,s=Is;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Pe,Pe=this,Is=!0,Bs=1<<++ur,ur<=Ua?pm(this):Lh(this),this.fn()}finally{ur<=Ua&&mm(this),Bs=1<<--ur,Pe=this.parent,Is=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Pe===this?this.deferStop=!0:this.active&&(Lh(this),this.onStop&&this.onStop(),this.active=!1)}}function Lh(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let Is=!0;const _f=[];function Ki(){_f.push(Is),Is=!1}function Zi(){const e=_f.pop();Is=e===void 0?!0:e}function le(e,t,s){if(Is&&Pe){let i=Vn.get(e);i||Vn.set(e,i=new Map);let r=i.get(s);r||i.set(s,r=Yl()),yf(r)}}function yf(e,t){let s=!1;ur<=Ua?gf(e)||(e.n|=Bs,s=!mf(e)):s=!e.has(Pe),s&&(e.add(Pe),Pe.deps.push(e))}function us(e,t,s,i,r,n){const o=Vn.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(s==="length"&&ct(e)){const l=Number(i);o.forEach((h,c)=>{(c==="length"||c>=l)&&a.push(h)})}else switch(s!==void 0&&a.push(o.get(s)),t){case"add":ct(e)?Wl(s)&&a.push(o.get("length")):(a.push(o.get(Qs)),Ri(e)&&a.push(o.get(Ga)));break;case"delete":ct(e)||(a.push(o.get(Qs)),Ri(e)&&a.push(o.get(Ga)));break;case"set":Ri(e)&&a.push(o.get(Qs));break}if(a.length===1)a[0]&&Ha(a[0]);else{const l=[];for(const h of a)h&&l.push(...h);Ha(Yl(l))}}function Ha(e,t){const s=ct(e)?e:[...e];for(const i of s)i.computed&&kh(i);for(const i of s)i.computed||kh(i)}function kh(e,t){(e!==Pe||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function gm(e,t){var s;return(s=Vn.get(e))==null?void 0:s.get(t)}const _m=Vl("__proto__,__v_isRef,__isVue"),vf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ir)),ym=Kl(),vm=Kl(!1,!0),xm=Kl(!0),Uh=bm();function bm(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const i=xt(this);for(let n=0,o=this.length;n<o;n++)le(i,"get",n+"");const r=i[t](...s);return r===-1||r===!1?i[t](...s.map(xt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){Ki();const i=xt(this)[t].apply(this,s);return Zi(),i}}),e}function Em(e){const t=xt(this);return le(t,"has",e),t.hasOwnProperty(e)}function Kl(e=!1,t=!1){return function(i,r,n){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&n===(e?t?km:Tf:t?wf:Ef).get(i))return i;const o=ct(i);if(!e){if(o&&Et(Uh,r))return Reflect.get(Uh,r,n);if(r==="hasOwnProperty")return Em}const a=Reflect.get(i,r,n);return(Ir(r)?vf.has(r):_m(r))||(e||le(i,"get",r),t)?a:kt(a)?o&&Wl(r)?a:a.value:Rt(a)?e?Af(a):Ls(a):a}}const wm=xf(),Tm=xf(!0);function xf(e=!1){return function(s,i,r,n){let o=s[i];if(Ui(o)&&kt(o)&&!kt(r))return!1;if(!e&&(!Xn(r)&&!Ui(r)&&(o=xt(o),r=xt(r)),!ct(s)&&kt(o)&&!kt(r)))return o.value=r,!0;const a=ct(s)&&Wl(i)?Number(i)<s.length:Et(s,i),l=Reflect.set(s,i,r,n);return s===xt(n)&&(a?Pr(r,o)&&us(s,"set",i,r):us(s,"add",i,r)),l}}function Sm(e,t){const s=Et(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&s&&us(e,"delete",t,void 0),i}function Am(e,t){const s=Reflect.has(e,t);return(!Ir(t)||!vf.has(t))&&le(e,"has",t),s}function Cm(e){return le(e,"iterate",ct(e)?"length":Qs),Reflect.ownKeys(e)}const bf={get:ym,set:wm,deleteProperty:Sm,has:Am,ownKeys:Cm},Im={get:xm,set(e,t){return!0},deleteProperty(e,t){return!0}},Pm=qt({},bf,{get:vm,set:Tm}),Zl=e=>e,go=e=>Reflect.getPrototypeOf(e);function Jr(e,t,s=!1,i=!1){e=e.__v_raw;const r=xt(e),n=xt(t);s||(t!==n&&le(r,"get",t),le(r,"get",n));const{has:o}=go(r),a=i?Zl:s?th:Rr;if(o.call(r,t))return a(e.get(t));if(o.call(r,n))return a(e.get(n));e!==r&&e.get(t)}function Qr(e,t=!1){const s=this.__v_raw,i=xt(s),r=xt(e);return t||(e!==r&&le(i,"has",e),le(i,"has",r)),e===r?s.has(e):s.has(e)||s.has(r)}function tn(e,t=!1){return e=e.__v_raw,!t&&le(xt(e),"iterate",Qs),Reflect.get(e,"size",e)}function Gh(e){e=xt(e);const t=xt(this);return go(t).has.call(t,e)||(t.add(e),us(t,"add",e,e)),this}function Hh(e,t){t=xt(t);const s=xt(this),{has:i,get:r}=go(s);let n=i.call(s,e);n||(e=xt(e),n=i.call(s,e));const o=r.call(s,e);return s.set(e,t),n?Pr(t,o)&&us(s,"set",e,t):us(s,"add",e,t),this}function $h(e){const t=xt(this),{has:s,get:i}=go(t);let r=s.call(t,e);r||(e=xt(e),r=s.call(t,e)),i&&i.call(t,e);const n=t.delete(e);return r&&us(t,"delete",e,void 0),n}function Vh(){const e=xt(this),t=e.size!==0,s=e.clear();return t&&us(e,"clear",void 0,void 0),s}function en(e,t){return function(i,r){const n=this,o=n.__v_raw,a=xt(o),l=t?Zl:e?th:Rr;return!e&&le(a,"iterate",Qs),o.forEach((h,c)=>i.call(r,l(h),l(c),n))}}function sn(e,t,s){return function(...i){const r=this.__v_raw,n=xt(r),o=Ri(n),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,h=r[e](...i),c=s?Zl:t?th:Rr;return!t&&le(n,"iterate",l?Ga:Qs),{next(){const{value:u,done:f}=h.next();return f?{value:u,done:f}:{value:a?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function ms(e){return function(...t){return e==="delete"?!1:this}}function Rm(){const e={get(n){return Jr(this,n)},get size(){return tn(this)},has:Qr,add:Gh,set:Hh,delete:$h,clear:Vh,forEach:en(!1,!1)},t={get(n){return Jr(this,n,!1,!0)},get size(){return tn(this)},has:Qr,add:Gh,set:Hh,delete:$h,clear:Vh,forEach:en(!1,!0)},s={get(n){return Jr(this,n,!0)},get size(){return tn(this,!0)},has(n){return Qr.call(this,n,!0)},add:ms("add"),set:ms("set"),delete:ms("delete"),clear:ms("clear"),forEach:en(!0,!1)},i={get(n){return Jr(this,n,!0,!0)},get size(){return tn(this,!0)},has(n){return Qr.call(this,n,!0)},add:ms("add"),set:ms("set"),delete:ms("delete"),clear:ms("clear"),forEach:en(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=sn(n,!1,!1),s[n]=sn(n,!0,!1),t[n]=sn(n,!1,!0),i[n]=sn(n,!0,!0)}),[e,s,t,i]}const[Mm,Dm,Bm,Om]=Rm();function Jl(e,t){const s=t?e?Om:Bm:e?Dm:Mm;return(i,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Et(s,r)&&r in i?s:i,r,n)}const Fm={get:Jl(!1,!1)},Nm={get:Jl(!1,!0)},Lm={get:Jl(!0,!1)},Ef=new WeakMap,wf=new WeakMap,Tf=new WeakMap,km=new WeakMap;function Um(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gm(e){return e.__v_skip||!Object.isExtensible(e)?0:Um(em(e))}function Ls(e){return Ui(e)?e:Ql(e,!1,bf,Fm,Ef)}function Sf(e){return Ql(e,!1,Pm,Nm,wf)}function Af(e){return Ql(e,!0,Im,Lm,Tf)}function Ql(e,t,s,i,r){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=r.get(e);if(n)return n;const o=Gm(e);if(o===0)return e;const a=new Proxy(e,o===2?i:s);return r.set(e,a),a}function Ps(e){return Ui(e)?Ps(e.__v_raw):!!(e&&e.__v_isReactive)}function Ui(e){return!!(e&&e.__v_isReadonly)}function Xn(e){return!!(e&&e.__v_isShallow)}function Cf(e){return Ps(e)||Ui(e)}function xt(e){const t=e&&e.__v_raw;return t?xt(t):e}function _o(e){return Hn(e,"__v_skip",!0),e}const Rr=e=>Rt(e)?Ls(e):e,th=e=>Rt(e)?Af(e):e;function If(e){Is&&Pe&&(e=xt(e),yf(e.dep||(e.dep=Yl())))}function Pf(e,t){e=xt(e);const s=e.dep;s&&Ha(s)}function kt(e){return!!(e&&e.__v_isRef===!0)}function ws(e){return Rf(e,!1)}function Hm(e){return Rf(e,!0)}function Rf(e,t){return kt(e)?e:new $m(e,t)}class $m{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:xt(t),this._value=s?t:Rr(t)}get value(){return If(this),this._value}set value(t){const s=this.__v_isShallow||Xn(t)||Ui(t);t=s?t:xt(t),Pr(t,this._rawValue)&&(this._rawValue=t,this._value=s?t:Rr(t),Pf(this))}}function $t(e){return kt(e)?e.value:e}const Vm={get:(e,t,s)=>$t(Reflect.get(e,t,s)),set:(e,t,s,i)=>{const r=e[t];return kt(r)&&!kt(s)?(r.value=s,!0):Reflect.set(e,t,s,i)}};function Mf(e){return Ps(e)?e:new Proxy(e,Vm)}function yo(e){const t=ct(e)?new Array(e.length):{};for(const s in e)t[s]=zm(e,s);return t}class Xm{constructor(t,s,i){this._object=t,this._key=s,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return gm(xt(this._object),this._key)}}function zm(e,t,s){const i=e[t];return kt(i)?i:new Xm(e,t,s)}class Wm{constructor(t,s,i,r){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ql(t,()=>{this._dirty||(this._dirty=!0,Pf(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=xt(this);return If(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function jm(e,t,s=!1){let i,r;const n=dt(e);return n?(i=e,r=Be):(i=e.get,r=e.set),new Wm(i,r,n||!r,s)}function Rs(e,t,s,i){let r;try{r=i?e(...i):e()}catch(n){vo(n,t,s)}return r}function Oe(e,t,s,i){if(dt(e)){const n=Rs(e,t,s,i);return n&&af(n)&&n.catch(o=>{vo(o,t,s)}),n}const r=[];for(let n=0;n<e.length;n++)r.push(Oe(e[n],t,s,i));return r}function vo(e,t,s,i=!0){const r=t?t.vnode:null;if(t){let n=t.parent;const o=t.proxy,a=s;for(;n;){const h=n.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](e,o,a)===!1)return}n=n.parent}const l=t.appContext.config.errorHandler;if(l){Rs(l,null,10,[e,o,a]);return}}Ym(e,s,r,i)}function Ym(e,t,s,i=!0){console.error(e)}let Mr=!1,$a=!1;const ee=[];let Ye=0;const Mi=[];let os=null,Ys=0;const Df=Promise.resolve();let eh=null;function sh(e){const t=eh||Df;return e?t.then(this?e.bind(this):e):t}function qm(e){let t=Ye+1,s=ee.length;for(;t<s;){const i=t+s>>>1;Dr(ee[i])<e?t=i+1:s=i}return t}function ih(e){(!ee.length||!ee.includes(e,Mr&&e.allowRecurse?Ye+1:Ye))&&(e.id==null?ee.push(e):ee.splice(qm(e.id),0,e),Bf())}function Bf(){!Mr&&!$a&&($a=!0,eh=Df.then(Ff))}function Km(e){const t=ee.indexOf(e);t>Ye&&ee.splice(t,1)}function Zm(e){ct(e)?Mi.push(...e):(!os||!os.includes(e,e.allowRecurse?Ys+1:Ys))&&Mi.push(e),Bf()}function Xh(e,t=Mr?Ye+1:0){for(;t<ee.length;t++){const s=ee[t];s&&s.pre&&(ee.splice(t,1),t--,s())}}function Of(e){if(Mi.length){const t=[...new Set(Mi)];if(Mi.length=0,os){os.push(...t);return}for(os=t,os.sort((s,i)=>Dr(s)-Dr(i)),Ys=0;Ys<os.length;Ys++)os[Ys]();os=null,Ys=0}}const Dr=e=>e.id==null?1/0:e.id,Jm=(e,t)=>{const s=Dr(e)-Dr(t);if(s===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return s};function Ff(e){$a=!1,Mr=!0,ee.sort(Jm);const t=Be;try{for(Ye=0;Ye<ee.length;Ye++){const s=ee[Ye];s&&s.active!==!1&&Rs(s,null,14)}}finally{Ye=0,ee.length=0,Of(),Mr=!1,eh=null,(ee.length||Mi.length)&&Ff()}}function Qm(e,t,...s){if(e.isUnmounted)return;const i=e.vnode.props||Mt;let r=s;const n=t.startsWith("update:"),o=n&&t.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:f}=i[c]||Mt;f&&(r=s.map(d=>Vt(d)?d.trim():d)),u&&(r=s.map(La))}let a,l=i[a=Vo(t)]||i[a=Vo(Qe(t))];!l&&n&&(l=i[a=Vo(qi(t))]),l&&Oe(l,e,6,r);const h=i[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Oe(h,e,6,r)}}function Nf(e,t,s=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const n=e.emits;let o={},a=!1;if(!dt(e)){const l=h=>{const c=Nf(h,t,!0);c&&(a=!0,qt(o,c))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!n&&!a?(Rt(e)&&i.set(e,null),null):(ct(n)?n.forEach(l=>o[l]=null):qt(o,n),Rt(e)&&i.set(e,o),o)}function xo(e,t){return!e||!fo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Et(e,t[0].toLowerCase()+t.slice(1))||Et(e,qi(t))||Et(e,t))}let de=null,bo=null;function zn(e){const t=de;return de=e,bo=e&&e.type.__scopeId||null,t}function rh(e){bo=e}function nh(){bo=null}function tg(e,t=de,s){if(!t||e._n)return e;const i=(...r)=>{i._d&&ec(-1);const n=zn(t);let o;try{o=e(...r)}finally{zn(n),i._d&&ec(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Xo(e){const{type:t,vnode:s,proxy:i,withProxy:r,props:n,propsOptions:[o],slots:a,attrs:l,emit:h,render:c,renderCache:u,data:f,setupState:d,ctx:p,inheritAttrs:m}=e;let g,v;const b=zn(e);try{if(s.shapeFlag&4){const E=r||i;g=ze(c.call(E,E,u,n,d,f,p)),v=l}else{const E=t;g=ze(E.length>1?E(n,{attrs:l,slots:a,emit:h}):E(n,null)),v=t.props?l:eg(l)}}catch(E){vr.length=0,vo(E,e,1),g=Yt(Or)}let _=g;if(v&&m!==!1){const E=Object.keys(v),{shapeFlag:C}=_;E.length&&C&7&&(o&&E.some(Xl)&&(v=sg(v,o)),_=Gi(_,v))}return s.dirs&&(_=Gi(_),_.dirs=_.dirs?_.dirs.concat(s.dirs):s.dirs),s.transition&&(_.transition=s.transition),g=_,zn(b),g}const eg=e=>{let t;for(const s in e)(s==="class"||s==="style"||fo(s))&&((t||(t={}))[s]=e[s]);return t},sg=(e,t)=>{const s={};for(const i in e)(!Xl(i)||!(i.slice(9)in t))&&(s[i]=e[i]);return s};function ig(e,t,s){const{props:i,children:r,component:n}=e,{props:o,children:a,patchFlag:l}=t,h=n.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return i?zh(i,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(o[f]!==i[f]&&!xo(h,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?zh(i,o,h):!0:!!o;return!1}function zh(e,t,s){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const n=i[r];if(t[n]!==e[n]&&!xo(s,n))return!0}return!1}function rg({vnode:e,parent:t},s){for(;t&&t.subTree===e;)(e=t.vnode).el=s,t=t.parent}const ng=e=>e.__isSuspense;function og(e,t){t&&t.pendingBranch?ct(e)?t.effects.push(...e):t.effects.push(e):Zm(e)}const rn={};function ti(e,t,s){return Lf(e,t,s)}function Lf(e,t,{immediate:s,deep:i,flush:r,onTrack:n,onTrigger:o}=Mt){var a;const l=pf()===((a=jt)==null?void 0:a.scope)?jt:null;let h,c=!1,u=!1;if(kt(e)?(h=()=>e.value,c=Xn(e)):Ps(e)?(h=()=>e,i=!0):ct(e)?(u=!0,c=e.some(E=>Ps(E)||Xn(E)),h=()=>e.map(E=>{if(kt(E))return E.value;if(Ps(E))return Js(E);if(dt(E))return Rs(E,l,2)})):dt(e)?t?h=()=>Rs(e,l,2):h=()=>{if(!(l&&l.isUnmounted))return f&&f(),Oe(e,l,3,[d])}:h=Be,t&&i){const E=h;h=()=>Js(E())}let f,d=E=>{f=b.onStop=()=>{Rs(E,l,4)}},p;if(Nr)if(d=Be,t?s&&Oe(t,l,3,[h(),u?[]:void 0,d]):h(),r==="sync"){const E=s_();p=E.__watcherHandles||(E.__watcherHandles=[])}else return Be;let m=u?new Array(e.length).fill(rn):rn;const g=()=>{if(b.active)if(t){const E=b.run();(i||c||(u?E.some((C,F)=>Pr(C,m[F])):Pr(E,m)))&&(f&&f(),Oe(t,l,3,[E,m===rn?void 0:u&&m[0]===rn?[]:m,d]),m=E)}else b.run()};g.allowRecurse=!!t;let v;r==="sync"?v=g:r==="post"?v=()=>ne(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),v=()=>ih(g));const b=new ql(h,v);t?s?g():m=b.run():r==="post"?ne(b.run.bind(b),l&&l.suspense):b.run();const _=()=>{b.stop(),l&&l.scope&&zl(l.scope.effects,b)};return p&&p.push(_),_}function ag(e,t,s){const i=this.proxy,r=Vt(e)?e.includes(".")?kf(i,e):()=>i[e]:e.bind(i,i);let n;dt(t)?n=t:(n=t.handler,s=t);const o=jt;Hi(this);const a=Lf(r,n.bind(i),s);return o?Hi(o):ei(),a}function kf(e,t){const s=t.split(".");return()=>{let i=e;for(let r=0;r<s.length&&i;r++)i=i[s[r]];return i}}function Js(e,t){if(!Rt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),kt(e))Js(e.value,t);else if(ct(e))for(let s=0;s<e.length;s++)Js(e[s],t);else if(of(e)||Ri(e))e.forEach(s=>{Js(s,t)});else if(hf(e))for(const s in e)Js(e[s],t);return e}function Wn(e,t){const s=de;if(s===null)return e;const i=So(s)||s.proxy,r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,a,l,h=Mt]=t[n];o&&(dt(o)&&(o={mounted:o,updated:o}),o.deep&&Js(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:h}))}return e}function Gs(e,t,s,i){const r=e.dirs,n=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(Ki(),Oe(l,s,8,[e.el,a,e,t]),Zi())}}function hi(e,t){return dt(e)?(()=>qt({name:e.name},t,{setup:e}))():e}const Mn=e=>!!e.type.__asyncLoader,Uf=e=>e.type.__isKeepAlive;function lg(e,t){Gf(e,"a",t)}function hg(e,t){Gf(e,"da",t)}function Gf(e,t,s=jt){const i=e.__wdc||(e.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Eo(t,i,s),s){let r=s.parent;for(;r&&r.parent;)Uf(r.parent.vnode)&&cg(i,t,s,r),r=r.parent}}function cg(e,t,s,i){const r=Eo(t,e,i,!0);$f(()=>{zl(i[t],r)},s)}function Eo(e,t,s=jt,i=!1){if(s){const r=s[e]||(s[e]=[]),n=t.__weh||(t.__weh=(...o)=>{if(s.isUnmounted)return;Ki(),Hi(s);const a=Oe(t,s,e,o);return ei(),Zi(),a});return i?r.unshift(n):r.push(n),n}}const ds=e=>(t,s=jt)=>(!Nr||e==="sp")&&Eo(e,(...i)=>t(...i),s),ug=ds("bm"),Hf=ds("m"),fg=ds("bu"),dg=ds("u"),pg=ds("bum"),$f=ds("um"),mg=ds("sp"),gg=ds("rtg"),_g=ds("rtc");function yg(e,t=jt){Eo("ec",e,t)}const Vf="components";function vg(e,t){return bg(Vf,e,!0,t)||e}const xg=Symbol.for("v-ndc");function bg(e,t,s=!0,i=!1){const r=de||jt;if(r){const n=r.type;if(e===Vf){const a=Qg(n,!1);if(a&&(a===t||a===Qe(t)||a===mo(Qe(t))))return n}const o=Wh(r[e]||n[e],t)||Wh(r.appContext[e],t);return!o&&i?n:o}}function Wh(e,t){return e&&(e[t]||e[Qe(t)]||e[mo(Qe(t))])}function Va(e,t,s,i){let r;const n=s&&s[i];if(ct(e)||Vt(e)){r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(e[o],o,void 0,n&&n[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,n&&n[o])}else if(Rt(e))if(e[Symbol.iterator])r=Array.from(e,(o,a)=>t(o,a,void 0,n&&n[a]));else{const o=Object.keys(e);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const h=o[a];r[a]=t(e[h],h,a,n&&n[a])}}else r=[];return s&&(s[i]=r),r}const Xa=e=>e?td(e)?So(e)||e.proxy:Xa(e.parent):null,yr=qt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xa(e.parent),$root:e=>Xa(e.root),$emit:e=>e.emit,$options:e=>oh(e),$forceUpdate:e=>e.f||(e.f=()=>ih(e.update)),$nextTick:e=>e.n||(e.n=sh.bind(e.proxy)),$watch:e=>ag.bind(e)}),zo=(e,t)=>e!==Mt&&!e.__isScriptSetup&&Et(e,t),Eg={get({_:e},t){const{ctx:s,setupState:i,data:r,props:n,accessCache:o,type:a,appContext:l}=e;let h;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return s[t];case 3:return n[t]}else{if(zo(i,t))return o[t]=1,i[t];if(r!==Mt&&Et(r,t))return o[t]=2,r[t];if((h=e.propsOptions[0])&&Et(h,t))return o[t]=3,n[t];if(s!==Mt&&Et(s,t))return o[t]=4,s[t];za&&(o[t]=0)}}const c=yr[t];let u,f;if(c)return t==="$attrs"&&le(e,"get",t),c(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(s!==Mt&&Et(s,t))return o[t]=4,s[t];if(f=l.config.globalProperties,Et(f,t))return f[t]},set({_:e},t,s){const{data:i,setupState:r,ctx:n}=e;return zo(r,t)?(r[t]=s,!0):i!==Mt&&Et(i,t)?(i[t]=s,!0):Et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:i,appContext:r,propsOptions:n}},o){let a;return!!s[o]||e!==Mt&&Et(e,o)||zo(t,o)||(a=n[0])&&Et(a,o)||Et(i,o)||Et(yr,o)||Et(r.config.globalProperties,o)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Et(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function jh(e){return ct(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let za=!0;function wg(e){const t=oh(e),s=e.proxy,i=e.ctx;za=!1,t.beforeCreate&&Yh(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:u,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:_,unmounted:E,render:C,renderTracked:F,renderTriggered:M,errorCaptured:T,serverPrefetch:B,expose:X,inheritAttrs:N,components:G,directives:R,filters:I}=t;if(h&&Tg(h,i,null),o)for(const L in o){const tt=o[L];dt(tt)&&(i[L]=tt.bind(s))}if(r){const L=r.call(s,s);Rt(L)&&(e.data=Ls(L))}if(za=!0,n)for(const L in n){const tt=n[L],Tt=dt(tt)?tt.bind(s,s):dt(tt.get)?tt.get.bind(s,s):Be,O=!dt(tt)&&dt(tt.set)?tt.set.bind(s):Be,et=ae({get:Tt,set:O});Object.defineProperty(i,L,{enumerable:!0,configurable:!0,get:()=>et.value,set:ht=>et.value=ht})}if(a)for(const L in a)Xf(a[L],i,s,L);if(l){const L=dt(l)?l.call(s):l;Reflect.ownKeys(L).forEach(tt=>{Dn(tt,L[tt])})}c&&Yh(c,e,"c");function j(L,tt){ct(tt)?tt.forEach(Tt=>L(Tt.bind(s))):tt&&L(tt.bind(s))}if(j(ug,u),j(Hf,f),j(fg,d),j(dg,p),j(lg,m),j(hg,g),j(yg,T),j(_g,F),j(gg,M),j(pg,b),j($f,E),j(mg,B),ct(X))if(X.length){const L=e.exposed||(e.exposed={});X.forEach(tt=>{Object.defineProperty(L,tt,{get:()=>s[tt],set:Tt=>s[tt]=Tt})})}else e.exposed||(e.exposed={});C&&e.render===Be&&(e.render=C),N!=null&&(e.inheritAttrs=N),G&&(e.components=G),R&&(e.directives=R)}function Tg(e,t,s=Be){ct(e)&&(e=Wa(e));for(const i in e){const r=e[i];let n;Rt(r)?"default"in r?n=Ke(r.from||i,r.default,!0):n=Ke(r.from||i):n=Ke(r),kt(n)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[i]=n}}function Yh(e,t,s){Oe(ct(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,s)}function Xf(e,t,s,i){const r=i.includes(".")?kf(s,i):()=>s[i];if(Vt(e)){const n=t[e];dt(n)&&ti(r,n)}else if(dt(e))ti(r,e.bind(s));else if(Rt(e))if(ct(e))e.forEach(n=>Xf(n,t,s,i));else{const n=dt(e.handler)?e.handler.bind(s):t[e.handler];dt(n)&&ti(r,n,e)}}function oh(e){const t=e.type,{mixins:s,extends:i}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=e.appContext,a=n.get(t);let l;return a?l=a:!r.length&&!s&&!i?l=t:(l={},r.length&&r.forEach(h=>jn(l,h,o,!0)),jn(l,t,o)),Rt(t)&&n.set(t,l),l}function jn(e,t,s,i=!1){const{mixins:r,extends:n}=t;n&&jn(e,n,s,!0),r&&r.forEach(o=>jn(e,o,s,!0));for(const o in t)if(!(i&&o==="expose")){const a=Sg[o]||s&&s[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Sg={data:qh,props:Kh,emits:Kh,methods:fr,computed:fr,beforeCreate:re,created:re,beforeMount:re,mounted:re,beforeUpdate:re,updated:re,beforeDestroy:re,beforeUnmount:re,destroyed:re,unmounted:re,activated:re,deactivated:re,errorCaptured:re,serverPrefetch:re,components:fr,directives:fr,watch:Cg,provide:qh,inject:Ag};function qh(e,t){return t?e?function(){return qt(dt(e)?e.call(this,this):e,dt(t)?t.call(this,this):t)}:t:e}function Ag(e,t){return fr(Wa(e),Wa(t))}function Wa(e){if(ct(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function re(e,t){return e?[...new Set([].concat(e,t))]:t}function fr(e,t){return e?qt(Object.create(null),e,t):t}function Kh(e,t){return e?ct(e)&&ct(t)?[...new Set([...e,...t])]:qt(Object.create(null),jh(e),jh(t??{})):t}function Cg(e,t){if(!e)return t;if(!t)return e;const s=qt(Object.create(null),e);for(const i in t)s[i]=re(e[i],t[i]);return s}function zf(){return{app:null,config:{isNativeTag:Jp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ig=0;function Pg(e,t){return function(i,r=null){dt(i)||(i=qt({},i)),r!=null&&!Rt(r)&&(r=null);const n=zf(),o=new Set;let a=!1;const l=n.app={_uid:Ig++,_component:i,_props:r,_container:null,_context:n,_instance:null,version:i_,get config(){return n.config},set config(h){},use(h,...c){return o.has(h)||(h&&dt(h.install)?(o.add(h),h.install(l,...c)):dt(h)&&(o.add(h),h(l,...c))),l},mixin(h){return n.mixins.includes(h)||n.mixins.push(h),l},component(h,c){return c?(n.components[h]=c,l):n.components[h]},directive(h,c){return c?(n.directives[h]=c,l):n.directives[h]},mount(h,c,u){if(!a){const f=Yt(i,r);return f.appContext=n,c&&t?t(f,h):e(f,h,u),a=!0,l._container=h,h.__vue_app__=l,So(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,c){return n.provides[h]=c,l},runWithContext(h){Br=l;try{return h()}finally{Br=null}}};return l}}let Br=null;function Dn(e,t){if(jt){let s=jt.provides;const i=jt.parent&&jt.parent.provides;i===s&&(s=jt.provides=Object.create(i)),s[e]=t}}function Ke(e,t,s=!1){const i=jt||de;if(i||Br){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Br._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return s&&dt(t)?t.call(i&&i.proxy):t}}function Rg(){return!!(jt||de||Br)}function Mg(e,t,s,i=!1){const r={},n={};Hn(n,To,1),e.propsDefaults=Object.create(null),Wf(e,t,r,n);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);s?e.props=i?r:Sf(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function Dg(e,t,s,i){const{props:r,attrs:n,vnode:{patchFlag:o}}=e,a=xt(r),[l]=e.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(xo(e.emitsOptions,f))continue;const d=t[f];if(l)if(Et(n,f))d!==n[f]&&(n[f]=d,h=!0);else{const p=Qe(f);r[p]=ja(l,a,p,d,e,!1)}else d!==n[f]&&(n[f]=d,h=!0)}}}else{Wf(e,t,r,n)&&(h=!0);let c;for(const u in a)(!t||!Et(t,u)&&((c=qi(u))===u||!Et(t,c)))&&(l?s&&(s[u]!==void 0||s[c]!==void 0)&&(r[u]=ja(l,a,u,void 0,e,!0)):delete r[u]);if(n!==a)for(const u in n)(!t||!Et(t,u))&&(delete n[u],h=!0)}h&&us(e,"set","$attrs")}function Wf(e,t,s,i){const[r,n]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Pn(l))continue;const h=t[l];let c;r&&Et(r,c=Qe(l))?!n||!n.includes(c)?s[c]=h:(a||(a={}))[c]=h:xo(e.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,o=!0)}if(n){const l=xt(s),h=a||Mt;for(let c=0;c<n.length;c++){const u=n[c];s[u]=ja(r,l,u,h[u],e,!Et(h,u))}}return o}function ja(e,t,s,i,r,n){const o=e[s];if(o!=null){const a=Et(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&dt(l)){const{propsDefaults:h}=r;s in h?i=h[s]:(Hi(r),i=h[s]=l.call(null,t),ei())}else i=l}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===qi(s))&&(i=!0))}return i}function jf(e,t,s=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const n=e.props,o={},a=[];let l=!1;if(!dt(e)){const c=u=>{l=!0;const[f,d]=jf(u,t,!0);qt(o,f),d&&a.push(...d)};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!n&&!l)return Rt(e)&&i.set(e,Pi),Pi;if(ct(n))for(let c=0;c<n.length;c++){const u=Qe(n[c]);Zh(u)&&(o[u]=Mt)}else if(n)for(const c in n){const u=Qe(c);if(Zh(u)){const f=n[c],d=o[u]=ct(f)||dt(f)?{type:f}:qt({},f);if(d){const p=tc(Boolean,d.type),m=tc(String,d.type);d[0]=p>-1,d[1]=m<0||p<m,(p>-1||Et(d,"default"))&&a.push(u)}}}const h=[o,a];return Rt(e)&&i.set(e,h),h}function Zh(e){return e[0]!=="$"}function Jh(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function Qh(e,t){return Jh(e)===Jh(t)}function tc(e,t){return ct(t)?t.findIndex(s=>Qh(s,e)):dt(t)&&Qh(t,e)?0:-1}const Yf=e=>e[0]==="_"||e==="$stable",ah=e=>ct(e)?e.map(ze):[ze(e)],Bg=(e,t,s)=>{if(t._n)return t;const i=tg((...r)=>ah(t(...r)),s);return i._c=!1,i},qf=(e,t,s)=>{const i=e._ctx;for(const r in e){if(Yf(r))continue;const n=e[r];if(dt(n))t[r]=Bg(r,n,i);else if(n!=null){const o=ah(n);t[r]=()=>o}}},Kf=(e,t)=>{const s=ah(t);e.slots.default=()=>s},Og=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=xt(t),Hn(t,"_",s)):qf(t,e.slots={})}else e.slots={},t&&Kf(e,t);Hn(e.slots,To,1)},Fg=(e,t,s)=>{const{vnode:i,slots:r}=e;let n=!0,o=Mt;if(i.shapeFlag&32){const a=t._;a?s&&a===1?n=!1:(qt(r,t),!s&&a===1&&delete r._):(n=!t.$stable,qf(t,r)),o=t}else t&&(Kf(e,t),o={default:1});if(n)for(const a in r)!Yf(a)&&!(a in o)&&delete r[a]};function Ya(e,t,s,i,r=!1){if(ct(e)){e.forEach((f,d)=>Ya(f,t&&(ct(t)?t[d]:t),s,i,r));return}if(Mn(i)&&!r)return;const n=i.shapeFlag&4?So(i.component)||i.component.proxy:i.el,o=r?null:n,{i:a,r:l}=e,h=t&&t.r,c=a.refs===Mt?a.refs={}:a.refs,u=a.setupState;if(h!=null&&h!==l&&(Vt(h)?(c[h]=null,Et(u,h)&&(u[h]=null)):kt(h)&&(h.value=null)),dt(l))Rs(l,a,12,[o,c]);else{const f=Vt(l),d=kt(l);if(f||d){const p=()=>{if(e.f){const m=f?Et(u,l)?u[l]:c[l]:l.value;r?ct(m)&&zl(m,n):ct(m)?m.includes(n)||m.push(n):f?(c[l]=[n],Et(u,l)&&(u[l]=c[l])):(l.value=[n],e.k&&(c[e.k]=l.value))}else f?(c[l]=o,Et(u,l)&&(u[l]=o)):d&&(l.value=o,e.k&&(c[e.k]=o))};o?(p.id=-1,ne(p,s)):p()}}}const ne=og;function Ng(e){return Lg(e)}function Lg(e,t){const s=ka();s.__VUE__=!0;const{insert:i,remove:r,patchProp:n,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:f,setScopeId:d=Be,insertStaticContent:p}=e,m=(y,x,w,S=null,P=null,D=null,W=!1,H=null,z=!!x.dynamicChildren)=>{if(y===x)return;y&&!sr(y,x)&&(S=A(y),ht(y,P,D,!0),y=null),x.patchFlag===-2&&(z=!1,x.dynamicChildren=null);const{type:k,ref:nt,shapeFlag:Z}=x;switch(k){case wo:g(y,x,w,S);break;case Or:v(y,x,w,S);break;case Wo:y==null&&b(x,w,S,W);break;case pe:G(y,x,w,S,P,D,W,H,z);break;default:Z&1?C(y,x,w,S,P,D,W,H,z):Z&6?R(y,x,w,S,P,D,W,H,z):(Z&64||Z&128)&&k.process(y,x,w,S,P,D,W,H,z,U)}nt!=null&&P&&Ya(nt,y&&y.ref,D,x||y,!x)},g=(y,x,w,S)=>{if(y==null)i(x.el=a(x.children),w,S);else{const P=x.el=y.el;x.children!==y.children&&h(P,x.children)}},v=(y,x,w,S)=>{y==null?i(x.el=l(x.children||""),w,S):x.el=y.el},b=(y,x,w,S)=>{[y.el,y.anchor]=p(y.children,x,w,S,y.el,y.anchor)},_=({el:y,anchor:x},w,S)=>{let P;for(;y&&y!==x;)P=f(y),i(y,w,S),y=P;i(x,w,S)},E=({el:y,anchor:x})=>{let w;for(;y&&y!==x;)w=f(y),r(y),y=w;r(x)},C=(y,x,w,S,P,D,W,H,z)=>{W=W||x.type==="svg",y==null?F(x,w,S,P,D,W,H,z):B(y,x,P,D,W,H,z)},F=(y,x,w,S,P,D,W,H)=>{let z,k;const{type:nt,props:Z,shapeFlag:ot,transition:ut,dirs:gt}=y;if(z=y.el=o(y.type,D,Z&&Z.is,Z),ot&8?c(z,y.children):ot&16&&T(y.children,z,null,S,P,D&&nt!=="foreignObject",W,H),gt&&Gs(y,null,S,"created"),M(z,y,y.scopeId,W,S),Z){for(const Ct in Z)Ct!=="value"&&!Pn(Ct)&&n(z,Ct,null,Z[Ct],D,y.children,S,P,mt);"value"in Z&&n(z,"value",null,Z.value),(k=Z.onVnodeBeforeMount)&&He(k,S,y)}gt&&Gs(y,null,S,"beforeMount");const Pt=(!P||P&&!P.pendingBranch)&&ut&&!ut.persisted;Pt&&ut.beforeEnter(z),i(z,x,w),((k=Z&&Z.onVnodeMounted)||Pt||gt)&&ne(()=>{k&&He(k,S,y),Pt&&ut.enter(z),gt&&Gs(y,null,S,"mounted")},P)},M=(y,x,w,S,P)=>{if(w&&d(y,w),S)for(let D=0;D<S.length;D++)d(y,S[D]);if(P){let D=P.subTree;if(x===D){const W=P.vnode;M(y,W,W.scopeId,W.slotScopeIds,P.parent)}}},T=(y,x,w,S,P,D,W,H,z=0)=>{for(let k=z;k<y.length;k++){const nt=y[k]=H?vs(y[k]):ze(y[k]);m(null,nt,x,w,S,P,D,W,H)}},B=(y,x,w,S,P,D,W)=>{const H=x.el=y.el;let{patchFlag:z,dynamicChildren:k,dirs:nt}=x;z|=y.patchFlag&16;const Z=y.props||Mt,ot=x.props||Mt;let ut;w&&Hs(w,!1),(ut=ot.onVnodeBeforeUpdate)&&He(ut,w,x,y),nt&&Gs(x,y,w,"beforeUpdate"),w&&Hs(w,!0);const gt=P&&x.type!=="foreignObject";if(k?X(y.dynamicChildren,k,H,w,S,gt,D):W||tt(y,x,H,null,w,S,gt,D,!1),z>0){if(z&16)N(H,x,Z,ot,w,S,P);else if(z&2&&Z.class!==ot.class&&n(H,"class",null,ot.class,P),z&4&&n(H,"style",Z.style,ot.style,P),z&8){const Pt=x.dynamicProps;for(let Ct=0;Ct<Pt.length;Ct++){const Ut=Pt[Ct],ve=Z[Ut],di=ot[Ut];(di!==ve||Ut==="value")&&n(H,Ut,ve,di,P,y.children,w,S,mt)}}z&1&&y.children!==x.children&&c(H,x.children)}else!W&&k==null&&N(H,x,Z,ot,w,S,P);((ut=ot.onVnodeUpdated)||nt)&&ne(()=>{ut&&He(ut,w,x,y),nt&&Gs(x,y,w,"updated")},S)},X=(y,x,w,S,P,D,W)=>{for(let H=0;H<x.length;H++){const z=y[H],k=x[H],nt=z.el&&(z.type===pe||!sr(z,k)||z.shapeFlag&70)?u(z.el):w;m(z,k,nt,null,S,P,D,W,!0)}},N=(y,x,w,S,P,D,W)=>{if(w!==S){if(w!==Mt)for(const H in w)!Pn(H)&&!(H in S)&&n(y,H,w[H],null,W,x.children,P,D,mt);for(const H in S){if(Pn(H))continue;const z=S[H],k=w[H];z!==k&&H!=="value"&&n(y,H,k,z,W,x.children,P,D,mt)}"value"in S&&n(y,"value",w.value,S.value)}},G=(y,x,w,S,P,D,W,H,z)=>{const k=x.el=y?y.el:a(""),nt=x.anchor=y?y.anchor:a("");let{patchFlag:Z,dynamicChildren:ot,slotScopeIds:ut}=x;ut&&(H=H?H.concat(ut):ut),y==null?(i(k,w,S),i(nt,w,S),T(x.children,w,nt,P,D,W,H,z)):Z>0&&Z&64&&ot&&y.dynamicChildren?(X(y.dynamicChildren,ot,w,P,D,W,H),(x.key!=null||P&&x===P.subTree)&&Zf(y,x,!0)):tt(y,x,w,nt,P,D,W,H,z)},R=(y,x,w,S,P,D,W,H,z)=>{x.slotScopeIds=H,y==null?x.shapeFlag&512?P.ctx.activate(x,w,S,W,z):I(x,w,S,P,D,W,z):st(y,x,z)},I=(y,x,w,S,P,D,W)=>{const H=y.component=Yg(y,S,P);if(Uf(y)&&(H.ctx.renderer=U),qg(H),H.asyncDep){if(P&&P.registerDep(H,j),!y.el){const z=H.subTree=Yt(Or);v(null,z,x,w)}return}j(H,y,x,w,P,D,W)},st=(y,x,w)=>{const S=x.component=y.component;if(ig(y,x,w))if(S.asyncDep&&!S.asyncResolved){L(S,x,w);return}else S.next=x,Km(S.update),S.update();else x.el=y.el,S.vnode=x},j=(y,x,w,S,P,D,W)=>{const H=()=>{if(y.isMounted){let{next:nt,bu:Z,u:ot,parent:ut,vnode:gt}=y,Pt=nt,Ct;Hs(y,!1),nt?(nt.el=gt.el,L(y,nt,W)):nt=gt,Z&&Rn(Z),(Ct=nt.props&&nt.props.onVnodeBeforeUpdate)&&He(Ct,ut,nt,gt),Hs(y,!0);const Ut=Xo(y),ve=y.subTree;y.subTree=Ut,m(ve,Ut,u(ve.el),A(ve),y,P,D),nt.el=Ut.el,Pt===null&&rg(y,Ut.el),ot&&ne(ot,P),(Ct=nt.props&&nt.props.onVnodeUpdated)&&ne(()=>He(Ct,ut,nt,gt),P)}else{let nt;const{el:Z,props:ot}=x,{bm:ut,m:gt,parent:Pt}=y,Ct=Mn(x);if(Hs(y,!1),ut&&Rn(ut),!Ct&&(nt=ot&&ot.onVnodeBeforeMount)&&He(nt,Pt,x),Hs(y,!0),Z&&rt){const Ut=()=>{y.subTree=Xo(y),rt(Z,y.subTree,y,P,null)};Ct?x.type.__asyncLoader().then(()=>!y.isUnmounted&&Ut()):Ut()}else{const Ut=y.subTree=Xo(y);m(null,Ut,w,S,y,P,D),x.el=Ut.el}if(gt&&ne(gt,P),!Ct&&(nt=ot&&ot.onVnodeMounted)){const Ut=x;ne(()=>He(nt,Pt,Ut),P)}(x.shapeFlag&256||Pt&&Mn(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&y.a&&ne(y.a,P),y.isMounted=!0,x=w=S=null}},z=y.effect=new ql(H,()=>ih(k),y.scope),k=y.update=()=>z.run();k.id=y.uid,Hs(y,!0),k()},L=(y,x,w)=>{x.component=y;const S=y.vnode.props;y.vnode=x,y.next=null,Dg(y,x.props,S,w),Fg(y,x.children,w),Ki(),Xh(),Zi()},tt=(y,x,w,S,P,D,W,H,z=!1)=>{const k=y&&y.children,nt=y?y.shapeFlag:0,Z=x.children,{patchFlag:ot,shapeFlag:ut}=x;if(ot>0){if(ot&128){O(k,Z,w,S,P,D,W,H,z);return}else if(ot&256){Tt(k,Z,w,S,P,D,W,H,z);return}}ut&8?(nt&16&&mt(k,P,D),Z!==k&&c(w,Z)):nt&16?ut&16?O(k,Z,w,S,P,D,W,H,z):mt(k,P,D,!0):(nt&8&&c(w,""),ut&16&&T(Z,w,S,P,D,W,H,z))},Tt=(y,x,w,S,P,D,W,H,z)=>{y=y||Pi,x=x||Pi;const k=y.length,nt=x.length,Z=Math.min(k,nt);let ot;for(ot=0;ot<Z;ot++){const ut=x[ot]=z?vs(x[ot]):ze(x[ot]);m(y[ot],ut,w,null,P,D,W,H,z)}k>nt?mt(y,P,D,!0,!1,Z):T(x,w,S,P,D,W,H,z,Z)},O=(y,x,w,S,P,D,W,H,z)=>{let k=0;const nt=x.length;let Z=y.length-1,ot=nt-1;for(;k<=Z&&k<=ot;){const ut=y[k],gt=x[k]=z?vs(x[k]):ze(x[k]);if(sr(ut,gt))m(ut,gt,w,null,P,D,W,H,z);else break;k++}for(;k<=Z&&k<=ot;){const ut=y[Z],gt=x[ot]=z?vs(x[ot]):ze(x[ot]);if(sr(ut,gt))m(ut,gt,w,null,P,D,W,H,z);else break;Z--,ot--}if(k>Z){if(k<=ot){const ut=ot+1,gt=ut<nt?x[ut].el:S;for(;k<=ot;)m(null,x[k]=z?vs(x[k]):ze(x[k]),w,gt,P,D,W,H,z),k++}}else if(k>ot)for(;k<=Z;)ht(y[k],P,D,!0),k++;else{const ut=k,gt=k,Pt=new Map;for(k=gt;k<=ot;k++){const he=x[k]=z?vs(x[k]):ze(x[k]);he.key!=null&&Pt.set(he.key,k)}let Ct,Ut=0;const ve=ot-gt+1;let di=!1,Dh=0;const er=new Array(ve);for(k=0;k<ve;k++)er[k]=0;for(k=ut;k<=Z;k++){const he=y[k];if(Ut>=ve){ht(he,P,D,!0);continue}let Ge;if(he.key!=null)Ge=Pt.get(he.key);else for(Ct=gt;Ct<=ot;Ct++)if(er[Ct-gt]===0&&sr(he,x[Ct])){Ge=Ct;break}Ge===void 0?ht(he,P,D,!0):(er[Ge-gt]=k+1,Ge>=Dh?Dh=Ge:di=!0,m(he,x[Ge],w,null,P,D,W,H,z),Ut++)}const Bh=di?kg(er):Pi;for(Ct=Bh.length-1,k=ve-1;k>=0;k--){const he=gt+k,Ge=x[he],Oh=he+1<nt?x[he+1].el:S;er[k]===0?m(null,Ge,w,Oh,P,D,W,H,z):di&&(Ct<0||k!==Bh[Ct]?et(Ge,w,Oh,2):Ct--)}}},et=(y,x,w,S,P=null)=>{const{el:D,type:W,transition:H,children:z,shapeFlag:k}=y;if(k&6){et(y.component.subTree,x,w,S);return}if(k&128){y.suspense.move(x,w,S);return}if(k&64){W.move(y,x,w,U);return}if(W===pe){i(D,x,w);for(let Z=0;Z<z.length;Z++)et(z[Z],x,w,S);i(y.anchor,x,w);return}if(W===Wo){_(y,x,w);return}if(S!==2&&k&1&&H)if(S===0)H.beforeEnter(D),i(D,x,w),ne(()=>H.enter(D),P);else{const{leave:Z,delayLeave:ot,afterLeave:ut}=H,gt=()=>i(D,x,w),Pt=()=>{Z(D,()=>{gt(),ut&&ut()})};ot?ot(D,gt,Pt):Pt()}else i(D,x,w)},ht=(y,x,w,S=!1,P=!1)=>{const{type:D,props:W,ref:H,children:z,dynamicChildren:k,shapeFlag:nt,patchFlag:Z,dirs:ot}=y;if(H!=null&&Ya(H,null,w,y,!0),nt&256){x.ctx.deactivate(y);return}const ut=nt&1&&ot,gt=!Mn(y);let Pt;if(gt&&(Pt=W&&W.onVnodeBeforeUnmount)&&He(Pt,x,y),nt&6)Bt(y.component,w,S);else{if(nt&128){y.suspense.unmount(w,S);return}ut&&Gs(y,null,x,"beforeUnmount"),nt&64?y.type.remove(y,x,w,P,U,S):k&&(D!==pe||Z>0&&Z&64)?mt(k,x,w,!1,!0):(D===pe&&Z&384||!P&&nt&16)&&mt(z,x,w),S&&vt(y)}(gt&&(Pt=W&&W.onVnodeUnmounted)||ut)&&ne(()=>{Pt&&He(Pt,x,y),ut&&Gs(y,null,x,"unmounted")},w)},vt=y=>{const{type:x,el:w,anchor:S,transition:P}=y;if(x===pe){bt(w,S);return}if(x===Wo){E(y);return}const D=()=>{r(w),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(y.shapeFlag&1&&P&&!P.persisted){const{leave:W,delayLeave:H}=P,z=()=>W(w,D);H?H(y.el,D,z):z()}else D()},bt=(y,x)=>{let w;for(;y!==x;)w=f(y),r(y),y=w;r(x)},Bt=(y,x,w)=>{const{bum:S,scope:P,update:D,subTree:W,um:H}=y;S&&Rn(S),P.stop(),D&&(D.active=!1,ht(W,y,x,w)),H&&ne(H,x),ne(()=>{y.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},mt=(y,x,w,S=!1,P=!1,D=0)=>{for(let W=D;W<y.length;W++)ht(y[W],x,w,S,P)},A=y=>y.shapeFlag&6?A(y.component.subTree):y.shapeFlag&128?y.suspense.next():f(y.anchor||y.el),V=(y,x,w)=>{y==null?x._vnode&&ht(x._vnode,null,null,!0):m(x._vnode||null,y,x,null,null,null,w),Xh(),Of(),x._vnode=y},U={p:m,um:ht,m:et,r:vt,mt:I,mc:T,pc:tt,pbc:X,n:A,o:e};let Y,rt;return t&&([Y,rt]=t(U)),{render:V,hydrate:Y,createApp:Pg(V,Y)}}function Hs({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function Zf(e,t,s=!1){const i=e.children,r=t.children;if(ct(i)&&ct(r))for(let n=0;n<i.length;n++){const o=i[n];let a=r[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[n]=vs(r[n]),a.el=o.el),s||Zf(o,a)),a.type===wo&&(a.el=o.el)}}function kg(e){const t=e.slice(),s=[0];let i,r,n,o,a;const l=e.length;for(i=0;i<l;i++){const h=e[i];if(h!==0){if(r=s[s.length-1],e[r]<h){t[i]=r,s.push(i);continue}for(n=0,o=s.length-1;n<o;)a=n+o>>1,e[s[a]]<h?n=a+1:o=a;h<e[s[n]]&&(n>0&&(t[i]=s[n-1]),s[n]=i)}}for(n=s.length,o=s[n-1];n-- >0;)s[n]=o,o=t[o];return s}const Ug=e=>e.__isTeleport,pe=Symbol.for("v-fgt"),wo=Symbol.for("v-txt"),Or=Symbol.for("v-cmt"),Wo=Symbol.for("v-stc"),vr=[];let Me=null;function me(e=!1){vr.push(Me=e?null:[])}function Gg(){vr.pop(),Me=vr[vr.length-1]||null}let Fr=1;function ec(e){Fr+=e}function Jf(e){return e.dynamicChildren=Fr>0?Me||Pi:null,Gg(),Fr>0&&Me&&Me.push(e),e}function Re(e,t,s,i,r,n){return Jf(At(e,t,s,i,r,n,!0))}function Hg(e,t,s,i,r){return Jf(Yt(e,t,s,i,r,!0))}function qa(e){return e?e.__v_isVNode===!0:!1}function sr(e,t){return e.type===t.type&&e.key===t.key}const To="__vInternal",Qf=({key:e})=>e??null,Bn=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Vt(e)||kt(e)||dt(e)?{i:de,r:e,k:t,f:!!s}:e:null);function At(e,t=null,s=null,i=0,r=null,n=e===pe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qf(t),ref:t&&Bn(t),scopeId:bo,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:de};return a?(lh(l,s),n&128&&e.normalize(l)):s&&(l.shapeFlag|=Vt(s)?8:16),Fr>0&&!o&&Me&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Me.push(l),l}const Yt=$g;function $g(e,t=null,s=null,i=0,r=null,n=!1){if((!e||e===xg)&&(e=Or),qa(e)){const a=Gi(e,t,!0);return s&&lh(a,s),Fr>0&&!n&&Me&&(a.shapeFlag&6?Me[Me.indexOf(e)]=a:Me.push(a)),a.patchFlag|=-2,a}if(t_(e)&&(e=e.__vccOpts),t){t=Vg(t);let{class:a,style:l}=t;a&&!Vt(a)&&(t.class=Ds(a)),Rt(l)&&(Cf(l)&&!ct(l)&&(l=qt({},l)),t.style=jl(l))}const o=Vt(e)?1:ng(e)?128:Ug(e)?64:Rt(e)?4:dt(e)?2:0;return At(e,t,s,i,r,o,n,!0)}function Vg(e){return e?Cf(e)||To in e?qt({},e):e:null}function Gi(e,t,s=!1){const{props:i,ref:r,patchFlag:n,children:o}=e,a=t?zg(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Qf(a),ref:t&&t.ref?s&&r?ct(r)?r.concat(Bn(t)):[r,Bn(t)]:Bn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pe?n===-1?16:n|16:n,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gi(e.ssContent),ssFallback:e.ssFallback&&Gi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Xg(e=" ",t=0){return Yt(wo,null,e,t)}function ze(e){return e==null||typeof e=="boolean"?Yt(Or):ct(e)?Yt(pe,null,e.slice()):typeof e=="object"?vs(e):Yt(wo,null,String(e))}function vs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gi(e)}function lh(e,t){let s=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(ct(t))s=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),lh(e,r()),r._c&&(r._d=!0));return}else{s=32;const r=t._;!r&&!(To in t)?t._ctx=de:r===3&&de&&(de.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:de},s=32):(t=String(t),i&64?(s=16,t=[Xg(t)]):s=8);e.children=t,e.shapeFlag|=s}function zg(...e){const t={};for(let s=0;s<e.length;s++){const i=e[s];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Ds([t.class,i.class]));else if(r==="style")t.style=jl([t.style,i.style]);else if(fo(r)){const n=t[r],o=i[r];o&&n!==o&&!(ct(n)&&n.includes(o))&&(t[r]=n?[].concat(n,o):o)}else r!==""&&(t[r]=i[r])}return t}function He(e,t,s,i=null){Oe(e,t,7,[s,i])}const Wg=zf();let jg=0;function Yg(e,t,s){const i=e.type,r=(t?t.appContext:e.appContext)||Wg,n={uid:jg++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ff(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jf(i,r),emitsOptions:Nf(i,r),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:i.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Qm.bind(null,n),e.ce&&e.ce(n),n}let jt=null,hh,pi,sc="__VUE_INSTANCE_SETTERS__";(pi=ka()[sc])||(pi=ka()[sc]=[]),pi.push(e=>jt=e),hh=e=>{pi.length>1?pi.forEach(t=>t(e)):pi[0](e)};const Hi=e=>{hh(e),e.scope.on()},ei=()=>{jt&&jt.scope.off(),hh(null)};function td(e){return e.vnode.shapeFlag&4}let Nr=!1;function qg(e,t=!1){Nr=t;const{props:s,children:i}=e.vnode,r=td(e);Mg(e,s,r,t),Og(e,i);const n=r?Kg(e,t):void 0;return Nr=!1,n}function Kg(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=_o(new Proxy(e.ctx,Eg));const{setup:i}=s;if(i){const r=e.setupContext=i.length>1?Jg(e):null;Hi(e),Ki();const n=Rs(i,e,0,[e.props,r]);if(Zi(),ei(),af(n)){if(n.then(ei,ei),t)return n.then(o=>{ic(e,o,t)}).catch(o=>{vo(o,e,0)});e.asyncDep=n}else ic(e,n,t)}else ed(e,t)}function ic(e,t,s){dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=Mf(t)),ed(e,s)}let rc;function ed(e,t,s){const i=e.type;if(!e.render){if(!t&&rc&&!i.render){const r=i.template||oh(e).template;if(r){const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,h=qt(qt({isCustomElement:n,delimiters:a},o),l);i.render=rc(r,h)}}e.render=i.render||Be}Hi(e),Ki(),wg(e),Zi(),ei()}function Zg(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,s){return le(e,"get","$attrs"),t[s]}}))}function Jg(e){const t=s=>{e.exposed=s||{}};return{get attrs(){return Zg(e)},slots:e.slots,emit:e.emit,expose:t}}function So(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Mf(_o(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in yr)return yr[s](e)},has(t,s){return s in t||s in yr}}))}function Qg(e,t=!0){return dt(e)?e.displayName||e.name:e.name||t&&e.__name}function t_(e){return dt(e)&&"__vccOpts"in e}const ae=(e,t)=>jm(e,t,Nr);function sd(e,t,s){const i=arguments.length;return i===2?Rt(t)&&!ct(t)?qa(t)?Yt(e,null,[t]):Yt(e,t):Yt(e,null,t):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&qa(s)&&(s=[s]),Yt(e,t,s))}const e_=Symbol.for("v-scx"),s_=()=>Ke(e_),i_="3.3.4",r_="http://www.w3.org/2000/svg",qs=typeof document<"u"?document:null,nc=qs&&qs.createElement("template"),n_={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,i)=>{const r=t?qs.createElementNS(r_,e):qs.createElement(e,s?{is:s}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>qs.createTextNode(e),createComment:e=>qs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,i,r,n){const o=s?s.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),s),!(r===n||!(r=r.nextSibling)););else{nc.innerHTML=i?`<svg>${e}</svg>`:e;const a=nc.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function o_(e,t,s){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}function a_(e,t,s){const i=e.style,r=Vt(s);if(s&&!r){if(t&&!Vt(t))for(const n in t)s[n]==null&&Ka(i,n,"");for(const n in s)Ka(i,n,s[n])}else{const n=i.display;r?t!==s&&(i.cssText=s):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=n)}}const oc=/\s*!important$/;function Ka(e,t,s){if(ct(s))s.forEach(i=>Ka(e,t,i));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const i=l_(e,t);oc.test(s)?e.setProperty(qi(i),s.replace(oc,""),"important"):e[i]=s}}const ac=["Webkit","Moz","ms"],jo={};function l_(e,t){const s=jo[t];if(s)return s;let i=Qe(t);if(i!=="filter"&&i in e)return jo[t]=i;i=mo(i);for(let r=0;r<ac.length;r++){const n=ac[r]+i;if(n in e)return jo[t]=n}return t}const lc="http://www.w3.org/1999/xlink";function h_(e,t,s,i,r){if(i&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(lc,t.slice(6,t.length)):e.setAttributeNS(lc,t,s);else{const n=hm(t);s==null||n&&!cf(s)?e.removeAttribute(t):e.setAttribute(t,n?"":s)}}function c_(e,t,s,i,r,n,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,n),e[t]=s??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=s;const h=a==="OPTION"?e.getAttribute("value"):e.value,c=s??"";h!==c&&(e.value=c),s==null&&e.removeAttribute(t);return}let l=!1;if(s===""||s==null){const h=typeof e[t];h==="boolean"?s=cf(s):s==null&&h==="string"?(s="",l=!0):h==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(t)}function Ks(e,t,s,i){e.addEventListener(t,s,i)}function u_(e,t,s,i){e.removeEventListener(t,s,i)}function f_(e,t,s,i,r=null){const n=e._vei||(e._vei={}),o=n[t];if(i&&o)o.value=i;else{const[a,l]=d_(t);if(i){const h=n[t]=g_(i,r);Ks(e,a,h,l)}else o&&(u_(e,a,o,l),n[t]=void 0)}}const hc=/(?:Once|Passive|Capture)$/;function d_(e){let t;if(hc.test(e)){t={};let i;for(;i=e.match(hc);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):qi(e.slice(2)),t]}let Yo=0;const p_=Promise.resolve(),m_=()=>Yo||(p_.then(()=>Yo=0),Yo=Date.now());function g_(e,t){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;Oe(__(i,s.value),t,5,[i])};return s.value=e,s.attached=m_(),s}function __(e,t){if(ct(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const cc=/^on[a-z]/,y_=(e,t,s,i,r=!1,n,o,a,l)=>{t==="class"?o_(e,i,r):t==="style"?a_(e,s,i):fo(t)?Xl(t)||f_(e,t,s,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):v_(e,t,i,r))?c_(e,t,i,n,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),h_(e,t,i,r))};function v_(e,t,s,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&cc.test(t)&&dt(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||cc.test(t)&&Vt(s)?!1:t in e}const Yn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ct(t)?s=>Rn(t,s):t};function x_(e){e.target.composing=!0}function uc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Za={created(e,{modifiers:{lazy:t,trim:s,number:i}},r){e._assign=Yn(r);const n=i||r.props&&r.props.type==="number";Ks(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;s&&(a=a.trim()),n&&(a=La(a)),e._assign(a)}),s&&Ks(e,"change",()=>{e.value=e.value.trim()}),t||(Ks(e,"compositionstart",x_),Ks(e,"compositionend",uc),Ks(e,"change",uc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:i,number:r}},n){if(e._assign=Yn(n),e.composing||document.activeElement===e&&e.type!=="range"&&(s||i&&e.value.trim()===t||(r||e.type==="number")&&La(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},b_={created(e,{value:t},s){e.checked=$n(t,s.props.value),e._assign=Yn(s),Ks(e,"change",()=>{e._assign(E_(e))})},beforeUpdate(e,{value:t,oldValue:s},i){e._assign=Yn(i),t!==s&&(e.checked=$n(t,i.props.value))}};function E_(e){return"_value"in e?e._value:e.value}const w_=qt({patchProp:y_},n_);let fc;function T_(){return fc||(fc=Ng(w_))}const S_=(...e)=>{const t=T_().createApp(...e),{mount:s}=t;return t.mount=i=>{const r=A_(i);if(!r)return;const n=t._component;!dt(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.innerHTML="";const o=s(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function A_(e){return Vt(e)?document.querySelector(e):e}var C_=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let id;const Ao=e=>id=e,rd=Symbol();function Ja(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var xr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(xr||(xr={}));function I_(){const e=df(!0),t=e.run(()=>ws({}));let s=[],i=[];const r=_o({install(n){Ao(r),r._a=n,n.provide(rd,r),n.config.globalProperties.$pinia=r,i.forEach(o=>s.push(o)),i=[]},use(n){return!this._a&&!C_?i.push(n):s.push(n),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return r}const nd=()=>{};function dc(e,t,s,i=nd){e.push(t);const r=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i())};return!s&&pf()&&dm(r),r}function mi(e,...t){e.slice().forEach(s=>{s(...t)})}const P_=e=>e();function Qa(e,t){e instanceof Map&&t instanceof Map&&t.forEach((s,i)=>e.set(i,s)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const i=t[s],r=e[s];Ja(r)&&Ja(i)&&e.hasOwnProperty(s)&&!kt(i)&&!Ps(i)?e[s]=Qa(r,i):e[s]=i}return e}const R_=Symbol();function M_(e){return!Ja(e)||!e.hasOwnProperty(R_)}const{assign:ys}=Object;function D_(e){return!!(kt(e)&&e.effect)}function B_(e,t,s,i){const{state:r,actions:n,getters:o}=t,a=s.state.value[e];let l;function h(){a||(s.state.value[e]=r?r():{});const c=yo(s.state.value[e]);return ys(c,n,Object.keys(o||{}).reduce((u,f)=>(u[f]=_o(ae(()=>{Ao(s);const d=s._s.get(e);return o[f].call(d,d)})),u),{}))}return l=od(e,h,t,s,i,!0),l}function od(e,t,s={},i,r,n){let o;const a=ys({actions:{}},s),l={deep:!0};let h,c,u=[],f=[],d;const p=i.state.value[e];!n&&!p&&(i.state.value[e]={}),ws({});let m;function g(T){let B;h=c=!1,typeof T=="function"?(T(i.state.value[e]),B={type:xr.patchFunction,storeId:e,events:d}):(Qa(i.state.value[e],T),B={type:xr.patchObject,payload:T,storeId:e,events:d});const X=m=Symbol();sh().then(()=>{m===X&&(h=!0)}),c=!0,mi(u,B,i.state.value[e])}const v=n?function(){const{state:B}=s,X=B?B():{};this.$patch(N=>{ys(N,X)})}:nd;function b(){o.stop(),u=[],f=[],i._s.delete(e)}function _(T,B){return function(){Ao(i);const X=Array.from(arguments),N=[],G=[];function R(j){N.push(j)}function I(j){G.push(j)}mi(f,{args:X,name:T,store:C,after:R,onError:I});let st;try{st=B.apply(this&&this.$id===e?this:C,X)}catch(j){throw mi(G,j),j}return st instanceof Promise?st.then(j=>(mi(N,j),j)).catch(j=>(mi(G,j),Promise.reject(j))):(mi(N,st),st)}}const E={_p:i,$id:e,$onAction:dc.bind(null,f),$patch:g,$reset:v,$subscribe(T,B={}){const X=dc(u,T,B.detached,()=>N()),N=o.run(()=>ti(()=>i.state.value[e],G=>{(B.flush==="sync"?c:h)&&T({storeId:e,type:xr.direct,events:d},G)},ys({},l,B)));return X},$dispose:b},C=Ls(E);i._s.set(e,C);const F=i._a&&i._a.runWithContext||P_,M=i._e.run(()=>(o=df(),F(()=>o.run(t))));for(const T in M){const B=M[T];if(kt(B)&&!D_(B)||Ps(B))n||(p&&M_(B)&&(kt(B)?B.value=p[T]:Qa(B,p[T])),i.state.value[e][T]=B);else if(typeof B=="function"){const X=_(T,B);M[T]=X,a.actions[T]=B}}return ys(C,M),ys(xt(C),M),Object.defineProperty(C,"$state",{get:()=>i.state.value[e],set:T=>{g(B=>{ys(B,T)})}}),i._p.forEach(T=>{ys(C,o.run(()=>T({store:C,app:i._a,pinia:i,options:a})))}),p&&n&&s.hydrate&&s.hydrate(C.$state,p),h=!0,c=!0,C}function O_(e,t,s){let i,r;const n=typeof t=="function";typeof e=="string"?(i=e,r=n?s:t):(r=e,i=e.id);function o(a,l){const h=Rg();return a=a||(h?Ke(rd,null):null),a&&Ao(a),a=id,a._s.has(i)||(n?od(i,t,r,a):B_(i,r,a)),a._s.get(i)}return o.$id=i,o}const ad=I_(),zr=(e,t)=>{const s=e.__vccOpts||e;for(const[i,r]of t)s[i]=r;return s},F_={};function N_(e,t){const s=vg("RouterView");return me(),Hg(s)}const L_=zr(F_,[["render",N_]]);/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const xi=typeof window<"u";function k_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const St=Object.assign;function qo(e,t){const s={};for(const i in t){const r=t[i];s[i]=ke(r)?r.map(e):e(r)}return s}const br=()=>{},ke=Array.isArray,U_=/\/$/,G_=e=>e.replace(U_,"");function Ko(e,t,s="/"){let i,r={},n="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),n=t.slice(l+1,a>-1?a:t.length),r=e(n)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=X_(i??t,s),{fullPath:i+(n&&"?")+n+o,path:i,query:r,hash:o}}function H_(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function pc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function $_(e,t,s){const i=t.matched.length-1,r=s.matched.length-1;return i>-1&&i===r&&$i(t.matched[i],s.matched[r])&&ld(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function $i(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ld(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!V_(e[s],t[s]))return!1;return!0}function V_(e,t){return ke(e)?mc(e,t):ke(t)?mc(t,e):e===t}function mc(e,t){return ke(t)?e.length===t.length&&e.every((s,i)=>s===t[i]):e.length===1&&e[0]===t}function X_(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let n=s.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")n>1&&n--;else break;return s.slice(0,n).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Lr;(function(e){e.pop="pop",e.push="push"})(Lr||(Lr={}));var Er;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Er||(Er={}));function z_(e){if(!e)if(xi){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),G_(e)}const W_=/^[^#]+#/;function j_(e,t){return e.replace(W_,"#")+t}function Y_(e,t){const s=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-s.left-(t.left||0),top:i.top-s.top-(t.top||0)}}const Co=()=>({left:window.pageXOffset,top:window.pageYOffset});function q_(e){let t;if("el"in e){const s=e.el,i=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;t=Y_(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function gc(e,t){return(history.state?history.state.position-t:-1)+e}const tl=new Map;function K_(e,t){tl.set(e,t)}function Z_(e){const t=tl.get(e);return tl.delete(e),t}let J_=()=>location.protocol+"//"+location.host;function hd(e,t){const{pathname:s,search:i,hash:r}=t,n=e.indexOf("#");if(n>-1){let a=r.includes(e.slice(n))?e.slice(n).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),pc(l,"")}return pc(s,e)+i+r}function Q_(e,t,s,i){let r=[],n=[],o=null;const a=({state:f})=>{const d=hd(e,location),p=s.value,m=t.value;let g=0;if(f){if(s.value=d,t.value=f,o&&o===p){o=null;return}g=m?f.position-m.position:0}else i(d);r.forEach(v=>{v(s.value,p,{delta:g,type:Lr.pop,direction:g?g>0?Er.forward:Er.back:Er.unknown})})};function l(){o=s.value}function h(f){r.push(f);const d=()=>{const p=r.indexOf(f);p>-1&&r.splice(p,1)};return n.push(d),d}function c(){const{history:f}=window;f.state&&f.replaceState(St({},f.state,{scroll:Co()}),"")}function u(){for(const f of n)f();n=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function _c(e,t,s,i=!1,r=!1){return{back:e,current:t,forward:s,replaced:i,position:window.history.length,scroll:r?Co():null}}function ty(e){const{history:t,location:s}=window,i={value:hd(e,s)},r={value:t.state};r.value||n(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function n(l,h,c){const u=e.indexOf("#"),f=u>-1?(s.host&&document.querySelector("base")?e:e.slice(u))+l:J_()+e+l;try{t[c?"replaceState":"pushState"](h,"",f),r.value=h}catch(d){console.error(d),s[c?"replace":"assign"](f)}}function o(l,h){const c=St({},t.state,_c(r.value.back,l,r.value.forward,!0),h,{position:r.value.position});n(l,c,!0),i.value=l}function a(l,h){const c=St({},r.value,t.state,{forward:l,scroll:Co()});n(c.current,c,!0);const u=St({},_c(i.value,l,null),{position:c.position+1},h);n(l,u,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function ey(e){e=z_(e);const t=ty(e),s=Q_(e,t.state,t.location,t.replace);function i(n,o=!0){o||s.pauseListeners(),history.go(n)}const r=St({location:"",base:e,go:i,createHref:j_.bind(null,e)},t,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function sy(e){return typeof e=="string"||e&&typeof e=="object"}function cd(e){return typeof e=="string"||typeof e=="symbol"}const gs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ud=Symbol("");var yc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(yc||(yc={}));function Vi(e,t){return St(new Error,{type:e,[ud]:!0},t)}function ss(e,t){return e instanceof Error&&ud in e&&(t==null||!!(e.type&t))}const vc="[^/]+?",iy={sensitive:!1,strict:!1,start:!0,end:!0},ry=/[.+*?^${}()[\]/\\]/g;function ny(e,t){const s=St({},iy,t),i=[];let r=s.start?"^":"";const n=[];for(const h of e){const c=h.length?[]:[90];s.strict&&!h.length&&(r+="/");for(let u=0;u<h.length;u++){const f=h[u];let d=40+(s.sensitive?.25:0);if(f.type===0)u||(r+="/"),r+=f.value.replace(ry,"\\$&"),d+=40;else if(f.type===1){const{value:p,repeatable:m,optional:g,regexp:v}=f;n.push({name:p,repeatable:m,optional:g});const b=v||vc;if(b!==vc){d+=10;try{new RegExp(`(${b})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+E.message)}}let _=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;u||(_=g&&h.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),r+=_,d+=20,g&&(d+=-8),m&&(d+=-20),b===".*"&&(d+=-50)}c.push(d)}i.push(c)}if(s.strict&&s.end){const h=i.length-1;i[h][i[h].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&(r+="(?:/|$)");const o=new RegExp(r,s.sensitive?"":"i");function a(h){const c=h.match(o),u={};if(!c)return null;for(let f=1;f<c.length;f++){const d=c[f]||"",p=n[f-1];u[p.name]=d&&p.repeatable?d.split("/"):d}return u}function l(h){let c="",u=!1;for(const f of e){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const d of f)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:m,optional:g}=d,v=p in h?h[p]:"";if(ke(v)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=ke(v)?v.join("/"):v;if(!b)if(g)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c||"/"}return{re:o,score:i,keys:n,parse:a,stringify:l}}function oy(e,t){let s=0;for(;s<e.length&&s<t.length;){const i=t[s]-e[s];if(i)return i;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function ay(e,t){let s=0;const i=e.score,r=t.score;for(;s<i.length&&s<r.length;){const n=oy(i[s],r[s]);if(n)return n;s++}if(Math.abs(r.length-i.length)===1){if(xc(i))return 1;if(xc(r))return-1}return r.length-i.length}function xc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ly={type:0,value:""},hy=/[a-zA-Z0-9_]/;function cy(e){if(!e)return[[]];if(e==="/")return[[ly]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${s})/"${h}": ${d}`)}let s=0,i=s;const r=[];let n;function o(){n&&r.push(n),n=[]}let a=0,l,h="",c="";function u(){h&&(s===0?n.push({type:0,value:h}):s===1||s===2||s===3?(n.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:h,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function f(){h+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==2){i=s,s=4;continue}switch(s){case 0:l==="/"?(h&&u(),o()):l===":"?(u(),s=1):f();break;case 4:f(),s=i;break;case 1:l==="("?s=2:hy.test(l)?f():(u(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:s=3:c+=l;break;case 3:u(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),o(),r}function uy(e,t,s){const i=ny(cy(e.path),s),r=St(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function fy(e,t){const s=[],i=new Map;t=wc({strict:!1,end:!0,sensitive:!1},t);function r(c){return i.get(c)}function n(c,u,f){const d=!f,p=dy(c);p.aliasOf=f&&f.record;const m=wc(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const E of _)g.push(St({},p,{components:f?f.record.components:p.components,path:E,aliasOf:f?f.record:p}))}let v,b;for(const _ of g){const{path:E}=_;if(u&&E[0]!=="/"){const C=u.record.path,F=C[C.length-1]==="/"?"":"/";_.path=u.record.path+(E&&F+E)}if(v=uy(_,u,m),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),d&&c.name&&!Ec(v)&&o(c.name)),p.children){const C=p.children;for(let F=0;F<C.length;F++)n(C[F],v,f&&f.children[F])}f=f||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return b?()=>{o(b)}:br}function o(c){if(cd(c)){const u=i.get(c);u&&(i.delete(c),s.splice(s.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=s.indexOf(c);u>-1&&(s.splice(u,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return s}function l(c){let u=0;for(;u<s.length&&ay(c,s[u])>=0&&(c.record.path!==s[u].record.path||!fd(c,s[u]));)u++;s.splice(u,0,c),c.record.name&&!Ec(c)&&i.set(c.record.name,c)}function h(c,u){let f,d={},p,m;if("name"in c&&c.name){if(f=i.get(c.name),!f)throw Vi(1,{location:c});m=f.record.name,d=St(bc(u.params,f.keys.filter(b=>!b.optional).map(b=>b.name)),c.params&&bc(c.params,f.keys.map(b=>b.name))),p=f.stringify(d)}else if("path"in c)p=c.path,f=s.find(b=>b.re.test(p)),f&&(d=f.parse(p),m=f.record.name);else{if(f=u.name?i.get(u.name):s.find(b=>b.re.test(u.path)),!f)throw Vi(1,{location:c,currentLocation:u});m=f.record.name,d=St({},u.params,c.params),p=f.stringify(d)}const g=[];let v=f;for(;v;)g.unshift(v.record),v=v.parent;return{name:m,path:p,params:d,matched:g,meta:my(g)}}return e.forEach(c=>n(c)),{addRoute:n,resolve:h,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function bc(e,t){const s={};for(const i of t)i in e&&(s[i]=e[i]);return s}function dy(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:py(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function py(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const i in e.components)t[i]=typeof s=="object"?s[i]:s;return t}function Ec(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function my(e){return e.reduce((t,s)=>St(t,s.meta),{})}function wc(e,t){const s={};for(const i in e)s[i]=i in t?t[i]:e[i];return s}function fd(e,t){return t.children.some(s=>s===e||fd(e,s))}const dd=/#/g,gy=/&/g,_y=/\//g,yy=/=/g,vy=/\?/g,pd=/\+/g,xy=/%5B/g,by=/%5D/g,md=/%5E/g,Ey=/%60/g,gd=/%7B/g,wy=/%7C/g,_d=/%7D/g,Ty=/%20/g;function ch(e){return encodeURI(""+e).replace(wy,"|").replace(xy,"[").replace(by,"]")}function Sy(e){return ch(e).replace(gd,"{").replace(_d,"}").replace(md,"^")}function el(e){return ch(e).replace(pd,"%2B").replace(Ty,"+").replace(dd,"%23").replace(gy,"%26").replace(Ey,"`").replace(gd,"{").replace(_d,"}").replace(md,"^")}function Ay(e){return el(e).replace(yy,"%3D")}function Cy(e){return ch(e).replace(dd,"%23").replace(vy,"%3F")}function Iy(e){return e==null?"":Cy(e).replace(_y,"%2F")}function qn(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Py(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const n=i[r].replace(pd," "),o=n.indexOf("="),a=qn(o<0?n:n.slice(0,o)),l=o<0?null:qn(n.slice(o+1));if(a in t){let h=t[a];ke(h)||(h=t[a]=[h]),h.push(l)}else t[a]=l}return t}function Tc(e){let t="";for(let s in e){const i=e[s];if(s=Ay(s),i==null){i!==void 0&&(t+=(t.length?"&":"")+s);continue}(ke(i)?i.map(n=>n&&el(n)):[i&&el(i)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+s,n!=null&&(t+="="+n))})}return t}function Ry(e){const t={};for(const s in e){const i=e[s];i!==void 0&&(t[s]=ke(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const My=Symbol(""),Sc=Symbol(""),uh=Symbol(""),yd=Symbol(""),sl=Symbol("");function ir(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function xs(e,t,s,i,r){const n=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=u=>{u===!1?a(Vi(4,{from:s,to:t})):u instanceof Error?a(u):sy(u)?a(Vi(2,{from:t,to:u})):(n&&i.enterCallbacks[r]===n&&typeof u=="function"&&n.push(u),o())},h=e.call(i&&i.instances[r],t,s,l);let c=Promise.resolve(h);e.length<3&&(c=c.then(l)),c.catch(u=>a(u))})}function Zo(e,t,s,i){const r=[];for(const n of e)for(const o in n.components){let a=n.components[o];if(!(t!=="beforeRouteEnter"&&!n.instances[o]))if(Dy(a)){const h=(a.__vccOpts||a)[t];h&&r.push(xs(h,s,i,n,o))}else{let l=a();r.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${n.path}"`));const c=k_(h)?h.default:h;n.components[o]=c;const f=(c.__vccOpts||c)[t];return f&&xs(f,s,i,n,o)()}))}}return r}function Dy(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ac(e){const t=Ke(uh),s=Ke(yd),i=ae(()=>t.resolve($t(e.to))),r=ae(()=>{const{matched:l}=i.value,{length:h}=l,c=l[h-1],u=s.matched;if(!c||!u.length)return-1;const f=u.findIndex($i.bind(null,c));if(f>-1)return f;const d=Cc(l[h-2]);return h>1&&Cc(c)===d&&u[u.length-1].path!==d?u.findIndex($i.bind(null,l[h-2])):f}),n=ae(()=>r.value>-1&&Ny(s.params,i.value.params)),o=ae(()=>r.value>-1&&r.value===s.matched.length-1&&ld(s.params,i.value.params));function a(l={}){return Fy(l)?t[$t(e.replace)?"replace":"push"]($t(e.to)).catch(br):Promise.resolve()}return{route:i,href:ae(()=>i.value.href),isActive:n,isExactActive:o,navigate:a}}const By=hi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ac,setup(e,{slots:t}){const s=Ls(Ac(e)),{options:i}=Ke(uh),r=ae(()=>({[Ic(e.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[Ic(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const n=t.default&&t.default(s);return e.custom?n:sd("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},n)}}}),Oy=By;function Fy(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ny(e,t){for(const s in t){const i=t[s],r=e[s];if(typeof i=="string"){if(i!==r)return!1}else if(!ke(r)||r.length!==i.length||i.some((n,o)=>n!==r[o]))return!1}return!0}function Cc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ic=(e,t,s)=>e??t??s,Ly=hi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const i=Ke(sl),r=ae(()=>e.route||i.value),n=Ke(Sc,0),o=ae(()=>{let h=$t(n);const{matched:c}=r.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),a=ae(()=>r.value.matched[o.value]);Dn(Sc,ae(()=>o.value+1)),Dn(My,a),Dn(sl,r);const l=ws();return ti(()=>[l.value,a.value,e.name],([h,c,u],[f,d,p])=>{c&&(c.instances[u]=h,d&&d!==c&&h&&h===f&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),h&&c&&(!d||!$i(c,d)||!f)&&(c.enterCallbacks[u]||[]).forEach(m=>m(h))},{flush:"post"}),()=>{const h=r.value,c=e.name,u=a.value,f=u&&u.components[c];if(!f)return Pc(s.default,{Component:f,route:h});const d=u.props[c],p=d?d===!0?h.params:typeof d=="function"?d(h):d:null,g=sd(f,St({},p,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return Pc(s.default,{Component:g,route:h})||g}}});function Pc(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const ky=Ly;function Uy(e){const t=fy(e.routes,e),s=e.parseQuery||Py,i=e.stringifyQuery||Tc,r=e.history,n=ir(),o=ir(),a=ir(),l=Hm(gs);let h=gs;xi&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=qo.bind(null,A=>""+A),u=qo.bind(null,Iy),f=qo.bind(null,qn);function d(A,V){let U,Y;return cd(A)?(U=t.getRecordMatcher(A),Y=V):Y=A,t.addRoute(Y,U)}function p(A){const V=t.getRecordMatcher(A);V&&t.removeRoute(V)}function m(){return t.getRoutes().map(A=>A.record)}function g(A){return!!t.getRecordMatcher(A)}function v(A,V){if(V=St({},V||l.value),typeof A=="string"){const w=Ko(s,A,V.path),S=t.resolve({path:w.path},V),P=r.createHref(w.fullPath);return St(w,S,{params:f(S.params),hash:qn(w.hash),redirectedFrom:void 0,href:P})}let U;if("path"in A)U=St({},A,{path:Ko(s,A.path,V.path).path});else{const w=St({},A.params);for(const S in w)w[S]==null&&delete w[S];U=St({},A,{params:u(w)}),V.params=u(V.params)}const Y=t.resolve(U,V),rt=A.hash||"";Y.params=c(f(Y.params));const y=H_(i,St({},A,{hash:Sy(rt),path:Y.path})),x=r.createHref(y);return St({fullPath:y,hash:rt,query:i===Tc?Ry(A.query):A.query||{}},Y,{redirectedFrom:void 0,href:x})}function b(A){return typeof A=="string"?Ko(s,A,l.value.path):St({},A)}function _(A,V){if(h!==A)return Vi(8,{from:V,to:A})}function E(A){return M(A)}function C(A){return E(St(b(A),{replace:!0}))}function F(A){const V=A.matched[A.matched.length-1];if(V&&V.redirect){const{redirect:U}=V;let Y=typeof U=="function"?U(A):U;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=b(Y):{path:Y},Y.params={}),St({query:A.query,hash:A.hash,params:"path"in Y?{}:A.params},Y)}}function M(A,V){const U=h=v(A),Y=l.value,rt=A.state,y=A.force,x=A.replace===!0,w=F(U);if(w)return M(St(b(w),{state:typeof w=="object"?St({},rt,w.state):rt,force:y,replace:x}),V||U);const S=U;S.redirectedFrom=V;let P;return!y&&$_(i,Y,U)&&(P=Vi(16,{to:S,from:Y}),et(Y,Y,!0,!1)),(P?Promise.resolve(P):X(S,Y)).catch(D=>ss(D)?ss(D,2)?D:O(D):tt(D,S,Y)).then(D=>{if(D){if(ss(D,2))return M(St({replace:x},b(D.to),{state:typeof D.to=="object"?St({},rt,D.to.state):rt,force:y}),V||S)}else D=G(S,Y,!0,x,rt);return N(S,Y,D),D})}function T(A,V){const U=_(A,V);return U?Promise.reject(U):Promise.resolve()}function B(A){const V=bt.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(A):A()}function X(A,V){let U;const[Y,rt,y]=Gy(A,V);U=Zo(Y.reverse(),"beforeRouteLeave",A,V);for(const w of Y)w.leaveGuards.forEach(S=>{U.push(xs(S,A,V))});const x=T.bind(null,A,V);return U.push(x),mt(U).then(()=>{U=[];for(const w of n.list())U.push(xs(w,A,V));return U.push(x),mt(U)}).then(()=>{U=Zo(rt,"beforeRouteUpdate",A,V);for(const w of rt)w.updateGuards.forEach(S=>{U.push(xs(S,A,V))});return U.push(x),mt(U)}).then(()=>{U=[];for(const w of y)if(w.beforeEnter)if(ke(w.beforeEnter))for(const S of w.beforeEnter)U.push(xs(S,A,V));else U.push(xs(w.beforeEnter,A,V));return U.push(x),mt(U)}).then(()=>(A.matched.forEach(w=>w.enterCallbacks={}),U=Zo(y,"beforeRouteEnter",A,V),U.push(x),mt(U))).then(()=>{U=[];for(const w of o.list())U.push(xs(w,A,V));return U.push(x),mt(U)}).catch(w=>ss(w,8)?w:Promise.reject(w))}function N(A,V,U){a.list().forEach(Y=>B(()=>Y(A,V,U)))}function G(A,V,U,Y,rt){const y=_(A,V);if(y)return y;const x=V===gs,w=xi?history.state:{};U&&(Y||x?r.replace(A.fullPath,St({scroll:x&&w&&w.scroll},rt)):r.push(A.fullPath,rt)),l.value=A,et(A,V,U,x),O()}let R;function I(){R||(R=r.listen((A,V,U)=>{if(!Bt.listening)return;const Y=v(A),rt=F(Y);if(rt){M(St(rt,{replace:!0}),Y).catch(br);return}h=Y;const y=l.value;xi&&K_(gc(y.fullPath,U.delta),Co()),X(Y,y).catch(x=>ss(x,12)?x:ss(x,2)?(M(x.to,Y).then(w=>{ss(w,20)&&!U.delta&&U.type===Lr.pop&&r.go(-1,!1)}).catch(br),Promise.reject()):(U.delta&&r.go(-U.delta,!1),tt(x,Y,y))).then(x=>{x=x||G(Y,y,!1),x&&(U.delta&&!ss(x,8)?r.go(-U.delta,!1):U.type===Lr.pop&&ss(x,20)&&r.go(-1,!1)),N(Y,y,x)}).catch(br)}))}let st=ir(),j=ir(),L;function tt(A,V,U){O(A);const Y=j.list();return Y.length?Y.forEach(rt=>rt(A,V,U)):console.error(A),Promise.reject(A)}function Tt(){return L&&l.value!==gs?Promise.resolve():new Promise((A,V)=>{st.add([A,V])})}function O(A){return L||(L=!A,I(),st.list().forEach(([V,U])=>A?U(A):V()),st.reset()),A}function et(A,V,U,Y){const{scrollBehavior:rt}=e;if(!xi||!rt)return Promise.resolve();const y=!U&&Z_(gc(A.fullPath,0))||(Y||!U)&&history.state&&history.state.scroll||null;return sh().then(()=>rt(A,V,y)).then(x=>x&&q_(x)).catch(x=>tt(x,A,V))}const ht=A=>r.go(A);let vt;const bt=new Set,Bt={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:m,resolve:v,options:e,push:E,replace:C,go:ht,back:()=>ht(-1),forward:()=>ht(1),beforeEach:n.add,beforeResolve:o.add,afterEach:a.add,onError:j.add,isReady:Tt,install(A){const V=this;A.component("RouterLink",Oy),A.component("RouterView",ky),A.config.globalProperties.$router=V,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>$t(l)}),xi&&!vt&&l.value===gs&&(vt=!0,E(r.location).catch(rt=>{}));const U={};for(const rt in gs)Object.defineProperty(U,rt,{get:()=>l.value[rt],enumerable:!0});A.provide(uh,V),A.provide(yd,Sf(U)),A.provide(sl,l);const Y=A.unmount;bt.add(A),A.unmount=function(){bt.delete(A),bt.size<1&&(h=gs,R&&R(),R=null,l.value=gs,vt=!1,L=!1),Y()}}};function mt(A){return A.reduce((V,U)=>V.then(()=>B(U)),Promise.resolve())}return Bt}function Gy(e,t){const s=[],i=[],r=[],n=Math.max(t.matched.length,e.matched.length);for(let o=0;o<n;o++){const a=t.matched[o];a&&(e.matched.find(h=>$i(h,a))?i.push(a):s.push(a));const l=e.matched[o];l&&(t.matched.find(h=>$i(h,l))||r.push(l))}return[s,i,r]}const Wr=O_("config",()=>{const e=ws();ws(1);const t=ws(!0),s=ws("select"),i=o=>s.value=o,r=Ls({bgColor:"#ffffff",strokeColor:"#000000",fillColor:"transparent",fillStyle:"fill",strokeWidth:1,line:"solid",lineStyle:"simple",horn:"right",alpha:1,fontSize:14});return{drawInstance:e,isCollapsed:t,drawType:s,updateDrawType:i,context:r,upDateContext:o=>{Object.assign(r,o)}}});var ci=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(ci||{}),vd=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(vd||{}),il=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(il||{}),lt=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(lt||{}),qe=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(qe||{}),$=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))($||{}),Di=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Di||{}),at=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(at||{}),rl=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(rl||{}),ls=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(ls||{}),Ms=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Ms||{}),ts=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(ts||{}),Ue=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Ue||{}),We=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(We||{}),fh=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(fh||{}),ge=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(ge||{}),Ht=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Ht||{}),Gt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Gt||{}),Ze=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(Ze||{});const Hy={createCanvas:(e,t)=>{const s=document.createElement("canvas");return s.width=e,s.height=t,s},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},q={ADAPTER:Hy,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Jo=/iPhone/i,Rc=/iPod/i,Mc=/iPad/i,Dc=/\biOS-universal(?:.+)Mac\b/i,Qo=/\bAndroid(?:.+)Mobile\b/i,Bc=/Android/i,gi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,nn=/Silk/i,is=/Windows Phone/i,Oc=/\bWindows(?:.+)ARM\b/i,Fc=/BlackBerry/i,Nc=/BB10/i,Lc=/Opera Mini/i,kc=/\b(CriOS|Chrome)(?:.+)Mobile/i,Uc=/Mobile(?:.+)Firefox\b/i,Gc=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function $y(e){return function(t){return t.test(e)}}function Hc(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var s=t.userAgent,i=s.split("[FBAN");typeof i[1]<"u"&&(s=i[0]),i=s.split("Twitter"),typeof i[1]<"u"&&(s=i[0]);var r=$y(s),n={apple:{phone:r(Jo)&&!r(is),ipod:r(Rc),tablet:!r(Jo)&&(r(Mc)||Gc(t))&&!r(is),universal:r(Dc),device:(r(Jo)||r(Rc)||r(Mc)||r(Dc)||Gc(t))&&!r(is)},amazon:{phone:r(gi),tablet:!r(gi)&&r(nn),device:r(gi)||r(nn)},android:{phone:!r(is)&&r(gi)||!r(is)&&r(Qo),tablet:!r(is)&&!r(gi)&&!r(Qo)&&(r(nn)||r(Bc)),device:!r(is)&&(r(gi)||r(nn)||r(Qo)||r(Bc))||r(/\bokhttp\b/i)},windows:{phone:r(is),tablet:r(Oc),device:r(is)||r(Oc)},other:{blackberry:r(Fc),blackberry10:r(Nc),opera:r(Lc),firefox:r(Uc),chrome:r(kc),device:r(Fc)||r(Nc)||r(Lc)||r(Uc)||r(kc)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Vy=Hc.default??Hc,hs=Vy(globalThis.navigator);q.RETINA_PREFIX=/@([0-9\.]+)x/;q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(s,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),s}var bd={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(s=!1));function r(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function n(l,h,c,u,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new r(c,u||l,f),p=s?s+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(s?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=s?s+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,d=u.length,p=new Array(d);f<d;f++)p[f]=u[f].fn;return p},a.prototype.listenerCount=function(h){var c=s?s+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,f,d,p){var m=s?s+h:h;if(!this._events[m])return!1;var g=this._events[m],v=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,f),!0;case 5:return g.fn.call(g.context,c,u,f,d),!0;case 6:return g.fn.call(g.context,c,u,f,d,p),!0}for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var E=g.length,C;for(_=0;_<E;_++)switch(g[_].once&&this.removeListener(h,g[_].fn,void 0,!0),v){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,c);break;case 3:g[_].fn.call(g[_].context,c,u);break;case 4:g[_].fn.call(g[_].context,c,u,f);break;default:if(!b)for(C=1,b=new Array(v-1);C<v;C++)b[C-1]=arguments[C];g[_].fn.apply(g[_].context,b)}}return!0},a.prototype.on=function(h,c,u){return n(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return n(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,f){var d=s?s+h:h;if(!this._events[d])return this;if(!c)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!f||p.once)&&(!u||p.context===u)&&o(this,d);else{for(var m=0,g=[],v=p.length;m<v;m++)(p[m].fn!==c||f&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=s?s+h:h,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=s,a.EventEmitter=a,e.exports=a})(bd);var zy=bd.exports;const jr=xd(zy);var dh={exports:{}};dh.exports=Io;dh.exports.default=Io;function Io(e,t,s){s=s||2;var i=t&&t.length,r=i?t[0]*s:e.length,n=Ed(e,0,r,s,!0),o=[];if(!n||n.next===n.prev)return o;var a,l,h,c,u,f,d;if(i&&(n=Ky(e,t,n,s)),e.length>80*s){a=h=e[0],l=c=e[1];for(var p=s;p<r;p+=s)u=e[p],f=e[p+1],u<a&&(a=u),f<l&&(l=f),u>h&&(h=u),f>c&&(c=f);d=Math.max(h-a,c-l),d=d!==0?32767/d:0}return kr(n,o,s,a,l,d,0),o}function Ed(e,t,s,i,r){var n,o;if(r===al(e,t,s,i)>0)for(n=t;n<s;n+=i)o=$c(n,e[n],e[n+1],o);else for(n=s-i;n>=t;n-=i)o=$c(n,e[n],e[n+1],o);return o&&Po(o,o.next)&&(Gr(o),o=o.next),o}function oi(e,t){if(!e)return e;t||(t=e);var s=e,i;do if(i=!1,!s.steiner&&(Po(s,s.next)||Ft(s.prev,s,s.next)===0)){if(Gr(s),s=t=s.prev,s===s.next)break;i=!0}else s=s.next;while(i||s!==t);return t}function kr(e,t,s,i,r,n,o){if(e){!o&&n&&ev(e,i,r,n);for(var a=e,l,h;e.prev!==e.next;){if(l=e.prev,h=e.next,n?jy(e,i,r,n):Wy(e)){t.push(l.i/s|0),t.push(e.i/s|0),t.push(h.i/s|0),Gr(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=Yy(oi(e),t,s),kr(e,t,s,i,r,n,2)):o===2&&qy(e,t,s,i,r,n):kr(oi(e),t,s,i,r,n,1);break}}}}function Wy(e){var t=e.prev,s=e,i=e.next;if(Ft(t,s,i)>=0)return!1;for(var r=t.x,n=s.x,o=i.x,a=t.y,l=s.y,h=i.y,c=r<n?r<o?r:o:n<o?n:o,u=a<l?a<h?a:h:l<h?l:h,f=r>n?r>o?r:o:n>o?n:o,d=a>l?a>h?a:h:l>h?l:h,p=i.next;p!==t;){if(p.x>=c&&p.x<=f&&p.y>=u&&p.y<=d&&Ci(r,a,n,l,o,h,p.x,p.y)&&Ft(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function jy(e,t,s,i){var r=e.prev,n=e,o=e.next;if(Ft(r,n,o)>=0)return!1;for(var a=r.x,l=n.x,h=o.x,c=r.y,u=n.y,f=o.y,d=a<l?a<h?a:h:l<h?l:h,p=c<u?c<f?c:f:u<f?u:f,m=a>l?a>h?a:h:l>h?l:h,g=c>u?c>f?c:f:u>f?u:f,v=nl(d,p,t,s,i),b=nl(m,g,t,s,i),_=e.prevZ,E=e.nextZ;_&&_.z>=v&&E&&E.z<=b;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==o&&Ci(a,c,l,u,h,f,_.x,_.y)&&Ft(_.prev,_,_.next)>=0||(_=_.prevZ,E.x>=d&&E.x<=m&&E.y>=p&&E.y<=g&&E!==r&&E!==o&&Ci(a,c,l,u,h,f,E.x,E.y)&&Ft(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;_&&_.z>=v;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==o&&Ci(a,c,l,u,h,f,_.x,_.y)&&Ft(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;E&&E.z<=b;){if(E.x>=d&&E.x<=m&&E.y>=p&&E.y<=g&&E!==r&&E!==o&&Ci(a,c,l,u,h,f,E.x,E.y)&&Ft(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Yy(e,t,s){var i=e;do{var r=i.prev,n=i.next.next;!Po(r,n)&&wd(r,i,i.next,n)&&Ur(r,n)&&Ur(n,r)&&(t.push(r.i/s|0),t.push(i.i/s|0),t.push(n.i/s|0),Gr(i),Gr(i.next),i=e=n),i=i.next}while(i!==e);return oi(i)}function qy(e,t,s,i,r,n){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&rv(o,a)){var l=Td(o,a);o=oi(o,o.next),l=oi(l,l.next),kr(o,t,s,i,r,n,0),kr(l,t,s,i,r,n,0);return}a=a.next}o=o.next}while(o!==e)}function Ky(e,t,s,i){var r=[],n,o,a,l,h;for(n=0,o=t.length;n<o;n++)a=t[n]*i,l=n<o-1?t[n+1]*i:e.length,h=Ed(e,a,l,i,!1),h===h.next&&(h.steiner=!0),r.push(iv(h));for(r.sort(Zy),n=0;n<r.length;n++)s=Jy(r[n],s);return s}function Zy(e,t){return e.x-t.x}function Jy(e,t){var s=Qy(e,t);if(!s)return t;var i=Td(s,e);return oi(i,i.next),oi(s,s.next)}function Qy(e,t){var s=t,i=e.x,r=e.y,n=-1/0,o;do{if(r<=s.y&&r>=s.next.y&&s.next.y!==s.y){var a=s.x+(r-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=i&&a>n&&(n=a,o=s.x<s.next.x?s:s.next,a===i))return o}s=s.next}while(s!==t);if(!o)return null;var l=o,h=o.x,c=o.y,u=1/0,f;s=o;do i>=s.x&&s.x>=h&&i!==s.x&&Ci(r<c?i:n,r,h,c,r<c?n:i,r,s.x,s.y)&&(f=Math.abs(r-s.y)/(i-s.x),Ur(s,e)&&(f<u||f===u&&(s.x>o.x||s.x===o.x&&tv(o,s)))&&(o=s,u=f)),s=s.next;while(s!==l);return o}function tv(e,t){return Ft(e.prev,e,t.prev)<0&&Ft(t.next,e,e.next)<0}function ev(e,t,s,i){var r=e;do r.z===0&&(r.z=nl(r.x,r.y,t,s,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,sv(r)}function sv(e){var t,s,i,r,n,o,a,l,h=1;do{for(s=e,e=null,n=null,o=0;s;){for(o++,i=s,a=0,t=0;t<h&&(a++,i=i.nextZ,!!i);t++);for(l=h;a>0||l>0&&i;)a!==0&&(l===0||!i||s.z<=i.z)?(r=s,s=s.nextZ,a--):(r=i,i=i.nextZ,l--),n?n.nextZ=r:e=r,r.prevZ=n,n=r;s=i}n.nextZ=null,h*=2}while(o>1);return e}function nl(e,t,s,i,r){return e=(e-s)*r|0,t=(t-i)*r|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function iv(e){var t=e,s=e;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==e);return s}function Ci(e,t,s,i,r,n,o,a){return(r-o)*(t-a)>=(e-o)*(n-a)&&(e-o)*(i-a)>=(s-o)*(t-a)&&(s-o)*(n-a)>=(r-o)*(i-a)}function rv(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!nv(e,t)&&(Ur(e,t)&&Ur(t,e)&&ov(e,t)&&(Ft(e.prev,e,t.prev)||Ft(e,t.prev,t))||Po(e,t)&&Ft(e.prev,e,e.next)>0&&Ft(t.prev,t,t.next)>0)}function Ft(e,t,s){return(t.y-e.y)*(s.x-t.x)-(t.x-e.x)*(s.y-t.y)}function Po(e,t){return e.x===t.x&&e.y===t.y}function wd(e,t,s,i){var r=an(Ft(e,t,s)),n=an(Ft(e,t,i)),o=an(Ft(s,i,e)),a=an(Ft(s,i,t));return!!(r!==n&&o!==a||r===0&&on(e,s,t)||n===0&&on(e,i,t)||o===0&&on(s,e,i)||a===0&&on(s,t,i))}function on(e,t,s){return t.x<=Math.max(e.x,s.x)&&t.x>=Math.min(e.x,s.x)&&t.y<=Math.max(e.y,s.y)&&t.y>=Math.min(e.y,s.y)}function an(e){return e>0?1:e<0?-1:0}function nv(e,t){var s=e;do{if(s.i!==e.i&&s.next.i!==e.i&&s.i!==t.i&&s.next.i!==t.i&&wd(s,s.next,e,t))return!0;s=s.next}while(s!==e);return!1}function Ur(e,t){return Ft(e.prev,e,e.next)<0?Ft(e,t,e.next)>=0&&Ft(e,e.prev,t)>=0:Ft(e,t,e.prev)<0||Ft(e,e.next,t)<0}function ov(e,t){var s=e,i=!1,r=(e.x+t.x)/2,n=(e.y+t.y)/2;do s.y>n!=s.next.y>n&&s.next.y!==s.y&&r<(s.next.x-s.x)*(n-s.y)/(s.next.y-s.y)+s.x&&(i=!i),s=s.next;while(s!==e);return i}function Td(e,t){var s=new ol(e.i,e.x,e.y),i=new ol(t.i,t.x,t.y),r=e.next,n=t.prev;return e.next=t,t.prev=e,s.next=r,r.prev=s,i.next=s,s.prev=i,n.next=i,i.prev=n,i}function $c(e,t,s,i){var r=new ol(e,t,s);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Gr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ol(e,t,s){this.i=e,this.x=t,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Io.deviation=function(e,t,s,i){var r=t&&t.length,n=r?t[0]*s:e.length,o=Math.abs(al(e,0,n,s));if(r)for(var a=0,l=t.length;a<l;a++){var h=t[a]*s,c=a<l-1?t[a+1]*s:e.length;o-=Math.abs(al(e,h,c,s))}var u=0;for(a=0;a<i.length;a+=3){var f=i[a]*s,d=i[a+1]*s,p=i[a+2]*s;u+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function al(e,t,s,i){for(var r=0,n=t,o=s-i;n<s;n+=i)r+=(e[o]-e[n])*(e[n+1]+e[o+1]),o=n;return r}Io.flatten=function(e){for(var t=e[0][0].length,s={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var n=0;n<e[r].length;n++)for(var o=0;o<t;o++)s.vertices.push(e[r][n][o]);r>0&&(i+=e[r-1].length,s.holes.push(i))}return s};var av=dh.exports;const lv=xd(av);var Kn={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Kn.exports;(function(e,t){(function(s){var i=t&&!t.nodeType&&t,r=e&&!e.nodeType&&e,n=typeof ta=="object"&&ta;(n.global===n||n.window===n||n.self===n)&&(s=n);var o,a=2147483647,l=36,h=1,c=26,u=38,f=700,d=72,p=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-h,C=Math.floor,F=String.fromCharCode,M;function T(O){throw new RangeError(_[O])}function B(O,et){for(var ht=O.length,vt=[];ht--;)vt[ht]=et(O[ht]);return vt}function X(O,et){var ht=O.split("@"),vt="";ht.length>1&&(vt=ht[0]+"@",O=ht[1]),O=O.replace(b,".");var bt=O.split("."),Bt=B(bt,et).join(".");return vt+Bt}function N(O){for(var et=[],ht=0,vt=O.length,bt,Bt;ht<vt;)bt=O.charCodeAt(ht++),bt>=55296&&bt<=56319&&ht<vt?(Bt=O.charCodeAt(ht++),(Bt&64512)==56320?et.push(((bt&1023)<<10)+(Bt&1023)+65536):(et.push(bt),ht--)):et.push(bt);return et}function G(O){return B(O,function(et){var ht="";return et>65535&&(et-=65536,ht+=F(et>>>10&1023|55296),et=56320|et&1023),ht+=F(et),ht}).join("")}function R(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:l}function I(O,et){return O+22+75*(O<26)-((et!=0)<<5)}function st(O,et,ht){var vt=0;for(O=ht?C(O/f):O>>1,O+=C(O/et);O>E*c>>1;vt+=l)O=C(O/E);return C(vt+(E+1)*O/(O+u))}function j(O){var et=[],ht=O.length,vt,bt=0,Bt=p,mt=d,A,V,U,Y,rt,y,x,w,S;for(A=O.lastIndexOf(m),A<0&&(A=0),V=0;V<A;++V)O.charCodeAt(V)>=128&&T("not-basic"),et.push(O.charCodeAt(V));for(U=A>0?A+1:0;U<ht;){for(Y=bt,rt=1,y=l;U>=ht&&T("invalid-input"),x=R(O.charCodeAt(U++)),(x>=l||x>C((a-bt)/rt))&&T("overflow"),bt+=x*rt,w=y<=mt?h:y>=mt+c?c:y-mt,!(x<w);y+=l)S=l-w,rt>C(a/S)&&T("overflow"),rt*=S;vt=et.length+1,mt=st(bt-Y,vt,Y==0),C(bt/vt)>a-Bt&&T("overflow"),Bt+=C(bt/vt),bt%=vt,et.splice(bt++,0,Bt)}return G(et)}function L(O){var et,ht,vt,bt,Bt,mt,A,V,U,Y,rt,y=[],x,w,S,P;for(O=N(O),x=O.length,et=p,ht=0,Bt=d,mt=0;mt<x;++mt)rt=O[mt],rt<128&&y.push(F(rt));for(vt=bt=y.length,bt&&y.push(m);vt<x;){for(A=a,mt=0;mt<x;++mt)rt=O[mt],rt>=et&&rt<A&&(A=rt);for(w=vt+1,A-et>C((a-ht)/w)&&T("overflow"),ht+=(A-et)*w,et=A,mt=0;mt<x;++mt)if(rt=O[mt],rt<et&&++ht>a&&T("overflow"),rt==et){for(V=ht,U=l;Y=U<=Bt?h:U>=Bt+c?c:U-Bt,!(V<Y);U+=l)P=V-Y,S=l-Y,y.push(F(I(Y+P%S,0))),V=C(P/S);y.push(F(I(V,0))),Bt=st(ht,w,vt==bt),ht=0,++vt}++ht,++et}return y.join("")}function tt(O){return X(O,function(et){return g.test(et)?j(et.slice(4).toLowerCase()):et})}function Tt(O){return X(O,function(et){return v.test(et)?"xn--"+L(et):et})}if(o={version:"1.4.1",ucs2:{decode:N,encode:G},decode:j,encode:L,toASCII:Tt,toUnicode:tt},i&&r)if(e.exports==i)r.exports=o;else for(M in o)o.hasOwnProperty(M)&&(i[M]=o[M]);else s.punycode=o})(ta)})(Kn,Kn.exports);var hv=Kn.exports,cv=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},s=Symbol("test"),i=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[s]=r;for(s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==s||!Object.prototype.propertyIsEnumerable.call(t,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,s);if(o.value!==r||o.enumerable!==!0)return!1}return!0},Vc=typeof Symbol<"u"&&Symbol,uv=cv,fv=function(){return typeof Vc!="function"||typeof Symbol!="function"||typeof Vc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:uv()},Xc={foo:{}},dv=Object,pv=function(){return{__proto__:Xc}.foo===Xc.foo&&!({__proto__:null}instanceof dv)},mv="Function.prototype.bind called on incompatible ",ea=Array.prototype.slice,gv=Object.prototype.toString,_v="[object Function]",yv=function(t){var s=this;if(typeof s!="function"||gv.call(s)!==_v)throw new TypeError(mv+s);for(var i=ea.call(arguments,1),r,n=function(){if(this instanceof r){var c=s.apply(this,i.concat(ea.call(arguments)));return Object(c)===c?c:this}else return s.apply(t,i.concat(ea.call(arguments)))},o=Math.max(0,s.length-i.length),a=[],l=0;l<o;l++)a.push("$"+l);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(n),s.prototype){var h=function(){};h.prototype=s.prototype,r.prototype=new h,h.prototype=null}return r},vv=yv,ph=Function.prototype.bind||vv,xv=ph,bv=xv.call(Function.call,Object.prototype.hasOwnProperty),_t,Xi=SyntaxError,Sd=Function,Bi=TypeError,sa=function(e){try{return Sd('"use strict"; return ('+e+").constructor;")()}catch{}},si=Object.getOwnPropertyDescriptor;if(si)try{si({},"")}catch{si=null}var ia=function(){throw new Bi},Ev=si?function(){try{return arguments.callee,ia}catch{try{return si(arguments,"callee").get}catch{return ia}}}():ia,_i=fv(),wv=pv(),zt=Object.getPrototypeOf||(wv?function(e){return e.__proto__}:null),bi={},Tv=typeof Uint8Array>"u"||!zt?_t:zt(Uint8Array),ii={"%AggregateError%":typeof AggregateError>"u"?_t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_t:ArrayBuffer,"%ArrayIteratorPrototype%":_i&&zt?zt([][Symbol.iterator]()):_t,"%AsyncFromSyncIteratorPrototype%":_t,"%AsyncFunction%":bi,"%AsyncGenerator%":bi,"%AsyncGeneratorFunction%":bi,"%AsyncIteratorPrototype%":bi,"%Atomics%":typeof Atomics>"u"?_t:Atomics,"%BigInt%":typeof BigInt>"u"?_t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?_t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_t:FinalizationRegistry,"%Function%":Sd,"%GeneratorFunction%":bi,"%Int8Array%":typeof Int8Array>"u"?_t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_i&&zt?zt(zt([][Symbol.iterator]())):_t,"%JSON%":typeof JSON=="object"?JSON:_t,"%Map%":typeof Map>"u"?_t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_i||!zt?_t:zt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_t:Promise,"%Proxy%":typeof Proxy>"u"?_t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?_t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_i||!zt?_t:zt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_i&&zt?zt(""[Symbol.iterator]()):_t,"%Symbol%":_i?Symbol:_t,"%SyntaxError%":Xi,"%ThrowTypeError%":Ev,"%TypedArray%":Tv,"%TypeError%":Bi,"%Uint8Array%":typeof Uint8Array>"u"?_t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?_t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_t:WeakSet};if(zt)try{null.error}catch(e){var Sv=zt(zt(e));ii["%Error.prototype%"]=Sv}var Av=function e(t){var s;if(t==="%AsyncFunction%")s=sa("async function () {}");else if(t==="%GeneratorFunction%")s=sa("function* () {}");else if(t==="%AsyncGeneratorFunction%")s=sa("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(s=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=e("%AsyncGenerator%");r&&zt&&(s=zt(r.prototype))}return ii[t]=s,s},zc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Yr=ph,Zn=bv,Cv=Yr.call(Function.call,Array.prototype.concat),Iv=Yr.call(Function.apply,Array.prototype.splice),Wc=Yr.call(Function.call,String.prototype.replace),Jn=Yr.call(Function.call,String.prototype.slice),Pv=Yr.call(Function.call,RegExp.prototype.exec),Rv=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Mv=/\\(\\)?/g,Dv=function(t){var s=Jn(t,0,1),i=Jn(t,-1);if(s==="%"&&i!=="%")throw new Xi("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&s!=="%")throw new Xi("invalid intrinsic syntax, expected opening `%`");var r=[];return Wc(t,Rv,function(n,o,a,l){r[r.length]=a?Wc(l,Mv,"$1"):o||n}),r},Bv=function(t,s){var i=t,r;if(Zn(zc,i)&&(r=zc[i],i="%"+r[0]+"%"),Zn(ii,i)){var n=ii[i];if(n===bi&&(n=Av(i)),typeof n>"u"&&!s)throw new Bi("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new Xi("intrinsic "+t+" does not exist!")},mh=function(t,s){if(typeof t!="string"||t.length===0)throw new Bi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!="boolean")throw new Bi('"allowMissing" argument must be a boolean');if(Pv(/^%?[^%]*%?$/,t)===null)throw new Xi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Dv(t),r=i.length>0?i[0]:"",n=Bv("%"+r+"%",s),o=n.name,a=n.value,l=!1,h=n.alias;h&&(r=h[0],Iv(i,Cv([0,1],h)));for(var c=1,u=!0;c<i.length;c+=1){var f=i[c],d=Jn(f,0,1),p=Jn(f,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Xi("property names with quotes must have matching quotes");if((f==="constructor"||!u)&&(l=!0),r+="."+f,o="%"+r+"%",Zn(ii,o))a=ii[o];else if(a!=null){if(!(f in a)){if(!s)throw new Bi("base intrinsic for "+t+" exists, but the property is not available.");return}if(si&&c+1>=i.length){var m=si(a,f);u=!!m,u&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[f]}else u=Zn(a,f),a=a[f];u&&!l&&(ii[o]=a)}}return a},Ad={exports:{}};(function(e){var t=ph,s=mh,i=s("%Function.prototype.apply%"),r=s("%Function.prototype.call%"),n=s("%Reflect.apply%",!0)||t.call(r,i),o=s("%Object.getOwnPropertyDescriptor%",!0),a=s("%Object.defineProperty%",!0),l=s("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}e.exports=function(u){var f=n(t,r,arguments);if(o&&a){var d=o(f,"length");d.configurable&&a(f,"length",{value:1+l(0,u.length-(arguments.length-1))})}return f};var h=function(){return n(t,i,arguments)};a?a(e.exports,"apply",{value:h}):e.exports.apply=h})(Ad);var Ov=Ad.exports,Cd=mh,Id=Ov,Fv=Id(Cd("String.prototype.indexOf")),Nv=function(t,s){var i=Cd(t,!!s);return typeof i=="function"&&Fv(t,".prototype.")>-1?Id(i):i};const Lv={},kv=Object.freeze(Object.defineProperty({__proto__:null,default:Lv},Symbol.toStringTag,{value:"Module"})),Uv=Xy(kv);var gh=typeof Map=="function"&&Map.prototype,ra=Object.getOwnPropertyDescriptor&&gh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Qn=gh&&ra&&typeof ra.get=="function"?ra.get:null,jc=gh&&Map.prototype.forEach,_h=typeof Set=="function"&&Set.prototype,na=Object.getOwnPropertyDescriptor&&_h?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,to=_h&&na&&typeof na.get=="function"?na.get:null,Yc=_h&&Set.prototype.forEach,Gv=typeof WeakMap=="function"&&WeakMap.prototype,wr=Gv?WeakMap.prototype.has:null,Hv=typeof WeakSet=="function"&&WeakSet.prototype,Tr=Hv?WeakSet.prototype.has:null,$v=typeof WeakRef=="function"&&WeakRef.prototype,qc=$v?WeakRef.prototype.deref:null,Vv=Boolean.prototype.valueOf,Xv=Object.prototype.toString,zv=Function.prototype.toString,Wv=String.prototype.match,yh=String.prototype.slice,Ts=String.prototype.replace,jv=String.prototype.toUpperCase,Kc=String.prototype.toLowerCase,Pd=RegExp.prototype.test,Zc=Array.prototype.concat,je=Array.prototype.join,Yv=Array.prototype.slice,Jc=Math.floor,ll=typeof BigInt=="function"?BigInt.prototype.valueOf:null,oa=Object.getOwnPropertySymbols,hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,zi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ie=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===zi||"symbol")?Symbol.toStringTag:null,Rd=Object.prototype.propertyIsEnumerable,Qc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function tu(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Pd.call(/e/,t))return t;var s=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var i=e<0?-Jc(-e):Jc(e);if(i!==e){var r=String(i),n=yh.call(t,r.length+1);return Ts.call(r,s,"$&_")+"."+Ts.call(Ts.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ts.call(t,s,"$&_")}var cl=Uv,eu=cl.custom,su=Dd(eu)?eu:null,qv=function e(t,s,i,r){var n=s||{};if(bs(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(bs(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=bs(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(bs(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(bs(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Od(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?tu(t,l):l}if(typeof t=="bigint"){var h=String(t)+"n";return a?tu(t,h):h}var c=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof t=="object")return ul(t)?"[Array]":"[Object]";var u=d0(n,i);if(typeof r>"u")r=[];else if(Bd(r,t)>=0)return"[Circular]";function f(R,I,st){if(I&&(r=Yv.call(r),r.push(I)),st){var j={depth:n.depth};return bs(n,"quoteStyle")&&(j.quoteStyle=n.quoteStyle),e(R,j,i+1,r)}return e(R,n,i+1,r)}if(typeof t=="function"&&!iu(t)){var d=r0(t),p=ln(t,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+je.call(p,", ")+" }":"")}if(Dd(t)){var m=zi?Ts.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):hl.call(t);return typeof t=="object"&&!zi?rr(m):m}if(c0(t)){for(var g="<"+Kc.call(String(t.nodeName)),v=t.attributes||[],b=0;b<v.length;b++)g+=" "+v[b].name+"="+Md(Kv(v[b].value),"double",n);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Kc.call(String(t.nodeName))+">",g}if(ul(t)){if(t.length===0)return"[]";var _=ln(t,f);return u&&!f0(_)?"["+fl(_,u)+"]":"[ "+je.call(_,", ")+" ]"}if(Jv(t)){var E=ln(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!Rd.call(t,"cause")?"{ ["+String(t)+"] "+je.call(Zc.call("[cause]: "+f(t.cause),E),", ")+" }":E.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+je.call(E,", ")+" }"}if(typeof t=="object"&&o){if(su&&typeof t[su]=="function"&&cl)return cl(t,{depth:c-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(n0(t)){var C=[];return jc&&jc.call(t,function(R,I){C.push(f(I,t,!0)+" => "+f(R,t))}),ru("Map",Qn.call(t),C,u)}if(l0(t)){var F=[];return Yc&&Yc.call(t,function(R){F.push(f(R,t))}),ru("Set",to.call(t),F,u)}if(o0(t))return aa("WeakMap");if(h0(t))return aa("WeakSet");if(a0(t))return aa("WeakRef");if(t0(t))return rr(f(Number(t)));if(s0(t))return rr(f(ll.call(t)));if(e0(t))return rr(Vv.call(t));if(Qv(t))return rr(f(String(t)));if(!Zv(t)&&!iu(t)){var M=ln(t,f),T=Qc?Qc(t)===Object.prototype:t instanceof Object||t.constructor===Object,B=t instanceof Object?"":"null prototype",X=!T&&ie&&Object(t)===t&&ie in t?yh.call(ks(t),8,-1):B?"Object":"",N=T||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",G=N+(X||B?"["+je.call(Zc.call([],X||[],B||[]),": ")+"] ":"");return M.length===0?G+"{}":u?G+"{"+fl(M,u)+"}":G+"{ "+je.call(M,", ")+" }"}return String(t)};function Md(e,t,s){var i=(s.quoteStyle||t)==="double"?'"':"'";return i+e+i}function Kv(e){return Ts.call(String(e),/"/g,"&quot;")}function ul(e){return ks(e)==="[object Array]"&&(!ie||!(typeof e=="object"&&ie in e))}function Zv(e){return ks(e)==="[object Date]"&&(!ie||!(typeof e=="object"&&ie in e))}function iu(e){return ks(e)==="[object RegExp]"&&(!ie||!(typeof e=="object"&&ie in e))}function Jv(e){return ks(e)==="[object Error]"&&(!ie||!(typeof e=="object"&&ie in e))}function Qv(e){return ks(e)==="[object String]"&&(!ie||!(typeof e=="object"&&ie in e))}function t0(e){return ks(e)==="[object Number]"&&(!ie||!(typeof e=="object"&&ie in e))}function e0(e){return ks(e)==="[object Boolean]"&&(!ie||!(typeof e=="object"&&ie in e))}function Dd(e){if(zi)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!hl)return!1;try{return hl.call(e),!0}catch{}return!1}function s0(e){if(!e||typeof e!="object"||!ll)return!1;try{return ll.call(e),!0}catch{}return!1}var i0=Object.prototype.hasOwnProperty||function(e){return e in this};function bs(e,t){return i0.call(e,t)}function ks(e){return Xv.call(e)}function r0(e){if(e.name)return e.name;var t=Wv.call(zv.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Bd(e,t){if(e.indexOf)return e.indexOf(t);for(var s=0,i=e.length;s<i;s++)if(e[s]===t)return s;return-1}function n0(e){if(!Qn||!e||typeof e!="object")return!1;try{Qn.call(e);try{to.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function o0(e){if(!wr||!e||typeof e!="object")return!1;try{wr.call(e,wr);try{Tr.call(e,Tr)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function a0(e){if(!qc||!e||typeof e!="object")return!1;try{return qc.call(e),!0}catch{}return!1}function l0(e){if(!to||!e||typeof e!="object")return!1;try{to.call(e);try{Qn.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function h0(e){if(!Tr||!e||typeof e!="object")return!1;try{Tr.call(e,Tr);try{wr.call(e,wr)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function c0(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Od(e,t){if(e.length>t.maxStringLength){var s=e.length-t.maxStringLength,i="... "+s+" more character"+(s>1?"s":"");return Od(yh.call(e,0,t.maxStringLength),t)+i}var r=Ts.call(Ts.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,u0);return Md(r,"single",t)}function u0(e){var t=e.charCodeAt(0),s={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return s?"\\"+s:"\\x"+(t<16?"0":"")+jv.call(t.toString(16))}function rr(e){return"Object("+e+")"}function aa(e){return e+" { ? }"}function ru(e,t,s,i){var r=i?fl(s,i):je.call(s,", ");return e+" ("+t+") {"+r+"}"}function f0(e){for(var t=0;t<e.length;t++)if(Bd(e[t],`
`)>=0)return!1;return!0}function d0(e,t){var s;if(e.indent==="	")s="	";else if(typeof e.indent=="number"&&e.indent>0)s=je.call(Array(e.indent+1)," ");else return null;return{base:s,prev:je.call(Array(t+1),s)}}function fl(e,t){if(e.length===0)return"";var s=`
`+t.prev+t.base;return s+je.call(e,","+s)+`
`+t.prev}function ln(e,t){var s=ul(e),i=[];if(s){i.length=e.length;for(var r=0;r<e.length;r++)i[r]=bs(e,r)?t(e[r],e):""}var n=typeof oa=="function"?oa(e):[],o;if(zi){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var l in e)bs(e,l)&&(s&&String(Number(l))===l&&l<e.length||zi&&o["$"+l]instanceof Symbol||(Pd.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e))));if(typeof oa=="function")for(var h=0;h<n.length;h++)Rd.call(e,n[h])&&i.push("["+t(n[h])+"]: "+t(e[n[h]],e));return i}var vh=mh,Ji=Nv,p0=qv,m0=vh("%TypeError%"),hn=vh("%WeakMap%",!0),cn=vh("%Map%",!0),g0=Ji("WeakMap.prototype.get",!0),_0=Ji("WeakMap.prototype.set",!0),y0=Ji("WeakMap.prototype.has",!0),v0=Ji("Map.prototype.get",!0),x0=Ji("Map.prototype.set",!0),b0=Ji("Map.prototype.has",!0),xh=function(e,t){for(var s=e,i;(i=s.next)!==null;s=i)if(i.key===t)return s.next=i.next,i.next=e.next,e.next=i,i},E0=function(e,t){var s=xh(e,t);return s&&s.value},w0=function(e,t,s){var i=xh(e,t);i?i.value=s:e.next={key:t,next:e.next,value:s}},T0=function(e,t){return!!xh(e,t)},S0=function(){var t,s,i,r={assert:function(n){if(!r.has(n))throw new m0("Side channel does not contain "+p0(n))},get:function(n){if(hn&&n&&(typeof n=="object"||typeof n=="function")){if(t)return g0(t,n)}else if(cn){if(s)return v0(s,n)}else if(i)return E0(i,n)},has:function(n){if(hn&&n&&(typeof n=="object"||typeof n=="function")){if(t)return y0(t,n)}else if(cn){if(s)return b0(s,n)}else if(i)return T0(i,n);return!1},set:function(n,o){hn&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new hn),_0(t,n,o)):cn?(s||(s=new cn),x0(s,n,o)):(i||(i={key:{},next:null}),w0(i,n,o))}};return r},A0=String.prototype.replace,C0=/%20/g,la={RFC1738:"RFC1738",RFC3986:"RFC3986"},bh={default:la.RFC3986,formatters:{RFC1738:function(e){return A0.call(e,C0,"+")},RFC3986:function(e){return String(e)}},RFC1738:la.RFC1738,RFC3986:la.RFC3986},I0=bh,ha=Object.prototype.hasOwnProperty,Zs=Array.isArray,$e=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),P0=function(t){for(;t.length>1;){var s=t.pop(),i=s.obj[s.prop];if(Zs(i)){for(var r=[],n=0;n<i.length;++n)typeof i[n]<"u"&&r.push(i[n]);s.obj[s.prop]=r}}},Fd=function(t,s){for(var i=s&&s.plainObjects?Object.create(null):{},r=0;r<t.length;++r)typeof t[r]<"u"&&(i[r]=t[r]);return i},R0=function e(t,s,i){if(!s)return t;if(typeof s!="object"){if(Zs(t))t.push(s);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!ha.call(Object.prototype,s))&&(t[s]=!0);else return[t,s];return t}if(!t||typeof t!="object")return[t].concat(s);var r=t;return Zs(t)&&!Zs(s)&&(r=Fd(t,i)),Zs(t)&&Zs(s)?(s.forEach(function(n,o){if(ha.call(t,o)){var a=t[o];a&&typeof a=="object"&&n&&typeof n=="object"?t[o]=e(a,n,i):t.push(n)}else t[o]=n}),t):Object.keys(s).reduce(function(n,o){var a=s[o];return ha.call(n,o)?n[o]=e(n[o],a,i):n[o]=a,n},r)},M0=function(t,s){return Object.keys(s).reduce(function(i,r){return i[r]=s[r],i},t)},D0=function(e,t,s){var i=e.replace(/\+/g," ");if(s==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},B0=function(t,s,i,r,n){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var h=o.charCodeAt(l);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===I0.RFC1738&&(h===40||h===41)){a+=o.charAt(l);continue}if(h<128){a=a+$e[h];continue}if(h<2048){a=a+($e[192|h>>6]+$e[128|h&63]);continue}if(h<55296||h>=57344){a=a+($e[224|h>>12]+$e[128|h>>6&63]+$e[128|h&63]);continue}l+=1,h=65536+((h&1023)<<10|o.charCodeAt(l)&1023),a+=$e[240|h>>18]+$e[128|h>>12&63]+$e[128|h>>6&63]+$e[128|h&63]}return a},O0=function(t){for(var s=[{obj:{o:t},prop:"o"}],i=[],r=0;r<s.length;++r)for(var n=s[r],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var h=a[l],c=o[h];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(s.push({obj:o,prop:h}),i.push(c))}return P0(s),t},F0=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},N0=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},L0=function(t,s){return[].concat(t,s)},k0=function(t,s){if(Zs(t)){for(var i=[],r=0;r<t.length;r+=1)i.push(s(t[r]));return i}return s(t)},Nd={arrayToObject:Fd,assign:M0,combine:L0,compact:O0,decode:D0,encode:B0,isBuffer:N0,isRegExp:F0,maybeMap:k0,merge:R0},Ld=S0,On=Nd,Sr=bh,U0=Object.prototype.hasOwnProperty,nu={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,s){return t+"["+s+"]"},repeat:function(t){return t}},as=Array.isArray,G0=Array.prototype.push,kd=function(e,t){G0.apply(e,as(t)?t:[t])},H0=Date.prototype.toISOString,ou=Sr.default,Qt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:On.encode,encodeValuesOnly:!1,format:ou,formatter:Sr.formatters[ou],indices:!1,serializeDate:function(t){return H0.call(t)},skipNulls:!1,strictNullHandling:!1},$0=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},ca={},V0=function e(t,s,i,r,n,o,a,l,h,c,u,f,d,p,m,g){for(var v=t,b=g,_=0,E=!1;(b=b.get(ca))!==void 0&&!E;){var C=b.get(t);if(_+=1,typeof C<"u"){if(C===_)throw new RangeError("Cyclic object value");E=!0}typeof b.get(ca)>"u"&&(_=0)}if(typeof l=="function"?v=l(s,v):v instanceof Date?v=u(v):i==="comma"&&as(v)&&(v=On.maybeMap(v,function(j){return j instanceof Date?u(j):j})),v===null){if(n)return a&&!p?a(s,Qt.encoder,m,"key",f):s;v=""}if($0(v)||On.isBuffer(v)){if(a){var F=p?s:a(s,Qt.encoder,m,"key",f);return[d(F)+"="+d(a(v,Qt.encoder,m,"value",f))]}return[d(s)+"="+d(String(v))]}var M=[];if(typeof v>"u")return M;var T;if(i==="comma"&&as(v))p&&a&&(v=On.maybeMap(v,a)),T=[{value:v.length>0?v.join(",")||null:void 0}];else if(as(l))T=l;else{var B=Object.keys(v);T=h?B.sort(h):B}for(var X=r&&as(v)&&v.length===1?s+"[]":s,N=0;N<T.length;++N){var G=T[N],R=typeof G=="object"&&typeof G.value<"u"?G.value:v[G];if(!(o&&R===null)){var I=as(v)?typeof i=="function"?i(X,G):X:X+(c?"."+G:"["+G+"]");g.set(t,_);var st=Ld();st.set(ca,g),kd(M,e(R,I,i,r,n,o,i==="comma"&&p&&as(v)?null:a,l,h,c,u,f,d,p,m,st))}}return M},X0=function(t){if(!t)return Qt;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var s=t.charset||Qt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Sr.default;if(typeof t.format<"u"){if(!U0.call(Sr.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var r=Sr.formatters[i],n=Qt.filter;return(typeof t.filter=="function"||as(t.filter))&&(n=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Qt.addQueryPrefix,allowDots:typeof t.allowDots>"u"?Qt.allowDots:!!t.allowDots,charset:s,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Qt.charsetSentinel,delimiter:typeof t.delimiter>"u"?Qt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Qt.encode,encoder:typeof t.encoder=="function"?t.encoder:Qt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Qt.encodeValuesOnly,filter:n,format:i,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Qt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Qt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Qt.strictNullHandling}},z0=function(e,t){var s=e,i=X0(t),r,n;typeof i.filter=="function"?(n=i.filter,s=n("",s)):as(i.filter)&&(n=i.filter,r=n);var o=[];if(typeof s!="object"||s===null)return"";var a;t&&t.arrayFormat in nu?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var l=nu[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=l==="comma"&&t&&t.commaRoundTrip;r||(r=Object.keys(s)),i.sort&&r.sort(i.sort);for(var c=Ld(),u=0;u<r.length;++u){var f=r[u];i.skipNulls&&s[f]===null||kd(o,V0(s[f],f,l,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var d=o.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},Wi=Nd,dl=Object.prototype.hasOwnProperty,W0=Array.isArray,Xt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Wi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},j0=function(e){return e.replace(/&#(\d+);/g,function(t,s){return String.fromCharCode(parseInt(s,10))})},Ud=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},Y0="utf8=%26%2310003%3B",q0="utf8=%E2%9C%93",K0=function(t,s){var i={__proto__:null},r=s.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=s.parameterLimit===1/0?void 0:s.parameterLimit,o=r.split(s.delimiter,n),a=-1,l,h=s.charset;if(s.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===q0?h="utf-8":o[l]===Y0&&(h="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var c=o[l],u=c.indexOf("]="),f=u===-1?c.indexOf("="):u+1,d,p;f===-1?(d=s.decoder(c,Xt.decoder,h,"key"),p=s.strictNullHandling?null:""):(d=s.decoder(c.slice(0,f),Xt.decoder,h,"key"),p=Wi.maybeMap(Ud(c.slice(f+1),s),function(m){return s.decoder(m,Xt.decoder,h,"value")})),p&&s.interpretNumericEntities&&h==="iso-8859-1"&&(p=j0(p)),c.indexOf("[]=")>-1&&(p=W0(p)?[p]:p),dl.call(i,d)?i[d]=Wi.combine(i[d],p):i[d]=p}return i},Z0=function(e,t,s,i){for(var r=i?t:Ud(t,s),n=e.length-1;n>=0;--n){var o,a=e[n];if(a==="[]"&&s.parseArrays)o=[].concat(r);else{o=s.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,h=parseInt(l,10);!s.parseArrays&&l===""?o={0:r}:!isNaN(h)&&a!==l&&String(h)===l&&h>=0&&s.parseArrays&&h<=s.arrayLimit?(o=[],o[h]=r):l!=="__proto__"&&(o[l]=r)}r=o}return r},J0=function(t,s,i,r){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(n),h=l?n.slice(0,l.index):n,c=[];if(h){if(!i.plainObjects&&dl.call(Object.prototype,h)&&!i.allowPrototypes)return;c.push(h)}for(var u=0;i.depth>0&&(l=a.exec(n))!==null&&u<i.depth;){if(u+=1,!i.plainObjects&&dl.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+n.slice(l.index)+"]"),Z0(c,s,i,r)}},Q0=function(t){if(!t)return Xt;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=typeof t.charset>"u"?Xt.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?Xt.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Xt.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Xt.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Xt.arrayLimit,charset:s,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Xt.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Xt.comma,decoder:typeof t.decoder=="function"?t.decoder:Xt.decoder,delimiter:typeof t.delimiter=="string"||Wi.isRegExp(t.delimiter)?t.delimiter:Xt.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Xt.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Xt.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Xt.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Xt.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Xt.strictNullHandling}},tx=function(e,t){var s=Q0(t);if(e===""||e===null||typeof e>"u")return s.plainObjects?Object.create(null):{};for(var i=typeof e=="string"?K0(e,s):e,r=s.plainObjects?Object.create(null):{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],l=J0(a,i[a],s,typeof e=="string");r=Wi.merge(r,l,s)}return s.allowSparse===!0?r:Wi.compact(r)},ex=z0,sx=tx,ix=bh,rx={formats:ix,parse:sx,stringify:ex},nx=hv;function Fe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ox=/^([a-z0-9.+-]+:)/i,ax=/:[0-9]*$/,lx=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,hx=["<",">",'"',"`"," ","\r",`
`,"	"],cx=["{","}","|","\\","^","`"].concat(hx),pl=["'"].concat(cx),au=["%","/","?",";","#"].concat(pl),lu=["/","?","#"],ux=255,hu=/^[+a-z0-9A-Z_-]{0,63}$/,fx=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,dx={javascript:!0,"javascript:":!0},ml={javascript:!0,"javascript:":!0},Oi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},gl=rx;function Ro(e,t,s){if(e&&typeof e=="object"&&e instanceof Fe)return e;var i=new Fe;return i.parse(e,t,s),i}Fe.prototype.parse=function(e,t,s){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),r=i!==-1&&i<e.indexOf("#")?"?":"#",n=e.split(r),o=/\\/g;n[0]=n[0].replace(o,"/"),e=n.join(r);var a=e;if(a=a.trim(),!s&&e.split("#").length===1){var l=lx.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=gl.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=ox.exec(a);if(h){h=h[0];var c=h.toLowerCase();this.protocol=c,a=a.substr(h.length)}if(s||h||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(h&&ml[h])&&(a=a.substr(2),this.slashes=!0)}if(!ml[h]&&(u||h&&!Oi[h])){for(var f=-1,d=0;d<lu.length;d++){var p=a.indexOf(lu[d]);p!==-1&&(f===-1||p<f)&&(f=p)}var m,g;f===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",f),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),f=-1;for(var d=0;d<au.length;d++){var p=a.indexOf(au[d]);p!==-1&&(f===-1||p<f)&&(f=p)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var b=this.hostname.split(/\./),d=0,_=b.length;d<_;d++){var E=b[d];if(E&&!E.match(hu)){for(var C="",F=0,M=E.length;F<M;F++)E.charCodeAt(F)>127?C+="x":C+=E[F];if(!C.match(hu)){var T=b.slice(0,d),B=b.slice(d+1),X=E.match(fx);X&&(T.push(X[1]),B.unshift(X[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>ux?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=nx.toASCII(this.hostname));var N=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+N,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!dx[c])for(var d=0,_=pl.length;d<_;d++){var R=pl[d];if(a.indexOf(R)!==-1){var I=encodeURIComponent(R);I===R&&(I=escape(R)),a=a.split(R).join(I)}}var st=a.indexOf("#");st!==-1&&(this.hash=a.substr(st),a=a.slice(0,st));var j=a.indexOf("?");if(j!==-1?(this.search=a.substr(j),this.query=a.substr(j+1),t&&(this.query=gl.parse(this.query)),a=a.slice(0,j)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Oi[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",L=this.search||"";this.path=N+L}return this.href=this.format(),this};function px(e){return typeof e=="string"&&(e=Ro(e)),e instanceof Fe?e.format():Fe.prototype.format.call(e)}Fe.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",s=this.pathname||"",i=this.hash||"",r=!1,n="";this.host?r=e+this.host:this.hostname&&(r=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=gl.stringify(this.query));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Oi[t])&&r!==!1?(r="//"+(r||""),s&&s.charAt(0)!=="/"&&(s="/"+s)):r||(r=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),s=s.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+r+s+o+i};function mx(e,t){return Ro(e,!1,!0).resolve(t)}Fe.prototype.resolve=function(e){return this.resolveObject(Ro(e,!1,!0)).format()};Fe.prototype.resolveObject=function(e){if(typeof e=="string"){var t=new Fe;t.parse(e,!1,!0),e=t}for(var s=new Fe,i=Object.keys(this),r=0;r<i.length;r++){var n=i[r];s[n]=this[n]}if(s.hash=e.hash,e.href==="")return s.href=s.format(),s;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(s[l]=e[l])}return Oi[s.protocol]&&s.hostname&&!s.pathname&&(s.pathname="/",s.path=s.pathname),s.href=s.format(),s}if(e.protocol&&e.protocol!==s.protocol){if(!Oi[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];s[u]=e[u]}return s.href=s.format(),s}if(s.protocol=e.protocol,!e.host&&!ml[e.protocol]){for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),s.pathname=_.join("/")}else s.pathname=e.pathname;if(s.search=e.search,s.query=e.query,s.host=e.host||"",s.auth=e.auth,s.hostname=e.hostname||e.host,s.port=e.port,s.pathname||s.search){var f=s.pathname||"",d=s.search||"";s.path=f+d}return s.slashes=s.slashes||e.slashes,s.href=s.format(),s}var p=s.pathname&&s.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=m||p||s.host&&e.pathname,v=g,b=s.pathname&&s.pathname.split("/")||[],_=e.pathname&&e.pathname.split("/")||[],E=s.protocol&&!Oi[s.protocol];if(E&&(s.hostname="",s.port=null,s.host&&(b[0]===""?b[0]=s.host:b.unshift(s.host)),s.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(_[0]===""?_[0]=e.host:_.unshift(e.host)),e.host=null),g=g&&(_[0]===""||b[0]==="")),m)s.host=e.host||e.host===""?e.host:s.host,s.hostname=e.hostname||e.hostname===""?e.hostname:s.hostname,s.search=e.search,s.query=e.query,b=_;else if(_.length)b||(b=[]),b.pop(),b=b.concat(_),s.search=e.search,s.query=e.query;else if(e.search!=null){if(E){s.host=b.shift(),s.hostname=s.host;var C=s.host&&s.host.indexOf("@")>0?s.host.split("@"):!1;C&&(s.auth=C.shift(),s.hostname=C.shift(),s.host=s.hostname)}return s.search=e.search,s.query=e.query,(s.pathname!==null||s.search!==null)&&(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.href=s.format(),s}if(!b.length)return s.pathname=null,s.search?s.path="/"+s.search:s.path=null,s.href=s.format(),s;for(var F=b.slice(-1)[0],M=(s.host||e.host||b.length>1)&&(F==="."||F==="..")||F==="",T=0,B=b.length;B>=0;B--)F=b[B],F==="."?b.splice(B,1):F===".."?(b.splice(B,1),T++):T&&(b.splice(B,1),T--);if(!g&&!v)for(;T--;T)b.unshift("..");g&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),M&&b.join("/").substr(-1)!=="/"&&b.push("");var X=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(E){s.hostname=X?"":b.length?b.shift():"",s.host=s.hostname;var C=s.host&&s.host.indexOf("@")>0?s.host.split("@"):!1;C&&(s.auth=C.shift(),s.hostname=C.shift(),s.host=s.hostname)}return g=g||s.host&&b.length,g&&!X&&b.unshift(""),b.length>0?s.pathname=b.join("/"):(s.pathname=null,s.path=null),(s.pathname!==null||s.search!==null)&&(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.auth=e.auth||s.auth,s.slashes=s.slashes||e.slashes,s.href=s.format(),s};Fe.prototype.parseHost=function(){var e=this.host,t=ax.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var gx=Ro,_x=mx,yx=px;const vx={parse:gx,format:yx,resolve:_x};function xe(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function nr(e){return e.split("?")[0].split("#")[0]}function xx(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bx(e,t,s){return e.replace(new RegExp(xx(t),"g"),s)}function Ex(e,t){let s="",i=0,r=-1,n=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||n===1))if(r!==a-1&&n===2){if(s.length<2||i!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){const l=s.lastIndexOf("/");if(l!==s.length-1){l===-1?(s="",i=0):(s=s.slice(0,l),i=s.length-1-s.lastIndexOf("/")),r=a,n=0;continue}}else if(s.length===2||s.length===1){s="",i=0,r=a,n=0;continue}}t&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+=`/${e.slice(r+1,a)}`:s=e.slice(r+1,a),i=a-r-1;r=a,n=0}else o===46&&n!==-1?++n:n=-1}return s}const se={toPosix(e){return bx(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){xe(e),e=this.toPosix(e);let t="";const s=/^file:\/\/\//.exec(e),i=/^[^/:]+:\/\//.exec(e),r=/^[^/:]+:\//.exec(e);if(s||i||r){const n=(s==null?void 0:s[0])||(i==null?void 0:i[0])||(r==null?void 0:r[0]);t=n,e=e.slice(n.length)}return t},toAbsolute(e,t,s){if(this.isDataUrl(e))return e;const i=nr(this.toPosix(t??q.ADAPTER.getBaseUrl())),r=nr(this.toPosix(s??this.rootname(i)));return xe(e),e=this.toPosix(e),e.startsWith("/")?se.join(r,e.slice(1)):this.isAbsolute(e)?e:this.join(i,e)},normalize(e){if(e=this.toPosix(e),xe(e),e.length===0)return".";let t="";const s=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const i=e.endsWith("/");return e=Ex(e,!1),e.length>0&&i&&(e+="/"),s?`/${e}`:t+e},isAbsolute(e){return xe(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let s=0;s<e.length;++s){const i=e[s];if(xe(i),i.length>0)if(t===void 0)t=i;else{const r=e[s-1]??"";this.extname(r)?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(xe(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const s=t===47;let i=-1,r=!0;const n=this.getProtocol(e),o=e;e=e.slice(n.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!r){i=a;break}}else r=!1;return i===-1?s?"/":this.isUrl(o)?n+e:n:s&&i===1?"//":n+e.slice(0,i)},rootname(e){xe(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const s=e.indexOf("/",t.length);s!==-1?t=e.slice(0,s):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){xe(e),t&&xe(t),e=nr(this.toPosix(e));let s=0,i=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const l=e.charCodeAt(n);if(l===47){if(!r){s=n+1;break}}else a===-1&&(r=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return s===i?i=a:i===-1&&(i=e.length),e.slice(s,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!r){s=n+1;break}}else i===-1&&(r=!1,i=n+1);return i===-1?"":e.slice(s,i)},extname(e){xe(e),e=nr(this.toPosix(e));let t=-1,s=0,i=-1,r=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!r){s=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===s+1?"":e.slice(t,i)},parse(e){xe(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=nr(this.toPosix(e));let s=e.charCodeAt(0);const i=this.isAbsolute(e);let r;t.root=this.rootname(e),i||this.hasProtocol(e)?r=1:r=0;let n=-1,o=0,a=-1,l=!0,h=e.length-1,c=0;for(;h>=r;--h){if(s=e.charCodeAt(h),s===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),s===46?n===-1?n=h:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&i?(t.name=e.slice(1,n),t.base=e.slice(1,a)):(t.name=e.slice(o,n),t.base=e.slice(o,a)),t.ext=e.slice(n,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},cu={};function yt(e,t,s=3){if(cu[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(i=i.split(`
`).splice(s).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(i))),cu[t]=!0}let ua;function wx(){return typeof ua>"u"&&(ua=function(){var s;const t={stencil:!0,failIfMajorPerformanceCaveat:q.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!q.ADAPTER.getWebGLRenderingContext())return!1;const i=q.ADAPTER.createCanvas();let r=i.getContext("webgl",t)||i.getContext("experimental-webgl",t);const n=!!((s=r==null?void 0:r.getContextAttributes())!=null&&s.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch{return!1}}()),ua}var Tx={grad:.9,turn:360,rad:360/(2*Math.PI)},rs=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Wt=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=Math.pow(10,t)),Math.round(s*e)/s+0},_e=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=1),e>s?s:e>t?e:t},Gd=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},uu=function(e){return{r:_e(e.r,0,255),g:_e(e.g,0,255),b:_e(e.b,0,255),a:_e(e.a)}},fa=function(e){return{r:Wt(e.r),g:Wt(e.g),b:Wt(e.b),a:Wt(e.a,3)}},Sx=/^#([0-9a-f]{3,8})$/i,un=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Hd=function(e){var t=e.r,s=e.g,i=e.b,r=e.a,n=Math.max(t,s,i),o=n-Math.min(t,s,i),a=o?n===t?(s-i)/o:n===s?2+(i-t)/o:4+(t-s)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:r}},$d=function(e){var t=e.h,s=e.s,i=e.v,r=e.a;t=t/360*6,s/=100,i/=100;var n=Math.floor(t),o=i*(1-s),a=i*(1-(t-n)*s),l=i*(1-(1-t+n)*s),h=n%6;return{r:255*[i,a,o,o,l,i][h],g:255*[l,i,i,a,o,o][h],b:255*[o,o,l,i,i,a][h],a:r}},fu=function(e){return{h:Gd(e.h),s:_e(e.s,0,100),l:_e(e.l,0,100),a:_e(e.a)}},du=function(e){return{h:Wt(e.h),s:Wt(e.s),l:Wt(e.l),a:Wt(e.a,3)}},pu=function(e){return $d((s=(t=e).s,{h:t.h,s:(s*=((i=t.l)<50?i:100-i)/100)>0?2*s/(i+s)*100:0,v:i+s,a:t.a}));var t,s,i},Ar=function(e){return{h:(t=Hd(e)).h,s:(r=(200-(s=t.s))*(i=t.v)/100)>0&&r<200?s*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,s,i,r},Ax=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Cx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ix=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Px=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_l={string:[[function(e){var t=Sx.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Wt(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Wt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Ix.exec(e)||Px.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:uu({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Ax.exec(e)||Cx.exec(e);if(!t)return null;var s,i,r=fu({h:(s=t[1],i=t[2],i===void 0&&(i="deg"),Number(s)*(Tx[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return pu(r)},"hsl"]],object:[[function(e){var t=e.r,s=e.g,i=e.b,r=e.a,n=r===void 0?1:r;return rs(t)&&rs(s)&&rs(i)?uu({r:Number(t),g:Number(s),b:Number(i),a:Number(n)}):null},"rgb"],[function(e){var t=e.h,s=e.s,i=e.l,r=e.a,n=r===void 0?1:r;if(!rs(t)||!rs(s)||!rs(i))return null;var o=fu({h:Number(t),s:Number(s),l:Number(i),a:Number(n)});return pu(o)},"hsl"],[function(e){var t=e.h,s=e.s,i=e.v,r=e.a,n=r===void 0?1:r;if(!rs(t)||!rs(s)||!rs(i))return null;var o=function(a){return{h:Gd(a.h),s:_e(a.s,0,100),v:_e(a.v,0,100),a:_e(a.a)}}({h:Number(t),s:Number(s),v:Number(i),a:Number(n)});return $d(o)},"hsv"]]},mu=function(e,t){for(var s=0;s<t.length;s++){var i=t[s][0](e);if(i)return[i,t[s][1]]}return[null,void 0]},Rx=function(e){return typeof e=="string"?mu(e.trim(),_l.string):typeof e=="object"&&e!==null?mu(e,_l.object):[null,void 0]},da=function(e,t){var s=Ar(e);return{h:s.h,s:_e(s.s+100*t,0,100),l:s.l,a:s.a}},pa=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},gu=function(e,t){var s=Ar(e);return{h:s.h,s:s.s,l:_e(s.l+100*t,0,100),a:s.a}},yl=function(){function e(t){this.parsed=Rx(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Wt(pa(this.rgba),2)},e.prototype.isDark=function(){return pa(this.rgba)<.5},e.prototype.isLight=function(){return pa(this.rgba)>=.5},e.prototype.toHex=function(){return t=fa(this.rgba),s=t.r,i=t.g,r=t.b,o=(n=t.a)<1?un(Wt(255*n)):"","#"+un(s)+un(i)+un(r)+o;var t,s,i,r,n,o},e.prototype.toRgb=function(){return fa(this.rgba)},e.prototype.toRgbString=function(){return t=fa(this.rgba),s=t.r,i=t.g,r=t.b,(n=t.a)<1?"rgba("+s+", "+i+", "+r+", "+n+")":"rgb("+s+", "+i+", "+r+")";var t,s,i,r,n},e.prototype.toHsl=function(){return du(Ar(this.rgba))},e.prototype.toHslString=function(){return t=du(Ar(this.rgba)),s=t.h,i=t.s,r=t.l,(n=t.a)<1?"hsla("+s+", "+i+"%, "+r+"%, "+n+")":"hsl("+s+", "+i+"%, "+r+"%)";var t,s,i,r,n},e.prototype.toHsv=function(){return t=Hd(this.rgba),{h:Wt(t.h),s:Wt(t.s),v:Wt(t.v),a:Wt(t.a,3)};var t},e.prototype.invert=function(){return Ve({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Ve(da(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Ve(da(this.rgba,-t))},e.prototype.grayscale=function(){return Ve(da(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Ve(gu(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Ve(gu(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Ve({r:(s=this.rgba).r,g:s.g,b:s.b,a:t}):Wt(this.rgba.a,3);var s},e.prototype.hue=function(t){var s=Ar(this.rgba);return typeof t=="number"?Ve({h:t,s:s.s,l:s.l,a:s.a}):Wt(s.h)},e.prototype.isEqual=function(t){return this.toHex()===Ve(t).toHex()},e}(),Ve=function(e){return e instanceof yl?e:new yl(e)},_u=[],Mx=function(e){e.forEach(function(t){_u.indexOf(t)<0&&(t(yl,_l),_u.push(t))})};function Dx(e,t){var s={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in s)i[s[r]]=r;var n={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=i[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,f="black";if(!n.length)for(var d in s)n[d]=new e(s[d]).toRgb();for(var p in s){var m=(a=c,l=n[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<u&&(u=m,f=p)}return f}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":s[a];return l?new e(l).toRgb():null},"name"])}Mx([Dx]);const Fi=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Fi)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,n)=>r===t[n]);if(e!==null&&t!==null){const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,s,i]=this._components;return{r:e,g:t,b:s,a:i}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,s,i]=this._components;return e[0]=t,e[1]=s,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,i,r]=Fi.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=i,this._components[3]*=r,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,i=this._int>>8&255,r=this._int&255;return t&&(s=s*e+.5|0,i=i*e+.5|0,r=r*e+.5|0),(e*255<<24)+(s<<16)+(i<<8)+r}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,s,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(s*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,s,i,r]=this._components;return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e}normalize(e){let t,s,i,r;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const n=e;t=(n>>16&255)/255,s=(n>>8&255)/255,i=(n&255)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,i,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,i,r=255]=e,t/=255,s/=255,i/=255,r/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Fi.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const n=Ve(e);n.isValid()&&({r:t,g:s,b:i,a:r}=n.rgba,t/=255,s/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=i,this._components[3]=r,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((i,r)=>{e[r]=Math.min(Math.max(i,t),s)}),e)}};let It=Fi;It.shared=new Fi;It.temp=new Fi;It.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function Bx(e){return yt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),It.shared.setValue(e).toHex()}function Ox(e){return yt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),It.shared.setValue(e).toNumber()}function Fx(){const e=[],t=[];for(let i=0;i<32;i++)e[i]=i,t[i]=i;e[lt.NORMAL_NPM]=lt.NORMAL,e[lt.ADD_NPM]=lt.ADD,e[lt.SCREEN_NPM]=lt.SCREEN,t[lt.NORMAL]=lt.NORMAL_NPM,t[lt.ADD]=lt.ADD_NPM,t[lt.SCREEN]=lt.SCREEN_NPM;const s=[];return s.push(t),s.push(e),s}const Vd=Fx();function Xd(e,t){return Vd[t?1:0][e]}function Nx(e,t=null){const s=e*6;if(t=t||new Uint16Array(s),t.length!==s)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${s}`);for(let i=0,r=0;i<s;i+=6,r+=4)t[i+0]=r+0,t[i+1]=r+1,t[i+2]=r+2,t[i+3]=r+0,t[i+4]=r+2,t[i+5]=r+3;return t}function zd(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function eo(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function yu(e){return!(e&e-1)&&!!e}function vu(e){let t=(e>65535?1:0)<<4;e>>>=t;let s=(e>255?1:0)<<3;return e>>>=s,t|=s,s=(e>15?1:0)<<2,e>>>=s,t|=s,s=(e>3?1:0)<<1,e>>>=s,t|=s,t|e>>1}function Ni(e,t,s){const i=e.length;let r;if(t>=i||s===0)return;s=t+s>i?i-t:s;const n=i-s;for(r=t;r<n;++r)e[r]=e[r+s];e.length=n}function Ss(e){return e===0?0:e<0?-1:1}let Lx=0;function ai(){return++Lx}const Wd=class{constructor(e,t,s,i){this.left=e,this.top=t,this.right=s,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let vl=Wd;vl.EMPTY=new Wd(0,0,0,0);const xu={},Xe=Object.create(null),_s=Object.create(null);class kx{constructor(t,s,i){this._canvas=q.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||q.RESOLUTION,this.resize(t,s)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,s){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(s*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function bu(e,t,s){for(let i=0,r=4*s*t;i<t;++i,r+=4)if(e[r+3]!==0)return!1;return!0}function Eu(e,t,s,i,r){const n=4*t;for(let o=i,a=i*n+4*s;o<=r;++o,a+=n)if(e[a+3]!==0)return!1;return!0}function Ux(e){const{width:t,height:s}=e,i=e.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,t,s).data;let o=0,a=0,l=t-1,h=s-1;for(;a<s&&bu(n,t,a);)++a;if(a===s)return vl.EMPTY;for(;bu(n,t,h);)--h;for(;Eu(n,t,o,a,h);)++o;for(;Eu(n,t,l,a,h);)--l;return++l,++h,new vl(o,a,l,h)}function Gx(e){const t=Ux(e),{width:s,height:i}=t;let r=null;if(!t.isEmpty()){const n=e.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");r=n.getImageData(t.left,t.top,s,i)}return{width:s,height:i,data:r}}let fn;function Hx(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,fn||(fn=document.createElement("a")),fn.href=e;const s=vx.parse(fn.href),i=!s.port&&t.port===""||s.port===t.port;return s.hostname!==t.hostname||!i||s.protocol!==t.protocol?"anonymous":""}function Os(e,t=1){var i;const s=(i=q.RETINA_PREFIX)==null?void 0:i.exec(e);return s?parseFloat(s[1]):t}var K=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(K||{});const xl=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},wu=(e,t)=>xl(e).priority??t,it={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(xl).forEach(t=>{t.type.forEach(s=>{var i,r;return(r=(i=this._removeHandlers)[s])==null?void 0:r.call(i,t)})}),this},add(...e){return e.map(xl).forEach(t=>{t.type.forEach(s=>{const i=this._addHandlers,r=this._queue;i[s]?i[s](t):(r[s]=r[s]||[],r[s].push(t))})}),this},handle(e,t,s){const i=this._addHandlers,r=this._removeHandlers;if(i[e]||r[e])throw new Error(`Extension type ${e} already has a handler`);i[e]=t,r[e]=s;const n=this._queue;return n[e]&&(n[e].forEach(o=>t(o)),delete n[e]),this},handleByMap(e,t){return this.handle(e,s=>{t[s.name]=s.ref},s=>{delete t[s.name]})},handleByList(e,t,s=-1){return this.handle(e,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((r,n)=>wu(n,s)-wu(r,s)))},i=>{const r=t.indexOf(i.ref);r!==-1&&t.splice(r,1)})}};class bl{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const $x=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Vx(e){let t="";for(let s=0;s<e;++s)s>0&&(t+=`
else `),s<e-1&&(t+=`if(test == ${s}.0){}`);return t}function Xx(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const s=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=$x.replace(/%forloop%/gi,Vx(e));if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))e=e/2|0;else break}return e}const ma=0,ga=1,_a=2,ya=3,va=4,xa=5;class ps{constructor(){this.data=0,this.blendMode=lt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ma)}set blend(t){!!(this.data&1<<ma)!==t&&(this.data^=1<<ma)}get offsets(){return!!(this.data&1<<ga)}set offsets(t){!!(this.data&1<<ga)!==t&&(this.data^=1<<ga)}get culling(){return!!(this.data&1<<_a)}set culling(t){!!(this.data&1<<_a)!==t&&(this.data^=1<<_a)}get depthTest(){return!!(this.data&1<<ya)}set depthTest(t){!!(this.data&1<<ya)!==t&&(this.data^=1<<ya)}get depthMask(){return!!(this.data&1<<xa)}set depthMask(t){!!(this.data&1<<xa)!==t&&(this.data^=1<<xa)}get clockwiseFrontFace(){return!!(this.data&1<<va)}set clockwiseFrontFace(t){!!(this.data&1<<va)!==t&&(this.data^=1<<va)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==lt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new ps;return t.depthTest=!1,t.blend=!0,t}}const El=[];function jd(e,t){if(!e)return null;let s="";if(typeof e=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(s=i[1].toLowerCase())}for(let i=El.length-1;i>=0;--i){const r=El[i];if(r.test&&r.test(e,s))return new r(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ne{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,s,i,r,n,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,f=c.length;u<f;u++)c[u][h](t,s,i,r,n,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const s=this.items.indexOf(t);return s!==-1&&(this.ensureNonAliasedItems(),this.items.splice(s,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ne.prototype,{dispatch:{value:Ne.prototype.emit},run:{value:Ne.prototype.emit}});class Hr{constructor(t=0,s=0){this._width=t,this._height=s,this.destroyed=!1,this.internal=!1,this.onResize=new Ne("setRealSize"),this.onUpdate=new Ne("update"),this.onError=new Ne("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,s){(t!==this._width||s!==this._height)&&(this._width=t,this._height=s,this.onResize.emit(t,s))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,s,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,s){return!1}}class qr extends Hr{constructor(t,s){const{width:i,height:r}=s||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=t}upload(t,s,i){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===Ue.UNPACK);const n=s.realWidth,o=s.realHeight;return i.width===n&&i.height===o?r.texSubImage2D(s.target,0,0,0,n,o,s.format,i.type,this.data):(i.width=n,i.height=o,r.texImage2D(s.target,0,i.internalFormat,n,o,0,s.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const zx={scaleMode:ls.NEAREST,format:$.RGBA,alphaMode:Ue.NPM},Ei=class extends jr{constructor(e=null,t=null){super(),t=Object.assign({},Ei.defaultOptions,t);const{alphaMode:s,mipmap:i,anisotropicLevel:r,scaleMode:n,width:o,height:a,wrapMode:l,format:h,type:c,target:u,resolution:f,resourceOptions:d}=t;e&&!(e instanceof Hr)&&(e=jd(e,d),e.internal=!0),this.resolution=f||q.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=r,this._wrapMode=l,this._scaleMode=n,this.format=h,this.type=c,this.target=u,this.alphaMode=s,this.uid=ai(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let s;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,s=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,s=!0),s&&this.dirtyStyleId++,this}setSize(e,t,s){return s=s||this.resolution,this.setRealSize(e*s,t*s,s)}setRealSize(e,t,s){return this.resolution=s||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=yu(this.realWidth)&&yu(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _s[this.cacheId],delete Xe[this.cacheId],this.cacheId=null),this.dispose(),Ei.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,s=q.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let r=null;if(i)r=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${ai()}`}r=e._pixiId}let n=_s[r];if(i&&s&&!n)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return n||(n=new Ei(e,t),n.cacheId=r,Ei.addToCache(n,r)),n}static fromBuffer(e,t,s,i){e=e||new Float32Array(t*s*4);const r=new qr(e,{width:t,height:s}),n=e instanceof Float32Array?at.FLOAT:at.UNSIGNED_BYTE;return new Ei(r,Object.assign({},zx,{type:n},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),_s[t]&&_s[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),_s[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=_s[e];if(t){const s=t.textureCacheIds.indexOf(e);return s>-1&&t.textureCacheIds.splice(s,1),delete _s[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete _s[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let ft=Ei;ft.defaultOptions={mipmap:ts.POW2,anisotropicLevel:0,scaleMode:ls.LINEAR,wrapMode:Ms.CLAMP,alphaMode:Ue.UNPACK,target:Di.TEXTURE_2D,format:$.RGBA,type:at.UNSIGNED_BYTE};ft._globalBatch=0;class wl{constructor(){this.texArray=null,this.blend=0,this.type=qe.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Wx=0;class Lt{constructor(t,s=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=s,this.id=Wx++,this.disposeRunner=new Ne("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Ze.ELEMENT_ARRAY_BUFFER:Ze.ARRAY_BUFFER}get index(){return this.type===Ze.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Lt(t)}}class so{constructor(t,s=0,i=!1,r=at.FLOAT,n,o,a,l=1){this.buffer=t,this.size=s,this.normalized=i,this.type=r,this.stride=n,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,s,i,r,n){return new so(t,s,i,r,n)}}const jx={Float32Array,Uint32Array,Int32Array,Uint8Array};function Yx(e,t){let s=0,i=0;const r={};for(let l=0;l<e.length;l++)i+=t[l],s+=e[l].length;const n=new ArrayBuffer(s*4);let o=null,a=0;for(let l=0;l<e.length;l++){const h=t[l],c=e[l],u=zd(c);r[u]||(r[u]=new jx[u](n)),o=r[u];for(let f=0;f<c.length;f++){const d=(f/h|0)*i+a,p=f%h;o[d+p]=c[f]}a+=h}return new Float32Array(n)}const Tu={5126:4,5123:2,5121:1};let qx=0;const Kx={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Fs{constructor(t=[],s={}){this.buffers=t,this.indexBuffer=null,this.attributes=s,this.glVertexArrayObjects={},this.id=qx++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ne("disposeGeometry"),this.refCount=0}addAttribute(t,s,i=0,r=!1,n,o,a,l=!1){if(!s)throw new Error("You must pass a buffer when creating an attribute");s instanceof Lt||(s instanceof Array&&(s=new Float32Array(s)),s=new Lt(s));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],s,i,r,n);return this}let c=this.buffers.indexOf(s);return c===-1&&(this.buffers.push(s),c=this.buffers.length-1),this.attributes[t]=new so(c,i,r,n,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Lt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Lt(t)),t.type=Ze.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],s=[],i=new Lt;let r;for(r in this.attributes){const n=this.attributes[r],o=this.buffers[n.buffer];t.push(o.data),s.push(n.size*Tu[n.type]/4),n.buffer=0}for(i.data=Yx(t,s),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const s=this.attributes[t];return this.buffers[s.buffer].data.length/(s.stride/4||s.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Fs;for(let s=0;s<this.buffers.length;s++)t.buffers[s]=new Lt(this.buffers[s].data.slice(0));for(const s in this.attributes){const i=this.attributes[s];t.attributes[s]=new so(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Ze.ELEMENT_ARRAY_BUFFER),t}static merge(t){const s=new Fs,i=[],r=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,n[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new Kx[zd(o.buffers[a].data)](r[a]),s.buffers[a]=new Lt(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,n[l]),n[l]+=o.buffers[l].data.length}if(s.attributes=o.attributes,o.indexBuffer){s.indexBuffer=s.buffers[o.buffers.indexOf(o.indexBuffer)],s.indexBuffer.type=Ze.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const f=o.attributes[u];(f.buffer|0)===c&&(l+=f.size*Tu[f.type]/4)}for(let u=0;u<t.length;u++){const f=t[u].indexBuffer.data;for(let d=0;d<f.length;d++)s.indexBuffer.data[d+h]+=a;a+=t[u].buffers[c].data.length/l,h+=f.length}}return s}}class Yd extends Fs{constructor(t=!1){super(),this._buffer=new Lt(null,t,!1),this._indexBuffer=new Lt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,at.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,at.FLOAT).addAttribute("aColor",this._buffer,4,!0,at.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,at.FLOAT).addIndex(this._indexBuffer)}}const io=Math.PI*2,Zx=180/Math.PI,Jx=Math.PI/180;var Zt=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Zt||{});class wt{constructor(t=0,s=0){this.x=0,this.y=0,this.x=t,this.y=s}clone(){return new wt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,s=t){return this.x=t,this.y=s,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const dn=[new wt,new wt,new wt,new wt];class pt{constructor(t=0,s=0,i=0,r=0){this.x=Number(t),this.y=Number(s),this.width=Number(i),this.height=Number(r),this.type=Zt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new pt(0,0,0,0)}clone(){return new pt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,s){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height}intersects(t,s){if(!s){const T=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=T)return!1;const X=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>X}const i=this.left,r=this.right,n=this.top,o=this.bottom;if(r<=i||o<=n)return!1;const a=dn[0].set(t.left,t.top),l=dn[1].set(t.left,t.bottom),h=dn[2].set(t.right,t.top),c=dn[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(s.a*s.d-s.b*s.c);if(u===0||(s.apply(a,a),s.apply(l,l),s.apply(h,h),s.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=i||Math.min(a.x,l.x,h.x,c.x)>=r||Math.max(a.y,l.y,h.y,c.y)<=n||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const f=u*(l.y-a.y),d=u*(a.x-l.x),p=f*i+d*n,m=f*r+d*n,g=f*i+d*o,v=f*r+d*o;if(Math.max(p,m,g,v)<=f*a.x+d*a.y||Math.min(p,m,g,v)>=f*c.x+d*c.y)return!1;const b=u*(a.y-h.y),_=u*(h.x-a.x),E=b*i+_*n,C=b*r+_*n,F=b*i+_*o,M=b*r+_*o;return!(Math.max(E,C,F,M)<=b*a.x+_*a.y||Math.min(E,C,F,M)>=b*c.x+_*c.y)}pad(t=0,s=t){return this.x-=t,this.y-=s,this.width+=t*2,this.height+=s*2,this}fit(t){const s=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=s,this.width=Math.max(i-s,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,s=.001){const i=Math.ceil((this.x+this.width-s)*t)/t,r=Math.ceil((this.y+this.height-s)*t)/t;return this.x=Math.floor((this.x+s)*t)/t,this.y=Math.floor((this.y+s)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const s=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=s,this.width=i-s,this.y=r,this.height=n-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Eh{constructor(t=0,s=0,i=0){this.x=t,this.y=s,this.radius=i,this.type=Zt.CIRC}clone(){return new Eh(this.x,this.y,this.radius)}contains(t,s){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,n=this.y-s;return r*=r,n*=n,r+n<=i}getBounds(){return new pt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class wh{constructor(t=0,s=0,i=0,r=0){this.x=t,this.y=s,this.width=i,this.height=r,this.type=Zt.ELIP}clone(){return new wh(this.x,this.y,this.width,this.height)}contains(t,s){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,r=(s-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new pt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Li{constructor(...t){let s=Array.isArray(t[0])?t[0]:t;if(typeof s[0]!="number"){const i=[];for(let r=0,n=s.length;r<n;r++)i.push(s[r].x,s[r].y);s=i}this.points=s,this.type=Zt.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),s=new Li(t);return s.closeStroke=this.closeStroke,s}contains(t,s){let i=!1;const r=this.points.length/2;for(let n=0,o=r-1;n<r;o=n++){const a=this.points[n*2],l=this.points[n*2+1],h=this.points[o*2],c=this.points[o*2+1];l>s!=c>s&&t<(h-a)*((s-l)/(c-l))+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,s)=>`${t}, ${s}`,"")}]`}}class Th{constructor(t=0,s=0,i=0,r=0,n=20){this.x=t,this.y=s,this.width=i,this.height=r,this.radius=n,this.type=Zt.RREC}clone(){return new Th(this.x,this.y,this.width,this.height,this.radius)}contains(t,s){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&s>=this.y&&s<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(s>=this.y+i&&s<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),n=s-(this.y+i);const o=i*i;if(r*r+n*n<=o||(r=t-(this.x+this.width-i),r*r+n*n<=o)||(n=s-(this.y+this.height-i),r*r+n*n<=o)||(r=t-(this.x+i),r*r+n*n<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Dt{constructor(t=1,s=0,i=0,r=1,n=0,o=0){this.array=null,this.a=t,this.b=s,this.c=i,this.d=r,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,s,i,r,n,o){return this.a=t,this.b=s,this.c=i,this.d=r,this.tx=n,this.ty=o,this}toArray(t,s){this.array||(this.array=new Float32Array(9));const i=s||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,s){s=s||new wt;const i=t.x,r=t.y;return s.x=this.a*i+this.c*r+this.tx,s.y=this.b*i+this.d*r+this.ty,s}applyInverse(t,s){s=s||new wt;const i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return s.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,s.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,s}translate(t,s){return this.tx+=t,this.ty+=s,this}scale(t,s){return this.a*=t,this.d*=s,this.c*=t,this.b*=s,this.tx*=t,this.ty*=s,this}rotate(t){const s=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*s-this.b*i,this.b=r*i+this.b*s,this.c=n*s-this.d*i,this.d=n*i+this.d*s,this.tx=o*s-this.ty*i,this.ty=o*i+this.ty*s,this}append(t){const s=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*s+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*s+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*s+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,s,i,r,n,o,a,l,h){return this.a=Math.cos(a+h)*n,this.b=Math.sin(a+h)*n,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+r*this.c),this.ty=s-(i*this.b+r*this.d),this}prepend(t){const s=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty,this}decompose(t){const s=this.a,i=this.b,r=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-r,n),l=Math.atan2(i,s),h=Math.abs(a+l);return h<1e-5||Math.abs(io-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(s*s+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*s+o.y*r),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,s=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-s*i;return this.a=r/o,this.b=-s/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-s*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Dt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Dt}static get TEMP_MATRIX(){return new Dt}}const Xs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],zs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ws=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],js=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Tl=[],qd=[],pn=Math.sign;function Qx(){for(let e=0;e<16;e++){const t=[];Tl.push(t);for(let s=0;s<16;s++){const i=pn(Xs[e]*Xs[s]+Ws[e]*zs[s]),r=pn(zs[e]*Xs[s]+js[e]*zs[s]),n=pn(Xs[e]*Ws[s]+Ws[e]*js[s]),o=pn(zs[e]*Ws[s]+js[e]*js[s]);for(let a=0;a<16;a++)if(Xs[a]===i&&zs[a]===r&&Ws[a]===n&&js[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new Dt;t.set(Xs[e],zs[e],Ws[e],js[e],0,0),qd.push(t)}}Qx();const Ot={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Xs[e],uY:e=>zs[e],vX:e=>Ws[e],vY:e=>js[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Tl[e][t],sub:(e,t)=>Tl[e][Ot.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?Ot.S:Ot.N:Math.abs(t)*2<=Math.abs(e)?e>0?Ot.E:Ot.W:t>0?e>0?Ot.SE:Ot.SW:e>0?Ot.NE:Ot.NW,matrixAppendRotationInv:(e,t,s=0,i=0)=>{const r=qd[Ot.inv(t)];r.tx=s,r.ty=i,e.append(r)}};class As{constructor(t,s,i=0,r=0){this._x=i,this._y=r,this.cb=t,this.scope=s}clone(t=this.cb,s=this.scope){return new As(t,s,this._x,this._y)}set(t=0,s=t){return(this._x!==t||this._y!==s)&&(this._x=t,this._y=s,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Kd=class{constructor(){this.worldTransform=new Dt,this.localTransform=new Dt,this.position=new As(this.onChange,this,0,0),this.scale=new As(this.onChange,this,1,1),this.pivot=new As(this.onChange,this,0,0),this.skew=new As(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const s=e.worldTransform,i=this.worldTransform;i.a=t.a*s.a+t.b*s.c,i.b=t.a*s.b+t.b*s.d,i.c=t.c*s.a+t.d*s.c,i.d=t.c*s.b+t.d*s.d,i.tx=t.tx*s.a+t.ty*s.c+s.tx,i.ty=t.tx*s.b+t.ty*s.d+s.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Sh=Kd;Sh.IDENTITY=new Kd;var tb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,eb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Su(e,t,s){const i=e.createShader(t);return e.shaderSource(i,s),e.compileShader(i),i}function ba(e){const t=new Array(e);for(let s=0;s<t.length;s++)t[s]=!1;return t}function Zd(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ba(2*t);case"bvec3":return ba(3*t);case"bvec4":return ba(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ki=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],sb={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},ib={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function rb(e,t){var i;const s=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in e.uniforms){const n=t[r];if(!n){(i=e.uniforms[r])!=null&&i.group&&(e.uniforms[r].ubo?s.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):s.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=e.uniforms[r];let a=!1;for(let l=0;l<ki.length;l++)if(ki[l].test(n,o)){s.push(ki[l].code(r,o)),a=!0;break}if(!a){const h=(n.size===1&&!n.isArray?sb:ib)[n.type].replace("location",`ud["${r}"].location`);s.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",s.join(`
`))}const Jd={};let yi=Jd;function nb(){if(yi===Jd||yi!=null&&yi.isContextLost()){const e=q.ADAPTER.createCanvas();let t;q.PREFER_ENV>=ci.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),yi=t}return yi}let mn;function ob(){if(!mn){mn=ge.MEDIUM;const e=nb();e&&e.getShaderPrecisionFormat&&(mn=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?ge.HIGH:ge.MEDIUM)}return mn}function Au(e,t){const s=e.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),i=e.getShaderInfoLog(t),r=i.split(`
`),n={},o=r.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!n[h]?(n[h]=!0,!0):!1),a=[""];o.forEach(h=>{s[h-1]=`%c${s[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=s.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function ab(e,t,s,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(s,e.COMPILE_STATUS)||Au(e,s),e.getShaderParameter(i,e.COMPILE_STATUS)||Au(e,i),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const lb={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Qd(e){return lb[e]}let gn=null;const Cu={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function tp(e,t){if(!gn){const s=Object.keys(Cu);gn={};for(let i=0;i<s.length;++i){const r=s[i];gn[e[r]]=Cu[r]}}return gn[t]}function Iu(e,t,s){if(e.substring(0,9)!=="precision"){let i=t;return t===ge.HIGH&&s!==ge.HIGH&&(i=ge.MEDIUM),`precision ${i} float;
${e}`}else if(s!==ge.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let or;function hb(){if(typeof or=="boolean")return or;try{or=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{or=!1}return or}let cb=0;const _n={},wi=class{constructor(e,t,s="pixi-shader",i={}){this.extra={},this.id=cb++,this.vertexSrc=e||wi.defaultVertexSrc,this.fragmentSrc=t||wi.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(s=s.replace(/\s+/g,"-"),_n[s]?(_n[s]++,s+=`-${_n[s]}`):_n[s]=1,this.vertexSrc=`#define SHADER_NAME ${s}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${s}
${this.fragmentSrc}`,this.vertexSrc=Iu(this.vertexSrc,wi.defaultVertexPrecision,ge.HIGH),this.fragmentSrc=Iu(this.fragmentSrc,wi.defaultFragmentPrecision,ob())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return eb}static get defaultFragmentSrc(){return tb}static from(e,t,s){const i=e+t;let r=xu[i];return r||(xu[i]=r=new wi(e,t,s)),r}};let De=wi;De.defaultVertexPrecision=ge.HIGH;De.defaultFragmentPrecision=hs.apple.device?ge.HIGH:ge.MEDIUM;let ub=0;class Le{constructor(t,s,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ub++,this.static=!!s,this.ubo=!!i,t instanceof Lt?(this.buffer=t,this.buffer.type=Ze.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Lt(new Float32Array(1)),this.buffer.type=Ze.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,s,i){if(!this.ubo)this.uniforms[t]=new Le(s,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,s,i){return new Le(t,s,i)}static uboFrom(t,s){return new Le(t,s??!0,!0)}}class Je{constructor(t,s){this.uniformBindCount=0,this.program=t,s?s instanceof Le?this.uniformGroup=s:this.uniformGroup=new Le(s):this.uniformGroup=new Le({}),this.disposeRunner=new Ne("disposeShader")}checkUniformExists(t,s){if(s.uniforms[t])return!0;for(const i in s.uniforms){const r=s.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,s,i){const r=De.from(t,s);return new Je(r,i)}}class fb{constructor(t,s){if(this.vertexSrc=t,this.fragTemplate=s,this.programCache={},this.defaultGroupCache={},!s.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!s.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=Le.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new De(this.vertexSrc,r)}const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Dt,default:this.defaultGroupCache[t]};return new Je(this.programCache[t],s)}generateSampleSrc(t){let s="";s+=`
`,s+=`
`;for(let i=0;i<t;i++)i>0&&(s+=`
else `),i<t-1&&(s+=`if(vTextureId < ${i}.5)`),s+=`
{`,s+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,s+=`
}`;return s+=`
`,s+=`
`,s}}class Sl{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function db(){return!hs.apple.device}function pb(e){let t=!0;const s=q.ADAPTER.getNavigator();if(hs.tablet||hs.phone){if(hs.apple.device){const i=s.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(hs.android.device){const i=s.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?e:4}class Mo{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var mb=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,gb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const we=class extends Mo{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Yd,this.vertexSize=6,this.state=ps.for2d(),this.size=we.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??pb(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??db(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return yt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return gb}static get defaultFragmentTemplate(){return mb}setShaderGenerator({vertex:e=we.defaultVertexSrc,fragment:t=we.defaultFragmentTemplate}={}){this.shaderGenerator=new fb(e,t)}contextChange(){const e=this.renderer.gl;q.PREFER_ENV===ci.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),we.defaultMaxTextures),this.maxTextures=Xx(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=we,s=this.size/4,i=Math.floor(s/this.maxTextures)+1;for(;e.length<s;)e.push(new wl);for(;t.length<i;)t.push(new Sl);for(let r=0;r<this.maxTextures;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,s=we._textureArrayPool,i=this.renderer.batch,r=this._tempBoundTextures,n=this.renderer.textureGC.count;let o=++ft._globalBatch,a=0,l=s[0],h=0;i.copyBoundTextures(r,t);for(let c=0;c<this._bufferSize;++c){const u=e[c];e[c]=null,u._batchEnabled!==o&&(l.count>=t&&(i.boundArray(l,r,o,t),this.buildDrawCalls(l,h,c),h=c,l=s[++a],++o),u._batchEnabled=o,u.touched=n,l.elements[l.count++]=u)}l.count>0&&(i.boundArray(l,r,o,t),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let c=0;c<r.length;c++)r[c]=null;ft._globalBatch=o}buildDrawCalls(e,t,s){const{_bufferedElements:i,_attributeBuffer:r,_indexBuffer:n,vertexSize:o}=this,a=we._drawCallPool;let l=this._dcIndex,h=this._aIndex,c=this._iIndex,u=a[l];u.start=this._iIndex,u.texArray=e;for(let f=t;f<s;++f){const d=i[f],p=d._texture.baseTexture,m=Vd[p.alphaMode?1:0][d.blendMode];i[f]=null,t<f&&u.blend!==m&&(u.size=c-u.start,t=f,u=a[++l],u.texArray=e,u.start=c),this.packInterleavedGeometry(d,r,n,h,c),h+=d.vertexData.length/2*o,c+=d.indices.length,u.blend=m}t<s&&(u.size=c-u.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let s=0;s<e.count;s++)t.bind(e.elements[s],e.ids[s]),e.elements[s]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:s}=this;we.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:s}=this.renderer,i=we._drawCallPool;let r=null;for(let n=0;n<e;n++){const{texArray:o,type:a,size:l,start:h,blend:c}=i[n];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,s.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),we.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=eo(Math.ceil(e/8)),s=vu(t),i=t*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);let r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new bl(i*this.vertexSize*4)),r}getIndexBuffer(e){const t=eo(Math.ceil(e/12)),s=vu(t),i=t*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);let r=this._iBuffers[s];return r||(this._iBuffers[s]=r=new Uint16Array(i)),r}packInterleavedGeometry(e,t,s,i,r){const{uint32View:n,float32View:o}=t,a=i/this.vertexSize,l=e.uvs,h=e.indices,c=e.vertexData,u=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),d=It.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)o[i++]=c[p],o[i++]=c[p+1],o[i++]=l[p],o[i++]=l[p+1],n[i++]=d,o[i++]=u;for(let p=0;p<h.length;p++)s[r++]=a+h[p]}};let Ce=we;Ce.defaultBatchSize=4096;Ce.extension={name:"batch",type:K.RendererPlugin};Ce._drawCallPool=[];Ce._textureArrayPool=[];it.add(Ce);var _b=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,yb=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const dr=class extends Je{constructor(e,t,s){const i=De.from(e||dr.defaultVertexSrc,t||dr.defaultFragmentSrc);super(i,s),this.padding=0,this.resolution=dr.defaultResolution,this.multisample=dr.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ps}apply(e,t,s,i,r){e.applyFilter(this,t,s,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return yb}static get defaultFragmentSrc(){return _b}};let Jt=dr;Jt.defaultResolution=1;Jt.defaultMultisample=Gt.NONE;class Do{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new It(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:s,background:i,backgroundAlpha:r}=t,n=i??s;n!==void 0&&(this.color=n),this.alpha=r}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Do.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Do.extension={type:[K.RendererSystem,K.CanvasRendererSystem],name:"background"};it.add(Do);class ep{constructor(t){this.renderer=t,this.emptyRenderer=new Mo(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,s){const{boundTextures:i}=this.renderer.texture;for(let r=s-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)}boundArray(t,s,i,r){const{elements:n,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const c=n[h],u=c._batchLocation;if(u>=0&&u<r&&s[u]===c){o[h]=u;continue}for(;l<r;){const f=s[l];if(f&&f._batchEnabled===i&&f._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,s[l]=c;break}}}destroy(){this.renderer=null}}ep.extension={type:K.RendererSystem,name:"batch"};it.add(ep);let Pu=0;class Bo{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Pu++}init(t){if(t.context)this.initFromContext(t.context);else{const s=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:s,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Pu++,this.renderer.runners.contextChange.emit(t);const s=this.renderer.view;s.addEventListener!==void 0&&(s.addEventListener("webglcontextlost",this.handleContextLost,!1),s.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const s=this.createContext(this.renderer.view,t);this.initFromContext(s)}createContext(t,s){let i;if(q.PREFER_ENV>=ci.WEBGL2&&(i=t.getContext("webgl2",s)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",s)||t.getContext("experimental-webgl",s),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,s={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,s,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,s,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const s=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),s&&!s.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Bo.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};Bo.extension={type:K.RendererSystem,name:"context"};it.add(Bo);class vb extends qr{upload(t,s,i){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===Ue.UNPACK);const n=s.realWidth,o=s.realHeight;return i.width===n&&i.height===o?r.texSubImage2D(s.target,0,0,0,n,o,s.format,i.type,this.data):(i.width=n,i.height=o,r.texImage2D(s.target,0,i.internalFormat,n,o,0,s.format,i.type,this.data)),!0}}class Al{constructor(t,s){this.width=Math.round(t||100),this.height=Math.round(s||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ne("disposeFramebuffer"),this.multisample=Gt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,s){return this.colorTextures[t]=s||new ft(null,{scaleMode:ls.NEAREST,resolution:1,mipmap:ts.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new ft(new vb(null,{width:this.width,height:this.height}),{scaleMode:ls.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ts.OFF,format:$.DEPTH_COMPONENT,type:at.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,s){if(t=Math.round(t),s=Math.round(s),!(t===this.width&&s===this.height)){this.width=t,this.height=s,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,s/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,s/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class sp extends ft{constructor(t={}){if(typeof t=="number"){const s=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3];t={width:s,height:i,scaleMode:r,resolution:n}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Gt.NONE),super(null,t),this.mipmap=ts.OFF,this.valid=!0,this._clear=new It([0,0,0,0]),this.framebuffer=new Al(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,s){this.framebuffer.resize(t*this.resolution,s*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ns extends Hr{constructor(t){const s=t,i=s.naturalWidth||s.videoWidth||s.width,r=s.naturalHeight||s.videoHeight||s.height;super(i,r),this.source=t,this.noSubImage=!1}static crossOrigin(t,s,i){i===void 0&&!s.startsWith("data:")?t.crossOrigin=Hx(s):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,s,i,r){const n=t.gl,o=s.realWidth,a=s.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&r.buffered.length===0)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===Ue.UNPACK),!this.noSubImage&&s.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,s.format,i.type,r):(i.width=o,i.height=a,n.texImage2D(s.target,0,i.internalFormat,s.format,i.type,r)),!0}update(){if(this.destroyed)return;const t=this.source,s=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(s,i),super.update()}dispose(){this.source=null}}class ip extends Ns{constructor(t,s){if(s=s||{},typeof t=="string"){const i=new Image;Ns.crossOrigin(i,t,s.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(s.createBitmap??q.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof s.alphaMode=="number"?s.alphaMode:null,this.bitmap=null,this._load=null,s.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((s,i)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?s(this.process()):s(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const s=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(r=>r.blob()).then(r=>s(r,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ue.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,s,i){if(typeof this.alphaMode=="number"&&(s.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,s,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,s,i,this.bitmap),!this.preserveBitmap){let r=!0;const n=s._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==s.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class rp{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,s,i){const r=s.width,n=s.height;if(i){const o=t.width/2/r,a=t.height/2/n,l=t.x/r+o,h=t.y/n+a;i=Ot.add(i,Ot.NW),this.x0=l+o*Ot.uX(i),this.y0=h+a*Ot.uY(i),i=Ot.add(i,2),this.x1=l+o*Ot.uX(i),this.y1=h+a*Ot.uY(i),i=Ot.add(i,2),this.x2=l+o*Ot.uX(i),this.y2=h+a*Ot.uY(i),i=Ot.add(i,2),this.x3=l+o*Ot.uX(i),this.y3=h+a*Ot.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Ru=new rp;function yn(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class Q extends jr{constructor(t,s,i,r,n,o,a){if(super(),this.noFrame=!1,s||(this.noFrame=!0,s=new pt(0,0,1,1)),t instanceof Q&&(t=t.baseTexture),this.baseTexture=t,this._frame=s,this.trim=r,this.valid=!1,this._uvs=Ru,this.uvMatrix=null,this.orig=i||s,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new wt(o.x,o.y):new wt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=s:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:s}=this.baseTexture;s!=null&&s.url&&Xe[s.url]&&Q.removeFromCache(s.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Q.removeFromCache(this),this.textureCacheIds=null}clone(){var r;const t=this._frame.clone(),s=this._frame===this.orig?t:this.orig.clone(),i=new Q(this.baseTexture,!this.noFrame&&t,s,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===Ru&&(this._uvs=new rp),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,s={},i=q.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let n=null;if(r)n=t;else if(t instanceof ft){if(!t.cacheId){const a=(s==null?void 0:s.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${ai()}`,ft.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(s==null?void 0:s.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${ai()}`}n=t._pixiId}let o=Xe[n];if(r&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof ft)?(s.resolution||(s.resolution=Os(t)),o=new Q(new ft(t,s)),o.baseTexture.cacheId=n,ft.addToCache(o.baseTexture,n),Q.addToCache(o,n)):!o&&t instanceof ft&&(o=new Q(t),Q.addToCache(o,n)),o}static fromURL(t,s){const i=Object.assign({autoLoad:!1},s==null?void 0:s.resourceOptions),r=Q.from(t,Object.assign({resourceOptions:i},s),!1),n=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):n.load().then(()=>Promise.resolve(r))}static fromBuffer(t,s,i,r){return new Q(ft.fromBuffer(t,s,i,r))}static fromLoader(t,s,i,r){const n=new ft(t,Object.assign({scaleMode:ft.defaultOptions.scaleMode,resolution:Os(s)},r)),{resource:o}=n;o instanceof ip&&(o.url=s);const a=new Q(n);return i||(i=s),ft.addToCache(a.baseTexture,i),Q.addToCache(a,i),i!==s&&(ft.addToCache(a.baseTexture,s),Q.addToCache(a,s)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,s){s&&(t.textureCacheIds.includes(s)||t.textureCacheIds.push(s),Xe[s]&&Xe[s]!==t&&console.warn(`Texture added to the cache with an id [${s}] that already had an entry`),Xe[s]=t)}static removeFromCache(t){if(typeof t=="string"){const s=Xe[t];if(s){const i=s.textureCacheIds.indexOf(t);return i>-1&&s.textureCacheIds.splice(i,1),delete Xe[t],s}}else if(t!=null&&t.textureCacheIds){for(let s=0;s<t.textureCacheIds.length;++s)Xe[t.textureCacheIds[s]]===t&&delete Xe[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:s,y:i,width:r,height:n}=t,o=s+r>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${s} + ${r} = ${s+r} > ${this.baseTexture.width}`,c=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${c}`)}this.valid=r&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Q._EMPTY||(Q._EMPTY=new Q(new ft),yn(Q._EMPTY),yn(Q._EMPTY.baseTexture)),Q._EMPTY}static get WHITE(){if(!Q._WHITE){const t=q.ADAPTER.createCanvas(16,16),s=t.getContext("2d");t.width=16,t.height=16,s.fillStyle="white",s.fillRect(0,0,16,16),Q._WHITE=new Q(ft.from(t)),yn(Q._WHITE),yn(Q._WHITE.baseTexture)}return Q._WHITE}}class ui extends Q{constructor(t,s){super(t,s),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,s,i=!0){const r=this.baseTexture.resolution,n=Math.round(t*r)/r,o=Math.round(s*r)/r;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:s}=this;s.resolution!==t&&(s.setResolution(t),this.resize(s.width,s.height,!1))}static create(t){return new ui(new sp(t))}}class np{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,s,i=Gt.NONE){const r=new sp(Object.assign({width:t,height:s,resolution:1,multisample:i},this.textureOptions));return new ui(r)}getOptimalTexture(t,s,i=1,r=Gt.NONE){let n;t=Math.ceil(t*i-1e-6),s=Math.ceil(s*i-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||s!==this._pixelsHeight?(t=eo(t),s=eo(s),n=((t&65535)<<16|s&65535)>>>0,r>1&&(n+=r*4294967296)):n=r>1?-r:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,s,r)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(t,s,i){const r=this.getOptimalTexture(t.width,t.height,s||t.resolution,i||Gt.NONE);return r.filterFrame=t.filterFrame,r}returnTexture(t){const s=t.filterPoolKey;t.filterFrame=null,this.texturePool[s].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const s in this.texturePool){const i=this.texturePool[s];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const s in this.texturePool){if(!(Number(s)<0))continue;const i=this.texturePool[s];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[s]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}np.SCREEN_KEY=-1;class xb extends Fs{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class op extends Fs{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Lt(this.vertices),this.uvBuffer=new Lt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,s){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+s.width/t.width,this.uvs[3]=r,this.uvs[4]=i+s.width/t.width,this.uvs[5]=r+s.height/t.height,this.uvs[6]=i,this.uvs[7]=r+s.height/t.height,i=s.x,r=s.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+s.width,this.vertices[3]=r,this.vertices[4]=i+s.width,this.vertices[5]=r+s.height,this.vertices[6]=i,this.vertices[7]=r+s.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class bb{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Gt.NONE,this.sourceFrame=new pt,this.destinationFrame=new pt,this.bindingSourceFrame=new pt,this.bindingDestinationFrame=new pt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const vn=[new wt,new wt,new wt,new wt],Ea=new Dt;class ap{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new np,this.statePool=[],this.quad=new xb,this.quadUv=new op,this.tempRect=new pt,this.activeState={},this.globalUniforms=new Le({outputFrame:new pt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,s){const i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new bb,o=this.renderer.renderTexture;let a=s[0].resolution,l=s[0].multisample,h=s[0].padding,c=s[0].autoFit,u=s[0].legacy??!0;for(let p=1;p<s.length;p++){const m=s[p];a=Math.min(a,m.resolution),l=Math.min(l,m.multisample),h=this.useMaxPadding?Math.max(h,m.padding):h+m.padding,c=c&&m.autoFit,u=u||(m.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(n),n.resolution=a,n.multisample=l,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(h);const f=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(Ea.copyFrom(i.projection.transform).invert(),f),c?(n.sourceFrame.fit(f),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(f)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a,l),n.filters=s,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,d),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,s=t.pop(),i=s.filters;this.activeState=s;const r=this.globalUniforms.uniforms;r.outputFrame=s.sourceFrame,r.resolution=s.resolution;const n=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(n[0]=s.destinationFrame.width,n[1]=s.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*s.resolution),o[1]=Math.round(n[1]*s.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=s.sourceFrame.width*n[2]-.5*o[2],a[3]=s.sourceFrame.height*n[3]-.5*o[3],s.legacy){const h=r.filterArea;h[0]=s.destinationFrame.width,h[1]=s.destinationFrame.height,h[2]=s.sourceFrame.x,h[3]=s.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,s.renderTexture,l.renderTexture,We.BLEND,s),this.returnFilterTexture(s.renderTexture);else{let h=s.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,s.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<i.length-1;++u){u===1&&s.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,s.resolution),c.filterFrame=h.filterFrame),i[u].apply(this,h,c,We.CLEAR,s);const f=h;h=c,c=f}i[u].apply(this,h,l.renderTexture,We.BLEND,s),u>1&&s.multisample>1&&this.returnFilterTexture(s.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}s.clear(),this.statePool.push(s)}bindAndClear(t,s=We.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=r.stateId&1||this.forceClear;(s===We.CLEAR||s===We.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,s,i,r){const n=this.renderer;n.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=s,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(s._frame,s.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(qe.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(qe.TRIANGLE_STRIP))}calculateSpriteMatrix(t,s){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:n}=s._texture,o=t.set(r.width,0,0,r.height,i.x,i.y),a=s.worldTransform.copyTo(Dt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(s.anchor.x,s.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,s,i=1,r=Gt.NONE){return this.texturePool.getOptimalTexture(t,s,i,r)}getFilterTexture(t,s,i){if(typeof t=="number"){const n=t;t=s,s=n}t=t||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(t.width,t.height,s||t.resolution,i||Gt.NONE);return r.filterFrame=t.filterFrame,r}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,s){const i=vn[0],r=vn[1],n=vn[2],o=vn[3];i.set(s.left,s.top),r.set(s.left,s.bottom),n.set(s.right,s.top),o.set(s.right,s.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(o,o);const a=Math.min(i.x,r.x,n.x,o.x),l=Math.min(i.y,r.y,n.y,o.y),h=Math.max(i.x,r.x,n.x,o.x),c=Math.max(i.y,r.y,n.y,o.y);s.x=a,s.y=l,s.width=h-a,s.height=c-l}roundFrame(t,s,i,r,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:l,d:h}=n;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}n=n?Ea.copyFrom(n):Ea.identity(),n.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(s),this.transformAABB(n.invert(),t)}}}ap.extension={type:K.RendererSystem,name:"filter"};it.add(ap);class Eb{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Gt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const wb=new pt;class lp{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Al(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let s=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;q.PREFER_ENV===ci.WEBGL_LEGACY&&(s=null,i=null),s?t.drawBuffers=r=>s.drawBuffersWEBGL(r):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,s,i=0){const{gl:r}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),s){const o=s.width>>i,a=s.height>>i,l=o/s.width;this.setViewport(s.x*l,s.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),s?this.setViewport(s.x,s.y,s.width,s.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,s,i,r){const n=this.viewport;t=Math.round(t),s=Math.round(s),i=Math.round(i),r=Math.round(r),(n.width!==i||n.height!==r||n.x!==t||n.y!==s)&&(n.x=t,n.y=s,n.width=i,n.height=r,this.gl.viewport(t,s,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,s,i,r,n=il.COLOR|il.DEPTH){const{gl:o}=this;o.clearColor(t,s,i,r),o.clear(n)}initFramebuffer(t){const{gl:s}=this,i=new Eb(s.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:s}=this,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(s.bindRenderbuffer(s.RENDERBUFFER,i.stencil),i.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,i.multisample,s.DEPTH24_STENCIL8,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t.width,t.height));const r=t.colorTextures;let n=r.length;s.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(s.bindRenderbuffer(s.RENDERBUFFER,i.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,s){const{gl:i}=this,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=n[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,h.target,c._glTextures[this.CONTEXT_UID].texture,s),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,s)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil)):r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:s}=this;let i=Gt.NONE;if(t<=1||s===null)return i;for(let r=0;r<s.length;r++)if(s[r]<=t){i=s[r];break}return i===1&&(i=Gt.NONE),i}blit(t,s,i){const{current:r,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=r.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new Al(r.width,r.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==r.width||t.height!==r.height)&&(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}s||(s=wb,s.width=r.width,s.height=r.height),i||(i=s);const h=s.width===i.width&&s.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(s.left,s.top,s.right,s.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,s){const i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),s||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,s)}disposeAll(t){const s=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<s.length;i++)this.disposeFramebuffer(s[i],t)}forceStencil(){const t=this.current;if(!t)return;const s=t.glFramebuffers[this.CONTEXT_UID];if(!s||s.stencil)return;t.stencil=!0;const i=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,n.DEPTH24_STENCIL8,i,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),s.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new pt}destroy(){this.renderer=null}}lp.extension={type:K.RendererSystem,name:"framebuffer"};it.add(lp);const wa={5126:4,5123:2,5121:1};class hp{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,s=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,s.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;q.PREFER_ENV===ci.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=r=>i.bindVertexArrayOES(r),t.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(s.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(r,n)=>i.vertexAttribDivisorANGLE(r,n),t.drawElementsInstanced=(r,n,o,a,l)=>i.drawElementsInstancedANGLE(r,n,o,a,l),t.drawArraysInstanced=(r,n,o,a)=>i.drawArraysInstancedANGLE(r,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=s.webGLVersion===2||!!s.extensions.uint32ElementIndex}bind(t,s){s=s||this.renderer.shader.shader;const{gl:i}=this;let r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);const o=r[s.program.id]||this.initGeometryVao(t,s,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,s.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,s=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const r=t.buffers[i];s.update(r)}}checkCompatibility(t,s){const i=t.attributes,r=s.attributeData;for(const n in r)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,s){const i=t.attributes,r=s.attributeData,n=["g",t.id];for(const o in i)r[o]&&n.push(o,r[o].location);return n.join("-")}initGeometryVao(t,s,i=!0){const r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=s.program;a.glPrograms[n]||this.renderer.shader.generateProgram(s),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[l];if(c)return h[a.id]=c,c;const u=t.buffers,f=t.attributes,d={},p={};for(const m in u)d[m]=0,p[m]=0;for(const m in f)!f[m].size&&a.attributeData[m]?f[m].size=a.attributeData[m].size:f[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),d[f[m].buffer]+=f[m].size*wa[f[m].type];for(const m in f){const g=f[m],v=g.size;g.stride===void 0&&(d[g.buffer]===v*wa[g.type]?g.stride=0:g.stride=d[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=v*wa[g.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(let m=0;m<u.length;m++){const g=u[m];o.bind(g),i&&g._glBuffers[n].refCount++}return this.activateVao(t,a),h[a.id]=c,h[l]=c,r.bindVertexArray(null),o.unbind(Ze.ARRAY_BUFFER),c}disposeGeometry(t,s){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<n.length;l++){const h=n[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!s&&o.dispose(n[l],s))}if(!s){for(const l in i)if(l[0]==="g"){const h=i[l];this._activeVao===h&&this.unbind(),r.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const s=Object.keys(this.managedGeometries);for(let i=0;i<s.length;i++)this.disposeGeometry(this.managedGeometries[s[i]],t)}activateVao(t,s){const i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let l=null;for(const h in a){const c=a[h],u=o[c.buffer],f=u._glBuffers[r];if(s.attributeData[h]){l!==f&&(n.bind(u),l=f);const d=s.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(d,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,s,i,r){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,s||o.indexBuffer.data.length,l,(i||0)*a,r||1):n.drawElements(t,s||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,s||o.getSize(),r||1):n.drawArrays(t,i,s||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}hp.extension={type:K.RendererSystem,name:"geometry"};it.add(hp);const Mu=new Dt;class cp{constructor(t,s){this._texture=t,this.mapCoord=new Dt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof s>"u"?.5:s,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,s){s===void 0&&(s=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],o=t[r+1];s[r]=n*i.a+o*i.c+i.tx,s[r+1]=n*i.b+o*i.d+i.ty}return s}update(t){const s=this._texture;if(!s||!s.valid||!t&&this._textureID===s._updateID)return!1;this._textureID=s._updateID,this._updateID++;const i=s._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=s.orig,n=s.trim;n&&(Mu.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Mu));const o=s.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(s._frame.x+l+h)/o.width,a[1]=(s._frame.y+l+h)/o.height,a[2]=(s._frame.x+s._frame.width-l+h)/o.width,a[3]=(s._frame.y+s._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=s._frame.width===o.width&&s._frame.height===o.height&&s.rotate===0,!0}}var Tb=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Sb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class Ab extends Jt{constructor(t,s,i){let r=null;typeof t!="string"&&s===void 0&&i===void 0&&(r=t,t=void 0,s=void 0,i=void 0),super(t||Sb,s||Tb,i),this.maskSprite=r,this.maskMatrix=new Dt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,s,i,r){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new cp(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,s,i,r))}}class Cb{constructor(t=null){this.type=Ht.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Jt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ht.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class up{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,s){let i=s;if(!i.isMaskData){const n=this.maskDataPool.pop()||new Cb;n.pooled=!0,n.maskObject=s,i=n}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==Ht.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Ht.SCISSOR:this.renderer.scissor.push(i);break;case Ht.STENCIL:this.renderer.stencil.push(i);break;case Ht.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Ht.COLOR:this.pushColorMask(i);break}i.type===Ht.SPRITE&&this.maskStack.push(i)}pop(t){const s=this.maskStack.pop();if(!(!s||s._target!==t)){if(s.enabled)switch(s.type){case Ht.SCISSOR:this.renderer.scissor.pop(s);break;case Ht.STENCIL:this.renderer.stencil.pop(s.maskObject);break;case Ht.SPRITE:this.popSpriteMask(s);break;case Ht.COLOR:this.popColorMask(s);break}if(s.reset(),s.pooled&&this.maskDataPool.push(s),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Ht.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const s=t.maskObject;s?s.isSprite?t.type=Ht.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Ht.SCISSOR:t.type=Ht.STENCIL:t.type=Ht.COLOR}pushSpriteMask(t){const{maskObject:s}=t,i=t._target;let r=t._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Ab]));const n=this.renderer,o=n.renderTexture;let a,l;if(o.current){const c=o.current;a=t.resolution||c.resolution,l=t.multisample??c.multisample}else a=t.resolution||n.resolution,l=t.multisample??n.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=s;const h=i.filterArea;i.filterArea=s.getBounds(!0),n.filter.push(i,r),i.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const s=t._colorMask,i=t._colorMask=s&t.colorMask;i!==s&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const s=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==s&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}up.extension={type:K.RendererSystem,name:"mask"};it.add(up);class fp{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:s}=this.renderer,i=this.getStackLength();this.maskStack=t;const r=this.getStackLength();r!==i&&(r===0?s.disable(this.glConst):(s.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Du=new Dt,Bu=[],Fn=class extends fp{constructor(e){super(e),this.glConst=q.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:s}=e,{renderer:i}=this,r=i.renderTexture,n=s.getBounds(!0,Bu.pop()??new pt);this.roundFrameToPixels(n,r.current?r.current.resolution:i.resolution,r.sourceFrame,r.destinationFrame,i.projection.transform),t&&n.fit(t),e._scissorRectLocal=n}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:s,c:i,d:r}=e;return(Math.abs(s)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(r)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Fn.isMatrixRotated(t.worldTransform)||Fn.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const s=e._scissorRectLocal;return s.width>0&&s.height>0}roundFrameToPixels(e,t,s,i,r){Fn.isMatrixRotated(r)||(r=r?Du.copyFrom(r):Du.identity(),r.translate(-s.x,-s.y).scale(i.width/s.width,i.height/s.height).translate(i.x,i.y),this.renderer.filter.transformAABB(r,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Bu.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let dp=Fn;dp.extension={type:K.RendererSystem,name:"scissor"};it.add(dp);class pp extends fp{constructor(t){super(t),this.glConst=q.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const s=t.maskObject,{gl:i}=this.renderer,r=t._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),s.renderable=!0,s.render(this.renderer),this.renderer.batch.flush(),s.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const s=this.renderer.gl;if(this.getStackLength()===0)s.disable(s.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;r!==0&&(i._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilOp(s.KEEP,s.KEEP,s.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,r!==0&&(i._colorMask=r,s.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}pp.extension={type:K.RendererSystem,name:"stencil"};it.add(pp);class mp{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const s in t)this.plugins[s]=new t[s](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}mp.extension={type:[K.RendererSystem,K.CanvasRendererSystem],name:"_plugin"};it.add(mp);class gp{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Dt,this.transform=null}update(t,s,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=s||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,s,i,r){const n=this.projectionMatrix,o=r?-1:1;n.identity(),n.a=1/s.width*2,n.d=o*(1/s.height*2),n.tx=-1-s.x*n.a,n.ty=-o-s.y*n.d}setTransform(t){}destroy(){this.renderer=null}}gp.extension={type:K.RendererSystem,name:"projection"};it.add(gp);const Ib=new Sh;class _p{constructor(t){this.renderer=t,this._tempMatrix=new Dt}generateTexture(t,s){const{region:i,...r}=s||{},n=i||t.getLocalBounds(null,!0);n.width===0&&(n.width=1),n.height===0&&(n.height=1);const o=ui.create({width:n.width,height:n.height,...r});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const a=t.transform;return t.transform=Ib,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}_p.extension={type:[K.RendererSystem,K.CanvasRendererSystem],name:"textureGenerator"};it.add(_p);const $s=new pt,ar=new pt;class yp{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new pt,this.destinationFrame=new pt,this.viewportFrame=new pt}contextChange(){var s;const t=(s=this.renderer)==null?void 0:s.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,s,i){const r=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,s||($s.width=t.frame.width,$s.height=t.frame.height,s=$s),i||(ar.x=t.frame.x,ar.y=t.frame.y,ar.width=s.width,ar.height=s.height,i=ar),o=n.framebuffer):(a=r.resolution,s||($s.width=r._view.screen.width,$s.height=r._view.screen.height,s=$s),i||(i=$s,i.width=s.width,i.height=s.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,s,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(s),this.destinationFrame.copyFrom(i)}clear(t,s){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=It.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:l,y:h,width:c,height:u}=this.viewportFrame;l=Math.round(l),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,c,u)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,s),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}yp.extension={type:K.RendererSystem,name:"renderTexture"};it.add(yp);class Pb{constructor(t,s){this.program=t,this.uniformData=s,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Rb(e,t){const s={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const n=t.getActiveAttrib(e,r);if(n.name.startsWith("gl_"))continue;const o=tp(t,n.type),a={type:o,name:n.name,size:Qd(o),location:t.getAttribLocation(e,n.name)};s[n.name]=a}return s}function Mb(e,t){const s={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const n=t.getActiveUniform(e,r),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=tp(t,n.type);s[o]={name:o,index:r,type:l,size:n.size,isArray:a,value:Zd(l,n.size)}}return s}function Db(e,t){var l;const s=Su(e,e.VERTEX_SHADER,t.vertexSrc),i=Su(e,e.FRAGMENT_SHADER,t.fragmentSrc),r=e.createProgram();e.attachShader(r,s),e.attachShader(r,i);const n=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(n&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(r,n.names,n.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||ab(e,r,s,i),t.attributeData=Rb(r,e),t.uniformData=Mb(r,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((c,u)=>c>u?1:-1);for(let c=0;c<h.length;c++)t.attributeData[h[c]].location=c,e.bindAttribLocation(r,c,h[c]);e.linkProgram(r)}e.deleteShader(s),e.deleteShader(i);const o={};for(const h in t.uniformData){const c=t.uniformData[h];o[h]={location:e.getUniformLocation(r,h),value:Zd(c.type,c.size)}}return new Pb(r,o)}function Bb(e,t,s,i,r){s.buffer.update(r)}const Ob={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},vp={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Fb(e){const t=e.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let s=0,i=0,r=0;for(let n=0;n<t.length;n++){const o=t[n];if(s=vp[o.data.type],o.data.size>1&&(s=Math.max(s,16)*o.data.size),o.dataLen=s,i%s!==0&&i<16){const a=i%s%16;i+=a,r+=a}i+s>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=s,i=s):(o.offset=r,i+=s,r+=s)}return r=Math.ceil(r/16)*16,{uboElements:t,size:r}}function Nb(e,t){const s=[];for(const i in e)t[i]&&s.push(t[i]);return s.sort((i,r)=>i.index-r.index),s}function Lb(e,t){if(!e.autoManage)return{size:0,syncFunc:Bb};const s=Nb(e.uniforms,t),{uboElements:i,size:r}=Fb(s),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=e.uniforms[a.data.name],h=a.data.name;let c=!1;for(let u=0;u<ki.length;u++){const f=ki[u];if(f.codeUbo&&f.test(a.data,l)){n.push(`offset = ${a.offset/4};`,ki[u].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const u=Qd(a.data.type),f=Math.max(vp[a.data.type]/16,1),d=u/f,p=(4-d%4)%4;n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${d}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=Ob[a.data.type];n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${u};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let kb=0;const xn={textureCount:0,uboCount:0};class xp{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=kb++}systemCheck(){if(!hb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,s){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),s||(xn.textureCount=0,xn.uboCount=0,this.syncUniformGroup(t.uniformGroup,xn)),r}setUniforms(t){const s=this.shader.program,i=s.glPrograms[this.renderer.CONTEXT_UID];s.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,s){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,s))}syncUniforms(t,s,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(s.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const s=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[s]||(this.cache[s]=rb(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[s],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,s){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,s);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,xn,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[s])}createSyncBufferGroup(t,s,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(s.program,i);s.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(s.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=Lb(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return s.uniformGroups[t.id]=a.syncFunc,s.uniformGroups[t.id]}getSignature(t,s,i){const r=t.uniforms,n=[`${i}-`];for(const o in r)n.push(o),s[o]&&n.push(s[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const s=this.gl,i=t.program,r=Db(s,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}xp.extension={type:K.RendererSystem,name:"shader"};it.add(xp);class Oo{constructor(t){this.renderer=t}run(t){const{renderer:s}=this;s.runners.init.emit(s.options),t.hello&&console.log(`PixiJS 7.2.4 - ${s.rendererLogId} - https://pixijs.com`),s.resize(s.screen.width,s.screen.height)}destroy(){}}Oo.defaultOptions={hello:!1};Oo.extension={type:[K.RendererSystem,K.CanvasRendererSystem],name:"startup"};it.add(Oo);function Ub(e,t=[]){return t[lt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.ADD]=[e.ONE,e.ONE],t[lt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.NONE]=[0,0],t[lt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[lt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[lt.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[lt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[lt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[lt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[lt.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[lt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[lt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[lt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[lt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const Gb=0,Hb=1,$b=2,Vb=3,Xb=4,zb=5,Cl=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=lt.NONE,this._blendEq=!1,this.map=[],this.map[Gb]=this.setBlend,this.map[Hb]=this.setOffset,this.map[$b]=this.setCullFace,this.map[Vb]=this.setDepthTest,this.map[Xb]=this.setFrontFace,this.map[zb]=this.setDepthMask,this.checks=[],this.defaultState=new ps,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Ub(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,s=0;for(;t;)t&1&&this.map[s].call(this,!!(e.data&1<<s)),t=t>>1,s++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Cl.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Cl.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],s=this.gl;t.length===2?s.blendFunc(t[0],t[1]):s.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,s.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const s=this.checks.indexOf(e);t&&s===-1?this.checks.push(e):!t&&s!==-1&&this.checks.splice(s,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let bp=Cl;bp.extension={type:K.RendererSystem,name:"state"};it.add(bp);class Wb extends jr{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const s=(t.priority??[]).filter(r=>t.systems[r]),i=[...s,...Object.keys(t.systems).filter(r=>!s.includes(r))];for(const r of i)this.addSystem(t.systems[r],r)}addRunners(...t){t.forEach(s=>{this.runners[s]=new Ne(s)})}addSystem(t,s){const i=new t(this);if(this[s])throw new Error(`Whoops! The name "${s}" is already in use`);this[s]=i,this._systemsHash[s]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(t,s){const i=Object.keys(this._systemsHash);t.items.forEach(r=>{const n=i.find(o=>this._systemsHash[o]===r);r[t.name](s[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Nn=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Nn.defaultMaxIdle,this.checkCountMax=Nn.defaultCheckCountMax,this.mode=Nn.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==fh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let s=!1;for(let i=0;i<t.length;i++){const r=t[i];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(e.destroyTexture(r,!0),t[i]=null,s=!0)}if(s){let i=0;for(let r=0;r<t.length;r++)t[r]!==null&&(t[i++]=t[r]);t.length=i}}unload(e){const t=this.renderer.texture,s=e._texture;s&&!s.framebuffer&&t.destroyTexture(s);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};let Ie=Nn;Ie.defaultMode=fh.AUTO;Ie.defaultMaxIdle=60*60;Ie.defaultCheckCountMax=60*10;Ie.extension={type:K.RendererSystem,name:"textureGC"};it.add(Ie);class Ta{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=at.UNSIGNED_BYTE,this.internalFormat=$.RGBA,this.samplerType=0}}function jb(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[at.UNSIGNED_BYTE]:{[$.RGBA]:e.RGBA8,[$.RGB]:e.RGB8,[$.RG]:e.RG8,[$.RED]:e.R8,[$.RGBA_INTEGER]:e.RGBA8UI,[$.RGB_INTEGER]:e.RGB8UI,[$.RG_INTEGER]:e.RG8UI,[$.RED_INTEGER]:e.R8UI,[$.ALPHA]:e.ALPHA,[$.LUMINANCE]:e.LUMINANCE,[$.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[at.BYTE]:{[$.RGBA]:e.RGBA8_SNORM,[$.RGB]:e.RGB8_SNORM,[$.RG]:e.RG8_SNORM,[$.RED]:e.R8_SNORM,[$.RGBA_INTEGER]:e.RGBA8I,[$.RGB_INTEGER]:e.RGB8I,[$.RG_INTEGER]:e.RG8I,[$.RED_INTEGER]:e.R8I},[at.UNSIGNED_SHORT]:{[$.RGBA_INTEGER]:e.RGBA16UI,[$.RGB_INTEGER]:e.RGB16UI,[$.RG_INTEGER]:e.RG16UI,[$.RED_INTEGER]:e.R16UI,[$.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[at.SHORT]:{[$.RGBA_INTEGER]:e.RGBA16I,[$.RGB_INTEGER]:e.RGB16I,[$.RG_INTEGER]:e.RG16I,[$.RED_INTEGER]:e.R16I},[at.UNSIGNED_INT]:{[$.RGBA_INTEGER]:e.RGBA32UI,[$.RGB_INTEGER]:e.RGB32UI,[$.RG_INTEGER]:e.RG32UI,[$.RED_INTEGER]:e.R32UI,[$.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[at.INT]:{[$.RGBA_INTEGER]:e.RGBA32I,[$.RGB_INTEGER]:e.RGB32I,[$.RG_INTEGER]:e.RG32I,[$.RED_INTEGER]:e.R32I},[at.FLOAT]:{[$.RGBA]:e.RGBA32F,[$.RGB]:e.RGB32F,[$.RG]:e.RG32F,[$.RED]:e.R32F,[$.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[at.HALF_FLOAT]:{[$.RGBA]:e.RGBA16F,[$.RGB]:e.RGB16F,[$.RG]:e.RG16F,[$.RED]:e.R16F},[at.UNSIGNED_SHORT_5_6_5]:{[$.RGB]:e.RGB565},[at.UNSIGNED_SHORT_4_4_4_4]:{[$.RGBA]:e.RGBA4},[at.UNSIGNED_SHORT_5_5_5_1]:{[$.RGBA]:e.RGB5_A1},[at.UNSIGNED_INT_2_10_10_10_REV]:{[$.RGBA]:e.RGB10_A2,[$.RGBA_INTEGER]:e.RGB10_A2UI},[at.UNSIGNED_INT_10F_11F_11F_REV]:{[$.RGB]:e.R11F_G11F_B10F},[at.UNSIGNED_INT_5_9_9_9_REV]:{[$.RGB]:e.RGB9_E5},[at.UNSIGNED_INT_24_8]:{[$.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[at.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[$.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[at.UNSIGNED_BYTE]:{[$.RGBA]:e.RGBA,[$.RGB]:e.RGB,[$.ALPHA]:e.ALPHA,[$.LUMINANCE]:e.LUMINANCE,[$.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[at.UNSIGNED_SHORT_5_6_5]:{[$.RGB]:e.RGB},[at.UNSIGNED_SHORT_4_4_4_4]:{[$.RGBA]:e.RGBA},[at.UNSIGNED_SHORT_5_5_5_1]:{[$.RGBA]:e.RGBA}},t}class Ep{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ft,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=jb(t);const s=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=s;for(let r=0;r<s;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new Ta(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Ta(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(t,s=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[s]!==t&&(this.currentLocation!==s&&(this.currentLocation=s,i.activeTexture(i.TEXTURE0+s)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==s&&(this.currentLocation=s,i.activeTexture(i.TEXTURE0+s)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[s]=t}else this.currentLocation!==s&&(this.currentLocation=s,i.activeTexture(i.TEXTURE0+s)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[s]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:s,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(s.activeTexture(s.TEXTURE0+r),this.currentLocation=r),s.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)}ensureSamplerType(t){const{boundTextures:s,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let n=t-1;n>=0;--n){const o=s[n];o&&o._glTextures[r].samplerType!==rl.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const s=new Ta(this.gl.createTexture());return s.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=s,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),s}initTextureType(t,s){var i;s.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,this.webGLVersion===2&&t.type===at.HALF_FLOAT?s.type=this.gl.HALF_FLOAT:s.type=t.type}updateTexture(t){var r;const s=t._glTextures[this.CONTEXT_UID];if(!s)return;const i=this.renderer;if(this.initTextureType(t,s),(r=t.resource)!=null&&r.upload(i,t,s))s.samplerType!==rl.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=i.gl;(s.width!==n||s.height!==o||s.dirtyId<0)&&(s.width=n,s.height=o,a.texImage2D(t.target,0,s.internalFormat,n,o,0,t.format,s.type,null))}t.dirtyStyleId!==s.dirtyStyleId&&this.updateTextureStyle(t),s.dirtyId=t.dirtyId}destroyTexture(t,s){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!s)){const r=this.managedTextures.indexOf(t);r!==-1&&Ni(this.managedTextures,r,1)}}updateTextureStyle(t){var i;const s=t._glTextures[this.CONTEXT_UID];s&&((t.mipmap===ts.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?s.mipmap=!1:s.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?s.wrapMode=Ms.CLAMP:s.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,s)||this.setStyle(t,s),s.dirtyStyleId=t.dirtyStyleId)}setStyle(t,s){const i=this.gl;if(s.mipmap&&t.mipmap!==ts.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,s.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,s.wrapMode),s.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ls.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===ls.LINEAR){const n=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ls.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===ls.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Ep.extension={type:K.RendererSystem,name:"texture"};it.add(Ep);class wp{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:s,CONTEXT_UID:i}=this,r=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,s){const{gl:i,renderer:r}=this;s&&r.shader.bind(s),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:s,renderer:i,CONTEXT_UID:r}=this,n=s.createTransformFeedback();t._glTransformFeedbacks[r]=n,s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[r].refCount++,s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,s){const i=t._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!s&&n.dispose(a,s))}i&&(s||r.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}wp.extension={type:K.RendererSystem,name:"transformFeedback"};it.add(wp);class Fo{constructor(t){this.renderer=t}init(t){this.screen=new pt(0,0,t.width,t.height),this.element=t.view||q.ADAPTER.createCanvas(),this.resolution=t.resolution||q.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,s){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(s*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var s;t&&((s=this.element.parentNode)==null||s.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Fo.defaultOptions={width:800,height:600,resolution:q.RESOLUTION,autoDensity:!1};Fo.extension={type:[K.RendererSystem,K.CanvasRendererSystem],name:"_view"};it.add(Fo);q.PREFER_ENV=ci.WEBGL2;q.STRICT_TEXTURE_CACHE=!1;q.RENDER_OPTIONS={...Bo.defaultOptions,...Do.defaultOptions,...Fo.defaultOptions,...Oo.defaultOptions};Object.defineProperties(q,{WRAP_MODE:{get(){return ft.defaultOptions.wrapMode},set(e){yt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ft.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return ft.defaultOptions.scaleMode},set(e){yt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ft.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return ft.defaultOptions.mipmap},set(e){yt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ft.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return ft.defaultOptions.anisotropicLevel},set(e){yt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ft.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return yt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Jt.defaultResolution},set(e){Jt.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return yt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Jt.defaultMultisample},set(e){Jt.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Ce.defaultMaxTextures},set(e){yt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ce.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Ce.defaultBatchSize},set(e){yt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ce.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ce.canUploadSameBuffer},set(e){yt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ce.canUploadSameBuffer=e}},GC_MODE:{get(){return Ie.defaultMode},set(e){yt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ie.defaultMode=e}},GC_MAX_IDLE:{get(){return Ie.defaultMaxIdle},set(e){yt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ie.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Ie.defaultCheckCountMax},set(e){yt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ie.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return De.defaultVertexPrecision},set(e){yt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),De.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return De.defaultFragmentPrecision},set(e){yt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),De.defaultFragmentPrecision=e}}});var li=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(li||{});class Sa{constructor(t,s=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=s,this.priority=i,this.once=r}match(t,s=null){return this.fn===t&&this.context===s}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const s=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),s}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const s=this.next;return this.next=t?null:s,this.previous=null,s}}const ce=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Sa(null,null,1/0),this.deltaMS=1/ce.targetFPMS,this.elapsedMS=1/ce.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=li.NORMAL){return this._addListener(new Sa(e,t,s))}addOnce(e,t,s=li.NORMAL){return this._addListener(new Sa(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*ce.targetFPMS;const s=this._head;let i=s.next;for(;i;)i=i.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,ce.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!ce._shared){const e=ce._shared=new ce;e.autoStart=!0,e._protected=!0}return ce._shared}static get system(){if(!ce._system){const e=ce._system=new ce;e.autoStart=!0,e._protected=!0}return ce._system}};let te=ce;te.targetFPMS=.06;Object.defineProperties(q,{TARGET_FPMS:{get(){return te.targetFPMS},set(e){yt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),te.targetFPMS=e}}});class Tp{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(s){this._ticker&&this._ticker.remove(this.render,this),this._ticker=s,s&&s.add(this.render,this,li.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?te.shared:new te,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Tp.extension=K.Application;it.add(Tp);const Sp=[];it.handleByList(K.Renderer,Sp);function Yb(e){for(const t of Sp)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var qb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Kb=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Zb=qb,Ap=Kb;class Cp{constructor(t){this.renderer=t}contextChange(t){let s;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),s=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),s=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}s>=Gt.HIGH?this.multisample=Gt.HIGH:s>=Gt.MEDIUM?this.multisample=Gt.MEDIUM:s>=Gt.LOW?this.multisample=Gt.LOW:this.multisample=Gt.NONE}destroy(){}}Cp.extension={type:K.RendererSystem,name:"_multisample"};it.add(Cp);class Jb{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Ip{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:s,CONTEXT_UID:i}=this,r=t._glBuffers[i]||this.createGLBuffer(t);s.bindBuffer(t.type,r.buffer)}unbind(t){const{gl:s}=this;s.bindBuffer(t,null)}bindBufferBase(t,s){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[s]!==t){const n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[s]=t,i.bindBufferBase(i.UNIFORM_BUFFER,s,n.buffer)}}bindBufferRange(t,s,i){const{gl:r,CONTEXT_UID:n}=this;i=i||0;const o=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,s||0,o.buffer,i*256,256)}update(t){const{gl:s,CONTEXT_UID:i}=this,r=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==r.updateID)if(r.updateID=t._updateID,s.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)s.bufferSubData(t.type,0,t.data);else{const n=t.static?s.STATIC_DRAW:s.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,s.bufferData(t.type,t.data,n)}}dispose(t,s){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(s||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const s=Object.keys(this.managedBuffers);for(let i=0;i<s.length;i++)this.dispose(this.managedBuffers[s[i]],t)}createGLBuffer(t){const{CONTEXT_UID:s,gl:i}=this;return t._glBuffers[s]=new Jb(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[s]}}Ip.extension={type:K.RendererSystem,name:"buffer"};it.add(Ip);class Pp{constructor(t){this.renderer=t}render(t,s){const i=this.renderer;let r,n,o,a;if(s&&(r=s.renderTexture,n=s.clear,o=s.transform,a=s.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),r&&(s.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Pp.extension={type:K.RendererSystem,name:"objectRenderer"};it.add(Pp);const Il=class extends Wb{constructor(e){super(),this.type=vd.WEBGL,e=Object.assign({},q.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Le({projectionMatrix:new Dt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Il.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(yt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Il.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:wx()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return yt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return yt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return yt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return yt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Qi=Il;Qi.extension={type:K.Renderer,priority:1};Qi.__plugins={};Qi.__systems={};it.handleByMap(K.RendererPlugin,Qi.__plugins);it.handleByMap(K.RendererSystem,Qi.__systems);it.add(Qi);class Rp extends Hr{constructor(t,s){const{width:i,height:r}=s||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new ft;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,s){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Hr?this.addResourceAt(t[i],i):this.addResourceAt(jd(t[i],s),i))}dispose(){for(let t=0,s=this.length;t<s;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,s){if(!this.items[s])throw new Error(`Index ${s} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[s].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let s=0;s<this.length;s++)this.items[s].parentTextureArray=t,this.items[s].on("update",t.update,t)}unbind(t){super.unbind(t);for(let s=0;s<this.length;s++)this.items[s].parentTextureArray=null,this.items[s].off("update",t.update,t)}load(){if(this._load)return this._load;const s=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(s).then(()=>{const{realWidth:i,realHeight:r}=this.items[0];return this.resize(i,r),Promise.resolve(this)}),this._load}}class Qb extends Rp{constructor(t,s){const{width:i,height:r}=s||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:i,height:r}),n&&this.initFromArray(n,s)}addBaseTextureAt(t,s){if(t.resource)this.addResourceAt(t.resource,s);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Di.TEXTURE_2D_ARRAY}upload(t,s,i){const{length:r,itemDirtyIds:n,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,s.format,i.type,null);for(let l=0;l<r;l++){const h=o[l];n[l]<h.dirtyId&&(n[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,s.format,i.type,h.resource.source))}return!0}}class tE extends Ns{constructor(t){super(t)}static test(t){const{OffscreenCanvas:s}=globalThis;return s&&t instanceof s?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const pr=class extends Rp{constructor(e,t){const{width:s,height:i,autoLoad:r,linkBaseTexture:n}=t||{};if(e&&e.length!==pr.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:s,height:i});for(let o=0;o<pr.SIDES;o++)this.items[o].target=Di.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=n!==!1,e&&this.initFromArray(e,t),r!==!1&&this.load()}bind(e){super.bind(e),e.target=Di.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,s){if(s===void 0&&(s=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Di.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,s){const i=this.itemDirtyIds;for(let r=0;r<pr.SIDES;r++){const n=this.items[r];(i[r]<n.dirtyId||s.dirtyId<t.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(e,n,s),i[r]=n.dirtyId):i[r]<-1&&(e.gl.texImage2D(n.target,0,s.internalFormat,t.realWidth,t.realHeight,0,t.format,s.type,null),i[r]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===pr.SIDES}};let Mp=pr;Mp.SIDES=6;class Ii extends Ns{constructor(t,s){s=s||{};let i,r;typeof t=="string"?(i=Ii.EMPTY,r=t):(i=t,r=null),super(i),this.url=r,this.crossOrigin=s.crossOrigin??!0,this.alphaMode=typeof s.alphaMode=="number"?s.alphaMode:null,this._load=null,s.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,s)=>{if(this.url===null){t(this);return}try{const i=await q.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Ue.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;s(i),this.onError.emit(i)}}),this._load)}upload(t,s,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(s.alphaMode=this.alphaMode),super.upload(t,s,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Ii._EMPTY=Ii._EMPTY??q.ADAPTER.createCanvas(0,0),Ii._EMPTY}}const Ln=class extends Ns{constructor(e,t){t=t||{},super(q.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Ln.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Ns.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,s=e.height;if(!t||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,r=s*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/s*t,r=this._overrideHeight||this._overrideWidth/t*s),i=Math.round(i),r=Math.round(r);const n=this.source;n.width=i,n.height=r,n._pixiId=`canvas_${ai()}`,n.getContext("2d").drawImage(e,0,0,t,s,0,0,i,r),this._resolve(),this._resolve=null}}static getSize(e){const t=Ln.SVG_SIZE.exec(e),s={};return t&&(s[t[1]]=Math.round(parseFloat(t[3])),s[t[5]]=Math.round(parseFloat(t[7]))),s}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ln.SVG_XML.test(e)}};let $r=Ln;$r.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;$r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Pl=class extends Ns{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Ns.crossOrigin(s,i,t.crossorigin);for(let r=0;r<e.length;++r){const n=document.createElement("source");let{src:o,mime:a}=e[r];o=o||e[r];const l=o.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);a=a||Pl.MIME_TYPES[h]||`video/${h}`,n.src=o,n.type=a,s.appendChild(n)}e=s}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=te.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(te.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(te.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(te.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(te.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(te.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Pl.TYPES.includes(t)}};let Ah=Pl;Ah.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Ah.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};El.push(Ii,ip,tE,Ah,$r,qr,Mp,Qb);class ro{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?pt.EMPTY:(t=t||new pt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,s){const{a:i,b:r,c:n,d:o,tx:a,ty:l}=t,h=i*s.x+n*s.y+a,c=r*s.x+o*s.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let s=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],a=t[1];s=o<s?o:s,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[2],a=t[3],s=o<s?o:s,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[4],a=t[5],s=o<s?o:s,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[6],a=t[7],s=o<s?o:s,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,this.minX=s,this.minY=i,this.maxX=r,this.maxY=n}addFrame(t,s,i,r,n){this.addFrameMatrix(t.worldTransform,s,i,r,n)}addFrameMatrix(t,s,i,r,n){const o=t.a,a=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;let f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,g=o*s+l*i+c,v=a*s+h*i+u;f=g<f?g:f,d=v<d?v:d,p=g>p?g:p,m=v>m?v:m,g=o*r+l*i+c,v=a*r+h*i+u,f=g<f?g:f,d=v<d?v:d,p=g>p?g:p,m=v>m?v:m,g=o*s+l*n+c,v=a*s+h*n+u,f=g<f?g:f,d=v<d?v:d,p=g>p?g:p,m=v>m?v:m,g=o*r+l*n+c,v=a*r+h*n+u,f=g<f?g:f,d=v<d?v:d,p=g>p?g:p,m=v>m?v:m,this.minX=f,this.minY=d,this.maxX=p,this.maxY=m}addVertexData(t,s,i){let r=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let l=s;l<i;l+=2){const h=t[l],c=t[l+1];r=h<r?h:r,n=c<n?c:n,o=h>o?h:o,a=c>a?c:a}this.minX=r,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,s,i,r){this.addVerticesMatrix(t.worldTransform,s,i,r)}addVerticesMatrix(t,s,i,r,n=0,o=n){const a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,f=t.ty;let d=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let v=i;v<r;v+=2){const b=s[v],_=s[v+1],E=a*b+h*_+u,C=c*_+l*b+f;d=Math.min(d,E-n),m=Math.max(m,E+n),p=Math.min(p,C-o),g=Math.max(g,C+o)}this.minX=d,this.minY=p,this.maxX=m,this.maxY=g}addBounds(t){const s=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<s?t.minX:s,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,s){const i=t.minX>s.minX?t.minX:s.minX,r=t.minY>s.minY?t.minY:s.minY,n=t.maxX<s.maxX?t.maxX:s.maxX,o=t.maxY<s.maxY?t.maxY:s.maxY;if(i<=n&&r<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=n>h?n:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,s){this.addFrameMatrix(s,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,s){const i=t.minX>s.x?t.minX:s.x,r=t.minY>s.y?t.minY:s.y,n=t.maxX<s.x+s.width?t.maxX:s.x+s.width,o=t.maxY<s.y+s.height?t.maxY:s.y+s.height;if(i<=n&&r<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=n>h?n:h,this.maxY=o>c?o:c}}pad(t=0,s=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=s,this.maxY+=s)}addFramePad(t,s,i,r,n,o){t-=n,s-=o,i+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<s?this.minY:s,this.maxY=this.maxY>r?this.maxY:r}}class Nt extends jr{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Sh,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ro,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const s=Object.keys(t);for(let i=0;i<s.length;++i){const r=s[i];Object.defineProperty(Nt.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,s){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),s||(this._boundsRect||(this._boundsRect=new pt),s=this._boundsRect),this._bounds.getRectangle(s)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ro);const s=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=s,this._bounds=r,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,s,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,s)}toLocal(t,s,i,r){return s&&(t=s.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,s=0,i=1,r=1,n=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=s,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new eE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Zx}set angle(t){this.transform.rotation=t*Jx}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const s=this._mask.isMaskData?this._mask.maskObject:this._mask;s&&(s._maskRefCount--,s._maskRefCount===0&&(s.renderable=!0,s.isMask=!1))}if(this._mask=t,this._mask){const s=this._mask.isMaskData?this._mask.maskObject:this._mask;s&&(s._maskRefCount===0&&(s.renderable=!1,s.isMask=!0),s._maskRefCount++)}}}}class eE extends Nt{constructor(){super(...arguments),this.sortDirty=null}}Nt.prototype.displayObjectUpdateTransform=Nt.prototype.updateTransform;const sE=new Dt;function iE(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const Rl=class extends Nt{constructor(){super(),this.children=[],this.sortableChildren=Rl.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const s=this.getChildIndex(e),i=this.getChildIndex(t);this.children[s]=t,this.children[i]=e,this.onChildrenChange(s<i?s:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const s=this.getChildIndex(e);Ni(this.children,s,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],s=this.children.indexOf(t);if(s===-1)return null;t.parent=null,t.transform._parentID=-1,Ni(this.children,s,1),this._boundsID++,this.onChildrenChange(s),t.emit("removed",this),this.emit("childRemoved",t,this,s)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ni(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const s=e,i=t,r=i-s;let n;if(r>0&&r<=i){n=this.children.splice(s,r);for(let o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}else if(r===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,s=this.children.length;t<s;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(iE),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const s=this.children[e];s.visible&&s.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(t._bounds,s._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const s=super.getLocalBounds(e);if(!t)for(let i=0,r=this.children.length;i<r;++i){const n=this.children[i];n.visible&&n.updateTransform()}return s}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let s,i;this.cullArea?(s=this.cullArea,i=this.worldTransform):this._render!==Rl.prototype._render&&(s=this.getBounds(!0));const r=e.projection.transform;if(r&&(i?(i=sE.copyFrom(i),i.prepend(r)):i=r),s&&t.intersects(s,i))this._render(e);else if(this.cullArea)return;for(let n=0,o=this.children.length;n<o;++n){const a=this.children[n],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,i=this.children.length;s<i;++s)this.children[s].render(e)}}renderAdvanced(e){var r,n,o;const t=this.filters,s=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const i=t&&((r=this._enabledFilters)==null?void 0:r.length)||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==Ht.NONE));if(i&&e.batch.flush(),t&&((n=this._enabledFilters)!=null&&n.length)&&e.filter.push(this,this._enabledFilters),s&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(e)}i&&e.batch.flush(),s&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,s=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<s.length;++i)s[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let ye=Rl;ye.defaultSortableChildren=!1;ye.prototype.containerUpdateTransform=ye.prototype.updateTransform;Object.defineProperties(q,{SORTABLE_CHILDREN:{get(){return ye.defaultSortableChildren},set(e){yt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ye.defaultSortableChildren=e}}});const lr=new wt,rE=new Uint16Array([0,1,2,0,2,3]);class tr extends ye{constructor(t){super(),this._anchor=new As(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new It(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=lt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||Q.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=rE,this.pluginName="batch",this.isSprite=!0,this._roundPixels=q.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ss(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ss(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const s=this.transform.worldTransform,i=s.a,r=s.b,n=s.c,o=s.d,a=s.tx,l=s.ty,h=this.vertexData,c=t.trim,u=t.orig,f=this._anchor;let d=0,p=0,m=0,g=0;if(c?(p=c.x-f._x*u.width,d=p+c.width,g=c.y-f._y*u.height,m=g+c.height):(p=-f._x*u.width,d=p+u.width,g=-f._y*u.height,m=g+u.height),h[0]=i*p+n*g+a,h[1]=o*g+r*p+l,h[2]=i*d+n*g+a,h[3]=o*g+r*d+l,h[4]=i*d+n*m+a,h[5]=o*m+r*d+l,h[6]=i*p+n*m+a,h[7]=o*m+r*p+l,this._roundPixels){const v=q.RESOLUTION;for(let b=0;b<h.length;++b)h[b]=Math.round(h[b]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,s=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,l=n.c,h=n.d,c=n.tx,u=n.ty,f=-r._x*i.width,d=f+i.width,p=-r._y*i.height,m=p+i.height;s[0]=o*f+l*p+c,s[1]=h*p+a*f+u,s[2]=o*d+l*p+c,s[3]=h*p+a*d+u,s[4]=o*d+l*m+c,s[5]=h*m+a*d+u,s[6]=o*f+l*m+c,s[7]=h*m+a*f+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,s=this._texture.orig;!t||t.width===s.width&&t.height===s.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new ro),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,lr);const s=this._texture.orig.width,i=this._texture.orig.height,r=-s*this.anchor.x;let n=0;return lr.x>=r&&lr.x<r+s&&(n=-i*this.anchor.y,lr.y>=n&&lr.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,s){const i=t instanceof Q?t:Q.from(t,s);return new tr(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const s=Ss(this.scale.x)||1;this.scale.x=s*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const s=Ss(this.scale.y)||1;this.scale.y=s*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Q.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Dp=new Dt;Nt.prototype._cacheAsBitmap=!1;Nt.prototype._cacheData=null;Nt.prototype._cacheAsBitmapResolution=null;Nt.prototype._cacheAsBitmapMultisample=null;class nE{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Nt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new nE),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Nt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Nt.prototype._initCachedDisplayObject=function(t){var f,d;if((f=this._cacheData)!=null&&f.sprite)return;const s=this.alpha;this.alpha=1,t.batch.flush();const i=this.getLocalBounds(null,!0).clone();if((d=this.filters)!=null&&d.length){const p=this.filters[0].padding;i.pad(p)}i.ceil(q.RESOLUTION);const r=t.renderTexture.current,n=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=ui.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${ai()}`;this._cacheData.textureCacheId=h,ft.addToCache(l.baseTexture,h),Q.addToCache(l,h);const c=this.transform.localTransform.copyTo(Dp).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(r,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const u=new tr(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(i.x/i.width),u.anchor.y=-(i.y/i.height),u.alpha=s,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};Nt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Nt.prototype._initCachedDisplayObjectCanvas=function(t){var c;if((c=this._cacheData)!=null&&c.sprite)return;const s=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,n=t._projTransform;s.ceil(q.RESOLUTION);const o=ui.create({width:s.width,height:s.height}),a=`cacheAsBitmap_${ai()}`;this._cacheData.textureCacheId=a,ft.addToCache(o.baseTexture,a),Q.addToCache(o,a);const l=Dp;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=s.x,l.ty-=s.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const h=new tr(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(s.x/s.width),h.anchor.y=-(s.y/s.height),h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};Nt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Nt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Nt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ft.removeFromCache(this._cacheData.textureCacheId),Q.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Nt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Nt.prototype.name=null;ye.prototype.getChildByName=function(t,s){for(let i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(s)for(let i=0,r=this.children.length;i<r;i++){const n=this.children[i];if(!n.getChildByName)continue;const o=n.getChildByName(t,!0);if(o)return o}return null};Nt.prototype.getGlobalPosition=function(t=new wt,s=!1){return this.parent?this.parent.toGlobal(this.position,t,s):(t.x=this.position.x,t.y=this.position.y),t};var oE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class aE extends Jt{constructor(t=1){super(Zb,oE,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const lE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},hE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function cE(e){const t=lE[e],s=t.length;let i=hE,r="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let l=n.replace("%index%",a.toString());o=a,a>=s&&(o=e-a-1),l=l.replace("%value%",t[o].toString()),r+=l,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",e.toString()),i}const uE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function fE(e,t){const s=Math.ceil(e/2);let i=uE,r="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(s-1)}.0`),r+=a,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",e.toString()),i}class Ml extends Jt{constructor(t,s=8,i=4,r=Jt.defaultResolution,n=5){const o=fE(n,t),a=cE(n);super(o,a),this.horizontal=t,this.resolution=r,this._quality=0,this.quality=i,this.blur=s}apply(t,s,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/s.width):this.uniforms.strength=1/i.height*(i.height/s.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/s.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/s.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,s,i,r);else{const n=t.getFilterTexture(),o=t.renderer;let a=s,l=n;this.state.blend=!1,t.applyFilter(this,a,l,We.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,We.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,r),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class dE extends Jt{constructor(t=8,s=4,i=Jt.defaultResolution,r=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ml(!0,t,s,i,r),this.blurYFilter=new Ml(!1,t,s,i,r),this.resolution=i,this.quality=s,this.blur=t,this.repeatEdgePixels=!1}apply(t,s,i,r){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,s,a,We.CLEAR),this.blurYFilter.apply(t,a,i,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,s,i,r):this.blurXFilter.apply(t,s,i,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var pE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Dl extends Jt{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Ap,pE,t),this.alpha=1}_loadMatrix(t,s=!1){let i=t;s&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,s,i){return t[0]=s[0]*i[0]+s[1]*i[5]+s[2]*i[10]+s[3]*i[15],t[1]=s[0]*i[1]+s[1]*i[6]+s[2]*i[11]+s[3]*i[16],t[2]=s[0]*i[2]+s[1]*i[7]+s[2]*i[12]+s[3]*i[17],t[3]=s[0]*i[3]+s[1]*i[8]+s[2]*i[13]+s[3]*i[18],t[4]=s[0]*i[4]+s[1]*i[9]+s[2]*i[14]+s[3]*i[19]+s[4],t[5]=s[5]*i[0]+s[6]*i[5]+s[7]*i[10]+s[8]*i[15],t[6]=s[5]*i[1]+s[6]*i[6]+s[7]*i[11]+s[8]*i[16],t[7]=s[5]*i[2]+s[6]*i[7]+s[7]*i[12]+s[8]*i[17],t[8]=s[5]*i[3]+s[6]*i[8]+s[7]*i[13]+s[8]*i[18],t[9]=s[5]*i[4]+s[6]*i[9]+s[7]*i[14]+s[8]*i[19]+s[9],t[10]=s[10]*i[0]+s[11]*i[5]+s[12]*i[10]+s[13]*i[15],t[11]=s[10]*i[1]+s[11]*i[6]+s[12]*i[11]+s[13]*i[16],t[12]=s[10]*i[2]+s[11]*i[7]+s[12]*i[12]+s[13]*i[17],t[13]=s[10]*i[3]+s[11]*i[8]+s[12]*i[13]+s[13]*i[18],t[14]=s[10]*i[4]+s[11]*i[9]+s[12]*i[14]+s[13]*i[19]+s[14],t[15]=s[15]*i[0]+s[16]*i[5]+s[17]*i[10]+s[18]*i[15],t[16]=s[15]*i[1]+s[16]*i[6]+s[17]*i[11]+s[18]*i[16],t[17]=s[15]*i[2]+s[16]*i[7]+s[17]*i[12]+s[18]*i[17],t[18]=s[15]*i[3]+s[16]*i[8]+s[17]*i[13]+s[18]*i[18],t[19]=s[15]*i[4]+s[16]*i[9]+s[17]*i[14]+s[18]*i[19]+s[19],t}_colorMatrix(t){const s=new Float32Array(t);return s[4]/=255,s[9]/=255,s[14]/=255,s[19]/=255,s}brightness(t,s){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,s)}tint(t,s){const[i,r,n]=It.shared.setValue(t).toArray(),o=[i,0,0,0,0,0,r,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,s)}greyscale(t,s){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,s)}blackAndWhite(t){const s=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(s,t)}hue(t,s){t=(t||0)/180*Math.PI;const i=Math.cos(t),r=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),l=i+(1-i)*o,h=o*(1-i)-a*r,c=o*(1-i)+a*r,u=o*(1-i)+a*r,f=i+o*(1-i),d=o*(1-i)-a*r,p=o*(1-i)-a*r,m=o*(1-i)+a*r,g=i+o*(1-i),v=[l,h,c,0,0,u,f,d,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(v,s)}contrast(t,s){const i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,s)}saturate(t=0,s){const i=t*2/3+1,r=(i-1)*-.5,n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,s)}desaturate(){this.saturate(-1)}negative(t){const s=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(s,t)}sepia(t){const s=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(s,t)}technicolor(t){const s=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(s,t)}polaroid(t){const s=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(s,t)}toBGR(t){const s=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(s,t)}kodachrome(t){const s=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(s,t)}browni(t){const s=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(s,t)}vintage(t){const s=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(s,t)}colorTone(t,s,i,r,n){t=t||.2,s=s||.15,i=i||16770432,r=r||3375104;const o=It.shared,[a,l,h]=o.setValue(i).toArray(),[c,u,f]=o.setValue(r).toArray(),d=[.3,.59,.11,0,0,a,l,h,t,0,c,u,f,s,0,a-c,l-u,h-f,0,0];this._loadMatrix(d,n)}night(t,s){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,s)}predator(t,s){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,s)}lsd(t){const s=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(s,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Dl.prototype.grayscale=Dl.prototype.greyscale;var mE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,gE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class _E extends Jt{constructor(t,s){const i=new Dt;t.renderable=!1,super(gE,mE,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,s==null&&(s=20),this.scale=new wt(s,s)}apply(t,s,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,s,i,r)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var yE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class xE extends Jt{constructor(){super(vE,yE)}}var bE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class EE extends Jt{constructor(t=.5,s=Math.random()){super(Ap,bE,{uNoise:0,uSeed:0}),this.noise=t,this.seed=s}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Ou={AlphaFilter:aE,BlurFilter:dE,BlurFilterPass:Ml,ColorMatrixFilter:Dl,DisplacementFilter:_E,FXAAFilter:xE,NoiseFilter:EE};Object.entries(Ou).forEach(([e,t])=>{Object.defineProperty(Ou,e,{get(){return yt("7.1.0",`filters.${e} has moved to ${e}`),t}})});class wE{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(te.system.add(this.tickerUpdate,this,li.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(te.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Es=new wE;class Kr{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Kr.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new wt,this.page=new wt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,s,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,s,i,r,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class no extends Kr{constructor(){super(...arguments),this.client=new wt,this.movement=new wt,this.offset=new wt,this.global=new wt,this.screen=new wt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,s,i){return t.worldTransform.applyInverse(i||this.global,s)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,s,i,r,n,o,a,l,h,c,u,f,d,p,m){throw new Error("Method not implemented.")}}class Te extends no{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ji extends no{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ji.DOM_DELTA_PIXEL=0;ji.DOM_DELTA_LINE=1;ji.DOM_DELTA_PAGE=2;const TE=2048,SE=new wt,Aa=new wt;class AE{constructor(t){this.dispatch=new jr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,s){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:s,priority:0}),this.mappingTable[t].sort((i,r)=>i.priority-r.priority)}dispatchEvent(t,s){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,s),this.dispatch.emit(s||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const s=this.mappingTable[t.type];if(s)for(let i=0,r=s.length;i<r;i++)s[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,s){Es.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[r](this.rootTarget,this.rootTarget.eventMode,SE.set(t,s),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,s){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,n=i.length-1;r<n;r++)if(t.currentTarget=i[r],this.notifyTarget(t,s),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,s),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,s),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,s,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const r=Array.isArray(s)?s:[s];for(let n=i.length-1;n>=0;n--)r.forEach(o=>{t.currentTarget=i[n],this.notifyTarget(t,o)})}propagationPath(t){const s=[t];for(let i=0;i<TE&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");s.push(t.parent),t=t.parent}return s.reverse(),s}hitTestMoveRecursive(t,s,i,r,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||s==="dynamic")&&(Es.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const f=c[u],d=this.hitTestMoveRecursive(f,this._isInteractive(s)?s:f.eventMode,i,r,n,o||n(t,i));if(d){if(d.length>0&&!d[d.length-1].parent)continue;const p=t.isInteractive();(d.length>0||p)&&(p&&this._allInteractiveElements.push(t),d.push(t)),this._hitElements.length===0&&(this._hitElements=d),a=!0}}}const l=this._isInteractive(s),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!n(t,i)&&r(t,i)?h?[t]:[]:null}hitTestRecursive(t,s,i,r,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||s==="dynamic")&&(Es.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let h=l.length-1;h>=0;h--){const c=l[h],u=this.hitTestRecursive(c,this._isInteractive(s)?s:c.eventMode,i,r,n);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const f=t.isInteractive();return(u.length>0||f)&&u.push(t),u}}}const o=this._isInteractive(s),a=t.isInteractive();return o&&r(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,s){var i;if(t.hitArea&&(t.worldTransform.applyInverse(s,Aa),!t.hitArea.contains(Aa.x,Aa.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!((i=r.containsPoint)!=null&&i.call(r,s)))return!0}return!1}hitTestFn(t,s){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(s):!1}notifyTarget(t,s){var n,o;s=s??t.type;const i=`on${s}`;(o=(n=t.currentTarget)[i])==null||o.call(n,t);const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${s}capture`:s;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,s)}mapPointerDown(t){if(!(t instanceof Te)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")this.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const r=s.button===2;this.dispatchEvent(s,r?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=s.composedPath(),this.freeEvent(s)}mapPointerMove(t){var l,h;if(!(t instanceof Te)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const s=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=s.pointerType==="mouse"||s.pointerType==="pen",r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.overTargets);if(((l=r.overTargets)==null?void 0:l.length)>0&&n!==s.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,n);if(this.dispatchEvent(u,"pointerout"),i&&this.dispatchEvent(u,"mouseout"),!s.composedPath().includes(n)){const f=this.createPointerEvent(t,"pointerleave",n);for(f.eventPhase=f.AT_TARGET;f.target&&!s.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(u)}if(n!==s.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(s,c);this.dispatchEvent(u,"pointerover"),i&&this.dispatchEvent(u,"mouseover");let f=n==null?void 0:n.parent;for(;f&&f!==this.rootTarget.parent&&f!==s.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const p=this.clonePointerEvent(s,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==n&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),i&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(s,"pointermove"),a&&o.push("globalpointermove"),s.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(s,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(s,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=s.target)==null?void 0:h.cursor),o.length>0&&this.all(s,o),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=s.composedPath(),this.freeEvent(s)}mapPointerOver(t){var o;if(!(t instanceof Te)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const s=this.trackingData(t.pointerId),i=this.createPointerEvent(t),r=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;s.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof Te)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const s=this.trackingData(t.pointerId);if(s.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",r=this.findMountedTarget(s.overTargets),n=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;s.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Te)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const s=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:s});const l=r.clicksByButton[t.button];if(l.target===a.target&&s-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=s,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof Te)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const s=this.trackingData(t.pointerId),i=this.findMountedTarget(s.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(i){let n=i;for(;n;)r.currentTarget=n,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete s.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof ji)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const s=this.createWheelEvent(t);this.dispatchEvent(s),this.freeEvent(s)}findMountedTarget(t){if(!t)return null;let s=t[0];for(let i=1;i<t.length&&t[i].parent===s;i++)s=t[i];return s}createPointerEvent(t,s,i){const r=this.allocateEvent(Te);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=i??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof s=="string"&&(r.type=s),r}createWheelEvent(t){const s=this.allocateEvent(ji);return this.copyWheelData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=this.hitTest(s.global.x,s.global.y),s}clonePointerEvent(t,s){const i=this.allocateEvent(Te);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=s??i.type,i}copyWheelData(t,s){s.deltaMode=t.deltaMode,s.deltaX=t.deltaX,s.deltaY=t.deltaY,s.deltaZ=t.deltaZ}copyPointerData(t,s){t instanceof Te&&s instanceof Te&&(s.pointerId=t.pointerId,s.width=t.width,s.height=t.height,s.isPrimary=t.isPrimary,s.pointerType=t.pointerType,s.pressure=t.pressure,s.tangentialPressure=t.tangentialPressure,s.tiltX=t.tiltX,s.tiltY=t.tiltY,s.twist=t.twist)}copyMouseData(t,s){t instanceof no&&s instanceof no&&(s.altKey=t.altKey,s.button=t.button,s.buttons=t.buttons,s.client.copyFrom(t.client),s.ctrlKey=t.ctrlKey,s.metaKey=t.metaKey,s.movement.copyFrom(t.movement),s.screen.copyFrom(t.screen),s.shiftKey=t.shiftKey,s.global.copyFrom(t.global))}copyData(t,s){s.isTrusted=t.isTrusted,s.srcElement=t.srcElement,s.timeStamp=performance.now(),s.type=t.type,s.detail=t.detail,s.view=t.view,s.which=t.which,s.layer.copyFrom(t.layer),s.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const s=this.eventPool.get(t).pop()||new t(this);return s.eventPhase=s.NONE,s.currentTarget=null,s.path=null,s.target=null,s}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const s=t.constructor;this.eventPool.has(s)||this.eventPool.set(s,[]),this.eventPool.get(s).push(t)}notifyListeners(t,s){const i=t.currentTarget._events[s];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(s,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let r=0,n=i.length;r<n&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeListener(s,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,t)}}const CE=1,IE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Bl=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new AE(null),Es.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Te(null),this.rootWheelEvent=new ji(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Bl.defaultEventFeatures},{set:(t,s,i)=>(s==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[s]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:s}=this.renderer;this.setTargetElement(t),this.resolution=s,Bl._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const s=this.cursorStyles[e];if(s)switch(typeof s){case"string":t&&(this.domElement.style.cursor=s);break;case"function":s(e);break;case"object":t&&Object.assign(this.domElement.style,s);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let s=0,i=t.length;s<i;s++){const r=t[s],n=this.bootstrapEvent(this.rootPointerEvent,r);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;Es.pointerMoved();const t=this.normalizeToPointerData(e);for(let s=0,i=t.length;s<i;s++){const r=this.bootstrapEvent(this.rootPointerEvent,t[s]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const s=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let r=0,n=i.length;r<n;r++){const o=this.bootstrapEvent(this.rootPointerEvent,i[r]);o.type+=s,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let s=0,i=t.length;s<i;s++){const r=this.bootstrapEvent(this.rootPointerEvent,t[s]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Es.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Es.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Es.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,s){let i;this.domElement.parentElement?i=this.domElement.getBoundingClientRect():i={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const r=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*r,e.y=(s-i.top)*(this.domElement.height/i.height)*r}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let s=0,i=e.changedTouches.length;s<i;s++){const r=e.changedTouches[s];typeof r.button>"u"&&(r.button=0),typeof r.buttons>"u"&&(r.buttons=1),typeof r.isPrimary>"u"&&(r.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof r.width>"u"&&(r.width=r.radiusX||1),typeof r.height>"u"&&(r.height=r.radiusY||1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="touch"),typeof r.pointerId>"u"&&(r.pointerId=r.identifier||0),typeof r.pressure>"u"&&(r.pressure=r.force||.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),typeof r.layerX>"u"&&(r.layerX=r.offsetX=r.clientX),typeof r.layerY>"u"&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const s=e;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=CE),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,t.push(s)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=IE[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let Vr=Bl;Vr.extension={name:"events",type:[K.RendererSystem,K.CanvasRendererSystem]};Vr.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};it.add(Vr);function Fu(e){return e==="dynamic"||e==="static"}const PE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Fu(Vr.defaultEventMode)},set interactive(e){yt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Vr.defaultEventMode},set eventMode(e){this._internalInteractive=Fu(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,s){const i=typeof s=="boolean"&&s||typeof s=="object"&&s.capture,r=typeof t=="function"?void 0:t;e=i?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,r)},removeEventListener(e,t,s){const i=typeof s=="boolean"&&s||typeof s=="object"&&s.capture,r=typeof t=="function"?void 0:t;e=i?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,r)},dispatchEvent(e){if(!(e instanceof Kr))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};Nt.mixin(PE);const RE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nt.mixin(RE);const ME=9,bn=100,DE=0,BE=0,Nu=2,Lu=1,OE=-1e3,FE=-1e3,NE=2;class Bp{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(hs.tablet||hs.phone)&&this.createTouchHook();const s=document.createElement("div");s.style.width=`${bn}px`,s.style.height=`${bn}px`,s.style.position="absolute",s.style.top=`${DE}px`,s.style.left=`${BE}px`,s.style.zIndex=Nu.toString(),this.div=s,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Lu}px`,t.style.height=`${Lu}px`,t.style.position="absolute",t.style.top=`${OE}px`,t.style.left=`${FE}px`,t.style.zIndex=NE.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const s=t.children;if(s)for(let i=0;i<s.length;i++)this.updateAccessibleObjects(s[i])}update(){const t=performance.now();if(hs.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:s,y:i,width:r,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=r/o*l,c=n/a*l;let u=this.div;u.style.left=`${s}px`,u.style.top=`${i}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const d=this.children[f];if(d.renderId!==this.renderId)d._accessibleActive=!1,Ni(this.children,f,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,f--;else{u=d._accessibleDiv;let p=d.hitArea;const m=d.worldTransform;d.hitArea?(u.style.left=`${(m.tx+p.x*m.a)*h}px`,u.style.top=`${(m.ty+p.y*m.d)*c}px`,u.style.width=`${p.width*m.a*h}px`,u.style.height=`${p.height*m.d*c}px`):(p=d.getBounds(),this.capHitArea(p),u.style.left=`${p.x*h}px`,u.style.top=`${p.y*c}px`,u.style.width=`${p.width*h}px`,u.style.height=`${p.height*c}px`,u.title!==d.accessibleTitle&&d.accessibleTitle!==null&&(u.title=d.accessibleTitle),u.getAttribute("aria-label")!==d.accessibleHint&&d.accessibleHint!==null&&u.setAttribute("aria-label",d.accessibleHint)),(d.accessibleTitle!==u.title||d.tabIndex!==u.tabIndex)&&(u.title=d.accessibleTitle,u.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:s,height:i}=this.renderer;t.x+t.width>s&&(t.width=s-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let s=this.pool.pop();s||(s=document.createElement("button"),s.style.width=`${bn}px`,s.style.height=`${bn}px`,s.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",s.style.position="absolute",s.style.zIndex=Nu.toString(),s.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?s.setAttribute("aria-live","off"):s.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?s.setAttribute("aria-relevant","additions"):s.setAttribute("aria-relevant","text"),s.addEventListener("click",this._onClick.bind(this)),s.addEventListener("focus",this._onFocus.bind(this)),s.addEventListener("focusout",this._onFocusOut.bind(this))),s.style.pointerEvents=t.accessiblePointerEvents,s.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?s.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(s.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&s.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(s),t._accessibleActive=!0,t._accessibleDiv=s,s.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,s){const{displayObject:i}=t.target,r=this.renderer.events.rootBoundary,n=Object.assign(new Kr(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,s.forEach(o=>r.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===ME&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Bp.extension={name:"accessibility",type:[K.RendererPlugin,K.CanvasRendererPlugin]};it.add(Bp);const Ol=class{constructor(e){this.stage=new ye,e=Object.assign({forceCanvas:!1},e),this.renderer=Yb(e),Ol._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const s=Ol._plugins.slice(0);s.reverse(),s.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Ch=Ol;Ch._plugins=[];it.handleByList(K.Application,Ch._plugins);class Op{static init(t){Object.defineProperty(this,"resizeTo",{set(s){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=s,s&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let s,i;if(this._resizeTo===globalThis.window)s=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;s=r,i=n}this.renderer.resize(s,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Op.extension=K.Application;it.add(Op);const ku={loader:K.LoadParser,resolver:K.ResolveParser,cache:K.CacheParser,detection:K.DetectionParser};it.handle(K.Asset,e=>{const t=e.ref;Object.entries(ku).filter(([s])=>!!t[s]).forEach(([s,i])=>it.add(Object.assign(t[s],{extension:t[s].extension??i})))},e=>{const t=e.ref;Object.keys(ku).filter(s=>!!t[s]).forEach(s=>it.remove(t[s]))});class LE{constructor(t,s=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=s}add(t){t.forEach(s=>{this._assetList.push(s)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],s=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<s;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Zr(e,t){if(Array.isArray(t)){for(const s of t)if(e.startsWith(`data:${s}`))return!0;return!1}return e.startsWith(`data:${t}`)}function fi(e,t){const s=e.split("?")[0],i=se.extname(s).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const cs=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(s=>typeof s=="string"?t(s):s):e),Fl=(e,t)=>{const s=t.split("?")[1];return s&&(e+=`?${s}`),e};function Fp(e,t,s,i,r){const n=t[s];for(let o=0;o<n.length;o++){const a=n[o];s<t.length-1?Fp(e.replace(i[s],a),t,s+1,i,r):r.push(e.replace(i[s],a))}}function kE(e){const t=/\{(.*?)\}/g,s=e.match(t),i=[];if(s){const r=[];s.forEach(n=>{const o=n.substring(1,n.length-1).split(",");r.push(o)}),Fp(e,r,0,s,i)}else i.push(e);return i}const oo=e=>!Array.isArray(e);class UE{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const s=this._cache.get(t);return s||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),s}set(t,s){const i=cs(t);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(s)){r=l.getCacheableAssets(i,s);break}}r||(r={},i.forEach(a=>{r[a]=s}));const n=Object.keys(r),o={cacheKeys:n,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==s&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),s instanceof Q){const a=s;i.forEach(l=>{a.baseTexture!==Q.EMPTY.baseTexture&&ft.addToCache(a.baseTexture,l),Q.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const s=this._cacheMap.get(t);s.cacheKeys.forEach(r=>{this._cache.delete(r)}),s.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const hr=new UE;class GE{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,s,i)=>(this._parsersValidated=!1,t[s]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,s){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let r=null,n=null;if(s.loadParser&&(n=this._parserHash[s.loadParser],n||console.warn(`[Assets] specified load parser "${s.loadParser}" not found while loading ${t}`)),!n){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&((o=h.test)!=null&&o.call(h,t,s,this))){n=h;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await n.load(t,s,this),i.parser=n;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,r,s,this))&&(r=await h.parse(r,s,this)||r,i.parser=h)}return r})(),i}async load(t,s){this._parsersValidated||this._validateParsers();let i=0;const r={},n=oo(t),o=cs(t,h=>({src:h})),a=o.length,l=o.map(async h=>{const c=se.toAbsolute(h.src);if(!r[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),r[h.src]=await this.promiseCache[c].promise,s&&s(++i/a)}catch(u){throw delete this.promiseCache[c],delete r[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(l),n?r[o[0].src]:r}async unload(t){const i=cs(t,r=>({src:r})).map(async r=>{var a,l;const n=se.toAbsolute(r.src),o=this.promiseCache[n];if(o){const h=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,h,r,this),delete this.promiseCache[n]}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,s)=>(t[s.name]&&console.warn(`[Assets] loadParser name conflict "${s.name}"`),{...t,[s.name]:s}),{})}}var es=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(es||{});const HE=".json",$E="application/json",VE={extension:{type:K.LoadParser,priority:es.Low},name:"loadJson",test(e){return Zr(e,$E)||fi(e,HE)},async load(e){return await(await q.ADAPTER.fetch(e)).json()}};it.add(VE);const XE=".txt",zE="text/plain",WE={name:"loadTxt",extension:{type:K.LoadParser,priority:es.Low},test(e){return Zr(e,zE)||fi(e,XE)},async load(e){return await(await q.ADAPTER.fetch(e)).text()}};it.add(WE);const jE=["normal","bold","100","200","300","400","500","600","700","800","900"],YE=[".ttf",".otf",".woff",".woff2"],qE=["font/ttf","font/otf","font/woff","font/woff2"],KE=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function ZE(e){const t=se.extname(e),r=se.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let n=r.length>0;for(const a of r)if(!a.match(KE)){n=!1;break}let o=r.join(" ");return n||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const JE={extension:{type:K.LoadParser,priority:es.Low},name:"loadWebFont",test(e){return Zr(e,qE)||fi(e,YE)},async load(e,t){var i,r,n;const s=q.ADAPTER.getFontFaceSet();if(s){const o=[],a=((i=t.data)==null?void 0:i.family)??ZE(e),l=((n=(r=t.data)==null?void 0:r.weights)==null?void 0:n.filter(c=>jE.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const u=l[c],f=new FontFace(a,`url(${encodeURI(e)})`,{...h,weight:u});await f.load(),s.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>q.ADAPTER.getFontFaceSet().delete(t))}};it.add(JE);let Uu=0,Ca;const QE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",tw={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${QE}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},ew={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Ia;class sw{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const s=URL.createObjectURL(new Blob([tw.code],{type:"application/javascript"})),i=new Worker(s);i.addEventListener("message",r=>{i.terminate(),URL.revokeObjectURL(s),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Ca===void 0&&(Ca=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Ca&&(Ia||(Ia=URL.createObjectURL(new Blob([ew.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Ia),t.addEventListener("message",s=>{this.complete(s.data),this.returnWorker(s.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,s){await this._initWorkers();const i=new Promise((r,n)=>{this.queue.push({id:t,arguments:s,resolve:r,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const s=this.queue.pop(),i=s.id;this.resolveHash[Uu]={resolve:s.resolve,reject:s.reject},t.postMessage({data:s.arguments,uuid:Uu++,id:i})}}const Gu=new sw;function No(e,t,s){const i=new Q(e);return i.baseTexture.on("dispose",()=>{delete t.promiseCache[s]}),i}const iw=[".jpeg",".jpg",".png",".webp",".avif"],rw=["image/jpeg","image/png","image/webp","image/avif"];async function nw(e){const t=await q.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const s=await t.blob();return await createImageBitmap(s)}const Lo={name:"loadTextures",extension:{type:K.LoadParser,priority:es.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Zr(e,rw)||fi(e,iw)},async load(e,t,s){let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Gu.isImageBitmapSupported()?i=await Gu.loadImageBitmap(e):i=await nw(e):i=await new Promise(n=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=e,i.complete?n(i):i.onload=()=>{n(i)}});const r=new ft(i,{resolution:Os(e),...t.data});return r.resource.src=e,No(r,s,e)},unload(e){e.destroy(!0)}};it.add(Lo);const ow=".svg",aw="image/svg+xml",lw={extension:{type:K.LoadParser,priority:es.High},name:"loadSVG",test(e){return Zr(e,aw)||fi(e,ow)},async testParse(e){return $r.test(e)},async parse(e,t,s){var o;const i=new $r(e,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await i.load();const r=new ft(i,{resolution:Os(e),...t==null?void 0:t.data});return r.resource.src=e,No(r,s,e)},async load(e,t){return(await q.ADAPTER.fetch(e)).text()},unload:Lo.unload};it.add(lw);class hw{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,s)=>`${t}${this._bundleIdConnector}${s}`,extractAssetIdFromBundle:(t,s)=>s.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(s=>{this._preferredOrder.push(s),s.priority||(s.priority=Object.keys(s.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const s=t;this._defaultSearchParams=Object.keys(s).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(s[i])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(s=>{this.addBundle(s.name,s.assets)})}addBundle(t,s){const i=[];Array.isArray(s)?s.forEach(r=>{if(typeof r.name=="string"){const n=this._createBundleAssetId(t,r.name);i.push(n),this.add([r.name,n],r.srcs,r.data)}else{const n=r.name.map(o=>this._createBundleAssetId(t,o));n.forEach(o=>{i.push(o)}),this.add([...r.name,...n],r.srcs)}}):Object.keys(s).forEach(r=>{i.push(this._createBundleAssetId(t,r)),this.add([r,this._createBundleAssetId(t,r)],s[r])}),this._bundles[t]=i}add(t,s,i){const r=cs(t);r.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(s)||(typeof s=="string"?s=kE(s):s=[s]);const n=s.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let h=0;h<this._parsers.length;h++){const c=this._parsers[h];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=se.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??i,a});r.forEach(o=>{this._assetMap[o]=n})}resolveBundle(t){const s=oo(t);t=cs(t);const i={};return t.forEach(r=>{const n=this._bundles[r];if(n){const o=this.resolve(n),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(r,l)]=h}i[r]=a}}),s?i[t[0]]:i}resolveUrl(t){const s=this.resolve(t);if(typeof t!="string"){const i={};for(const r in s)i[r]=s[r].src;return i}return s.src}resolve(t){const s=oo(t);t=cs(t);const i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const o=this._getPreferredOrder(n),a=n[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(h=>{const c=n.filter(u=>u[l]?u[l]===h:!1);c.length&&(n=c)})}),this._resolverHash[r]=n[0]??a}else{let n=r;(this._basePath||this._rootPath)&&(n=se.toAbsolute(n,this._basePath,this._rootPath)),n=this._appendDefaultSearchParams(n),this._resolverHash[r]={src:n}}i[r]=this._resolverHash[r]}),s?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let s=0;s<t.length;s++){const i=t[0],r=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const s=/\?/.test(t)?"&":"?";return`${t}${s}${this._defaultSearchParams}`}}class cw{constructor(){this._detections=[],this._initialized=!1,this.resolver=new hw,this.loader=new GE,this.cache=hr,this._backgroundLoader=new LE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const s=((n=t.texturePreference)==null?void 0:n.resolution)??1,i=typeof s=="number"?[s]:s;let r=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;r=typeof l=="string"?[l]:l;for(const h of this._detections)await h.test()||(r=await h.remove(r))}else for(const l of this._detections)await l.test()&&(r=await l.add(r));this.resolver.prefer({params:{format:r,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,s,i){this.resolver.add(t,s,i)}async load(t,s){this._initialized||await this.init();const i=oo(t),r=cs(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),n=this.resolver.resolve(r),o=await this._mapLoadToResolve(n,s);return i?o[r[0]]:o}addBundle(t,s){this.resolver.addBundle(t,s)}async loadBundle(t,s){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const r=this.resolver.resolveBundle(t),n={},o=Object.keys(r);let a=0,l=0;const h=()=>{s==null||s(++a/l)},c=o.map(u=>{const f=r[u];return l+=Object.keys(f).length,this._mapLoadToResolve(f,h).then(d=>{n[u]=d})});return await Promise.all(c),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const s=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(s))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const s=this.resolver.resolveBundle(t);Object.values(s).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return hr.get(t);const s={};for(let i=0;i<t.length;i++)s[i]=hr.get(t[i]);return s}async _mapLoadToResolve(t,s){const i=Object.values(t),r=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(i,s);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const h=n[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[r[l]]=h,hr.set(c,h)}),o}async unload(t){this._initialized||await this.init();const s=cs(t).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(s);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=cs(t);const s=this.resolver.resolveBundle(t),i=Object.keys(s).map(r=>this._unloadFromResolved(s[r]));await Promise.all(i)}async _unloadFromResolved(t){const s=Object.values(t);s.forEach(i=>{hr.remove(i.src)}),await this.loader.unload(s)}get detections(){return this._detections}get preferWorkers(){return Lo.config.preferWorkers}set preferWorkers(t){yt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(s=>{s.config&&Object.keys(s.config).filter(i=>i in t).forEach(i=>{s.config[i]=t[i]})})}}const En=new cw;it.handleByList(K.LoadParser,En.loader.parsers).handleByList(K.ResolveParser,En.resolver.parsers).handleByList(K.CacheParser,En.cache.parsers).handleByList(K.DetectionParser,En.detections);const uw={extension:K.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof Q),getCacheableAssets:(e,t)=>{const s={};return e.forEach(i=>{t.forEach((r,n)=>{s[i+(n===0?"":n+1)]=r})}),s}};it.add(uw);const fw={extension:{type:K.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await q.ADAPTER.fetch(e).then(s=>s.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};it.add(fw);const dw={extension:{type:K.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await q.ADAPTER.fetch(e).then(s=>s.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};it.add(dw);const Hu=["png","jpg","jpeg"],pw={extension:{type:K.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Hu],remove:async e=>e.filter(t=>!Hu.includes(t))};it.add(pw);const mw={extension:K.ResolveParser,test:Lo.test,parse:e=>{var t;return{resolution:parseFloat(((t=q.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:e.split(".").pop(),src:e}}};it.add(mw);var fe=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(fe||{});const ao={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let ns,Ti;function $u(){Ti={s3tc:ns.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ns.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:ns.getExtension("WEBGL_compressed_texture_etc"),etc1:ns.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:ns.getExtension("WEBGL_compressed_texture_pvrtc")||ns.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:ns.getExtension("WEBGL_compressed_texture_atc"),astc:ns.getExtension("WEBGL_compressed_texture_astc")}}const gw={extension:{type:K.DetectionParser,priority:2},test:async()=>{const t=q.ADAPTER.createCanvas().getContext("webgl");return t?(ns=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{Ti||$u();const t=[];for(const s in Ti)Ti[s]&&t.push(s);return[...t,...e]},remove:async e=>(Ti||$u(),e.filter(t=>!(t in Ti)))};it.add(gw);class _w extends qr{constructor(t,s={width:1,height:1,autoLoad:!0}){let i,r;typeof t=="string"?(i=t,r=new Uint8Array):(i=null,r=t),super(r,s),this.origin=i,this.buffer=r?new bl(r):null,this._load=null,this.loaded=!1,this.origin!==null&&s.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new bl(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class ri extends _w{constructor(t,s){super(t,s),this.format=s.format,this.levels=s.levels||1,this._width=s.width,this._height=s.height,this._extension=ri._formatToExtension(this.format),(s.levelBuffers||this.buffer)&&(this._levelBuffers=s.levelBuffers||ri._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,s,i){const r=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:h,levelHeight:c,levelBuffer:u}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,h,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=ri._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,s,i,r,n,o,a){const l=new Array(i);let h=t.byteOffset,c=o,u=a,f=c+r-1&~(r-1),d=u+n-1&~(n-1),p=f*d*ao[s];for(let m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?c:f,levelHeight:i>1?u:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,c=c>>1||1,u=u>>1||1,f=c+r-1&~(r-1),d=u+n-1&~(n-1),p=f*d*ao[s];return l}}const Pa=4,wn=124,yw=32,Vu=20,vw=542327876,Tn={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},xw={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Sn={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},bw=1,Ew=2,ww=4,Tw=64,Sw=512,Aw=131072,Cw=827611204,Iw=861165636,Pw=894720068,Rw=808540228,Mw=4,Dw={[Cw]:fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Iw]:fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Pw]:fe.COMPRESSED_RGBA_S3TC_DXT5_EXT},Bw={70:fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:fe.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:fe.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Ow(e){const t=new Uint32Array(e);if(t[0]!==vw)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(e,0,wn/Uint32Array.BYTES_PER_ELEMENT),r=i[Tn.HEIGHT],n=i[Tn.WIDTH],o=i[Tn.MIPMAP_COUNT],a=new Uint32Array(e,Tn.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,yw/Uint32Array.BYTES_PER_ELEMENT),l=a[bw];if(l&ww){const h=a[xw.FOURCC];if(h!==Rw){const _=Dw[h],E=Pa+wn,C=new Uint8Array(e,E);return[new ri(C,{format:_,width:n,height:r,levels:o})]}const c=Pa+wn,u=new Uint32Array(t.buffer,c,Vu/Uint32Array.BYTES_PER_ELEMENT),f=u[Sn.DXGI_FORMAT],d=u[Sn.RESOURCE_DIMENSION],p=u[Sn.MISC_FLAG],m=u[Sn.ARRAY_SIZE],g=Bw[f];if(g===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(p===Mw)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const v=new Array,b=Pa+wn+Vu;if(m===1)v.push(new Uint8Array(e,b));else{const _=ao[g];let E=0,C=n,F=r;for(let T=0;T<o;T++){const B=Math.max(1,C+3&-4),X=Math.max(1,F+3&-4),N=B*X*_;E+=N,C=C>>>1,F=F>>>1}let M=b;for(let T=0;T<m;T++)v.push(new Uint8Array(e,M,E)),M+=E}return v.map(_=>new ri(_,{format:g,width:n,height:r,levels:o}))}throw l&Tw?new Error("DDSParser does not support uncompressed texture data."):l&Sw?new Error("DDSParser does not supported YUV uncompressed texture data."):l&Aw?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&Ew?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Xu=[171,75,84,88,32,49,49,187,13,10,26,10],Fw=67305985,be={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Nl=64,zu={[at.UNSIGNED_BYTE]:1,[at.UNSIGNED_SHORT]:2,[at.INT]:4,[at.UNSIGNED_INT]:4,[at.FLOAT]:4,[at.HALF_FLOAT]:8},Nw={[$.RGBA]:4,[$.RGB]:3,[$.RG]:2,[$.RED]:1,[$.LUMINANCE]:1,[$.LUMINANCE_ALPHA]:2,[$.ALPHA]:1},Lw={[at.UNSIGNED_SHORT_4_4_4_4]:2,[at.UNSIGNED_SHORT_5_5_5_1]:2,[at.UNSIGNED_SHORT_5_6_5]:2};function kw(e,t,s=!1){const i=new DataView(t);if(!Uw(e,i))return null;const r=i.getUint32(be.ENDIANNESS,!0)===Fw,n=i.getUint32(be.GL_TYPE,r),o=i.getUint32(be.GL_FORMAT,r),a=i.getUint32(be.GL_INTERNAL_FORMAT,r),l=i.getUint32(be.PIXEL_WIDTH,r),h=i.getUint32(be.PIXEL_HEIGHT,r)||1,c=i.getUint32(be.PIXEL_DEPTH,r)||1,u=i.getUint32(be.NUMBER_OF_ARRAY_ELEMENTS,r)||1,f=i.getUint32(be.NUMBER_OF_FACES,r),d=i.getUint32(be.NUMBER_OF_MIPMAP_LEVELS,r),p=i.getUint32(be.BYTES_OF_KEY_VALUE_DATA,r);if(h===0||c!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,v=l+3&-4,b=h+3&-4,_=new Array(u);let E=l*h;n===0&&(E=v*b);let C;if(n!==0?zu[n]?C=zu[n]*Nw[o]:C=Lw[n]:C=ao[a],C===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const F=s?Hw(i,p,r):null;let T=E*C,B=l,X=h,N=v,G=b,R=Nl+p;for(let I=0;I<d;I++){const st=i.getUint32(R,r);let j=R+4;for(let L=0;L<u;L++){let tt=_[L];tt||(tt=_[L]=new Array(d)),tt[I]={levelID:I,levelWidth:d>1||n!==0?B:N,levelHeight:d>1||n!==0?X:G,levelBuffer:new Uint8Array(t,j,T)},j+=T}R+=st+4,R=R%4!==0?R+4-R%4:R,B=B>>1||1,X=X>>1||1,N=B+m-1&~(m-1),G=X+g-1&~(g-1),T=N*G*C}return n!==0?{uncompressed:_.map(I=>{let st=I[0].levelBuffer,j=!1;return n===at.FLOAT?st=new Float32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4):n===at.UNSIGNED_INT?(j=!0,st=new Uint32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4)):n===at.INT&&(j=!0,st=new Int32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4)),{resource:new qr(st,{width:I[0].levelWidth,height:I[0].levelHeight}),type:n,format:j?Gw(o):o}}),kvData:F}:{compressed:_.map(I=>new ri(null,{format:a,width:l,height:h,levels:d,levelBuffers:I})),kvData:F}}function Uw(e,t){for(let s=0;s<Xu.length;s++)if(t.getUint8(s)!==Xu[s])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function Gw(e){switch(e){case $.RGBA:return $.RGBA_INTEGER;case $.RGB:return $.RGB_INTEGER;case $.RG:return $.RG_INTEGER;case $.RED:return $.RED_INTEGER;default:return e}}function Hw(e,t,s){const i=new Map;let r=0;for(;r<t;){const n=e.getUint32(Nl+r,s),o=Nl+r+4,a=3-(n+3)%4;if(n===0||n>t-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&e.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(e.buffer,o,l)),c=new DataView(e.buffer,o+l+1,n-l-1);i.set(h,c),r+=4+n+a}return i}const $w={extension:{type:K.LoadParser,priority:es.High},name:"loadDDS",test(e){return fi(e,".dds")},async load(e,t,s){const r=await(await q.ADAPTER.fetch(e)).arrayBuffer(),o=Ow(r).map(a=>{const l=new ft(a,{mipmap:ts.OFF,alphaMode:Ue.NO_PREMULTIPLIED_ALPHA,resolution:Os(e),...t.data});return No(l,s,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};it.add($w);const Vw={extension:{type:K.LoadParser,priority:es.High},name:"loadKTX",test(e){return fi(e,".ktx")},async load(e,t,s){const r=await(await q.ADAPTER.fetch(e)).arrayBuffer(),{compressed:n,uncompressed:o,kvData:a}=kw(e,r),l=n??o,h={mipmap:ts.OFF,alphaMode:Ue.NO_PREMULTIPLIED_ALPHA,resolution:Os(e),...t.data},c=l.map(u=>{l===o&&Object.assign(h,{type:u.type,format:u.format});const f=new ft(u,h);return f.ktxKeyValueData=a,No(f,s,e)});return c.length===1?c[0]:c},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};it.add(Vw);const Xw={extension:K.ResolveParser,test:e=>{const s=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(s)},parse:e=>{var i,r;if(e.split("?")[0].split(".").pop()==="ktx"){const n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(n.some(o=>e.endsWith(o)))return{resolution:parseFloat(((i=q.RETINA_PREFIX.exec(e))==null?void 0:i[1])??"1"),format:n.find(o=>e.endsWith(o)),src:e}}return{resolution:parseFloat(((r=q.RETINA_PREFIX.exec(e))==null?void 0:r[1])??"1"),format:e.split(".").pop(),src:e}}};it.add(Xw);const zw=new pt,Ww=4,mr=class{constructor(e){this.renderer=e}async image(e,t,s){const i=new Image;return i.src=await this.base64(e,t,s),i}async base64(e,t,s){const i=this.canvas(e);if(i.toBlob!==void 0)return new Promise((r,n)=>{i.toBlob(o=>{if(!o){n(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>r(a.result),a.onerror=n,a.readAsDataURL(o)},t,s)});if(i.toDataURL!==void 0)return i.toDataURL(t,s);if(i.convertToBlob!==void 0){const r=await i.convertToBlob({type:t,quality:s});return new Promise((n,o)=>{const a=new FileReader;a.onload=()=>n(a.result),a.onerror=o,a.readAsDataURL(r)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:s,width:i,height:r,flipY:n}=this._rawPixels(e,t);n&&mr._flipY(s,i,r),mr._unpremultiplyAlpha(s);const o=new kx(i,r,1),a=new ImageData(new Uint8ClampedArray(s.buffer),i,r);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:s,width:i,height:r,flipY:n}=this._rawPixels(e,t);return n&&mr._flipY(s,i,r),mr._unpremultiplyAlpha(s),s}_rawPixels(e,t){const s=this.renderer;if(!s)throw new Error("The Extract has already been destroyed");let i,r=!1,n,o=!1;if(e&&(e instanceof ui?n=e:(n=s.generateTexture(e,{resolution:s.resolution,multisample:s.multisample}),o=!0)),n){if(i=n.baseTexture.resolution,t=t??n.frame,r=!1,!o){s.renderTexture.bind(n);const u=n.framebuffer.glFramebuffers[s.CONTEXT_UID];u.blitFramebuffer&&s.framebuffer.bind(u.blitFramebuffer)}}else i=s.resolution,t||(t=zw,t.width=s.width/i,t.height=s.height/i),r=!0,s.renderTexture.bind();const a=Math.round(t.width*i),l=Math.round(t.height*i),h=new Uint8Array(Ww*a*l),c=s.gl;return c.readPixels(Math.round(t.x*i),Math.round(t.y*i),a,l,c.RGBA,c.UNSIGNED_BYTE,h),o&&(n==null||n.destroy(!0)),{pixels:h,width:a,height:l,flipY:r}}destroy(){this.renderer=null}static _flipY(e,t,s){const i=t<<2,r=s>>1,n=new Uint8Array(i);for(let o=0;o<r;o++){const a=o*i,l=(s-o-1)*i;n.set(e.subarray(a,a+i)),e.copyWithin(a,l,l+i),e.set(n,l)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let s=0;s<t;s+=4){const i=e[s+3];if(i!==0){const r=255.001/i;e[s]=e[s]*r+.5,e[s+1]=e[s+1]*r+.5,e[s+2]=e[s+2]*r+.5}}}};let Np=mr;Np.extension={name:"extract",type:K.RendererSystem};it.add(Np);const lo={build(e){const t=e.points;let s,i,r,n,o,a;if(e.type===Zt.CIRC){const p=e.shape;s=p.x,i=p.y,o=a=p.radius,r=n=0}else if(e.type===Zt.ELIP){const p=e.shape;s=p.x,i=p.y,o=p.width,a=p.height,r=n=0}else{const p=e.shape,m=p.width/2,g=p.height/2;s=p.x+m,i=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),r=m-o,n=g-a}if(!(o>=0&&a>=0&&r>=0&&n>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(r?4:0)+(n?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=s+r,t[1]=t[3]=i+n,t[2]=t[4]=s-r,t[5]=t[7]=i-n;return}let c=0,u=l*4+(r?2:0)+2,f=u,d=h;{const p=r+o,m=n,g=s+p,v=s-p,b=i+m;if(t[c++]=g,t[c++]=b,t[--u]=b,t[--u]=v,n){const _=i-m;t[f++]=v,t[f++]=_,t[--d]=_,t[--d]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=r+Math.cos(m)*o,v=n+Math.sin(m)*a,b=s+g,_=s-g,E=i+v,C=i-v;t[c++]=b,t[c++]=E,t[--u]=E,t[--u]=_,t[f++]=_,t[f++]=C,t[--d]=C,t[--d]=b}{const p=r,m=n+a,g=s+p,v=s-p,b=i+m,_=i-m;t[c++]=g,t[c++]=b,t[--d]=_,t[--d]=g,r&&(t[c++]=v,t[c++]=b,t[--d]=_,t[--d]=v)}},triangulate(e,t){const s=e.points,i=t.points,r=t.indices;if(s.length===0)return;let n=i.length/2;const o=n;let a,l;if(e.type!==Zt.RREC){const c=e.shape;a=c.x,l=c.y}else{const c=e.shape;a=c.x+c.width/2,l=c.y+c.height/2}const h=e.matrix;i.push(e.matrix?h.a*a+h.c*l+h.tx:a,e.matrix?h.b*a+h.d*l+h.ty:l),n++,i.push(s[0],s[1]);for(let c=2;c<s.length;c+=2)i.push(s[c],s[c+1]),r.push(n++,o,n);r.push(o+1,o,n)}};function Wu(e,t=!1){const s=e.length;if(s<6)return;let i=0;for(let r=0,n=e[s-2],o=e[s-1];r<s;r+=2){const a=e[r],l=e[r+1];i+=(a-n)*(l+o),n=a,o=l}if(!t&&i>0||t&&i<=0){const r=s/2;for(let n=r+r%2;n<s;n+=2){const o=s-n-2,a=s-n-1,l=n,h=n+1;[e[o],e[l]]=[e[l],e[o]],[e[a],e[h]]=[e[h],e[a]]}}}const Lp={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let s=e.points;const i=e.holes,r=t.points,n=t.indices;if(s.length>=6){Wu(s,!1);const o=[];for(let h=0;h<i.length;h++){const c=i[h];Wu(c.points,!0),o.push(s.length/2),s=s.concat(c.points)}const a=lv(s,o,2);if(!a)return;const l=r.length/2;for(let h=0;h<a.length;h+=3)n.push(a[h]+l),n.push(a[h+1]+l),n.push(a[h+2]+l);for(let h=0;h<s.length;h++)r.push(s[h])}}},jw={build(e){const t=e.shape,s=t.x,i=t.y,r=t.width,n=t.height,o=e.points;o.length=0,r>=0&&n>=0&&o.push(s,i,s+r,i,s+r,i+n,s,i+n)},triangulate(e,t){const s=e.points,i=t.points;if(s.length===0)return;const r=i.length/2;i.push(s[0],s[1],s[2],s[3],s[6],s[7],s[4],s[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},Yw={build(e){lo.build(e)},triangulate(e,t){lo.triangulate(e,t)}};var Ae=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ae||{}),Cs=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Cs||{});const Yi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let s=Math.ceil(e/this.maxLength);return s<this.minSegments?s=this.minSegments:s>this.maxSegments&&(s=this.maxSegments),s}};class ju{static curveTo(t,s,i,r,n,o){const a=o[o.length-2],h=o[o.length-1]-s,c=a-t,u=r-s,f=i-t,d=Math.abs(h*f-c*u);if(d<1e-8||n===0)return(o[o.length-2]!==t||o[o.length-1]!==s)&&o.push(t,s),null;const p=h*h+c*c,m=u*u+f*f,g=h*u+c*f,v=n*Math.sqrt(p)/d,b=n*Math.sqrt(m)/d,_=v*g/p,E=b*g/m,C=v*f+b*c,F=v*u+b*h,M=c*(b+_),T=h*(b+_),B=f*(v+E),X=u*(v+E),N=Math.atan2(T-F,M-C),G=Math.atan2(X-F,B-C);return{cx:C+t,cy:F+s,radius:n,startAngle:N,endAngle:G,anticlockwise:c*u>f*h}}static arc(t,s,i,r,n,o,a,l,h){const c=a-o,u=Yi._segmentsCount(Math.abs(c)*n,Math.ceil(Math.abs(c)/io)*40),f=c/(u*2),d=f*2,p=Math.cos(f),m=Math.sin(f),g=u-1,v=g%1/g;for(let b=0;b<=g;++b){const _=b+v*b,E=f+o+d*_,C=Math.cos(E),F=-Math.sin(E);h.push((p*C+m*F)*n+i,(p*-F+m*C)*n+r)}}}class qw{constructor(){this.reset()}begin(t,s,i){this.reset(),this.style=t,this.start=s,this.attribStart=i}end(t,s){this.attribSize=s-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Ih{static curveLength(t,s,i,r,n,o,a,l){let c=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0,b=0,_=0,E=0,C=t,F=s;for(let M=1;M<=10;++M)u=M/10,f=u*u,d=f*u,p=1-u,m=p*p,g=m*p,v=g*t+3*m*u*i+3*p*f*n+d*a,b=g*s+3*m*u*r+3*p*f*o+d*l,_=C-v,E=F-b,C=v,F=b,c+=Math.sqrt(_*_+E*E);return c}static curveTo(t,s,i,r,n,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const c=Yi._segmentsCount(Ih.curveLength(l,h,t,s,i,r,n,o));let u=0,f=0,d=0,p=0,m=0;a.push(l,h);for(let g=1,v=0;g<=c;++g)v=g/c,u=1-v,f=u*u,d=f*u,p=v*v,m=p*v,a.push(d*l+3*f*v*t+3*u*p*i+m*n,d*h+3*f*v*s+3*u*p*r+m*o)}}function Yu(e,t,s,i,r,n,o,a){const l=e-s*r,h=t-i*r,c=e+s*n,u=t+i*n;let f,d;o?(f=i,d=-s):(f=-i,d=s);const p=l+f,m=h+d,g=c+f,v=u+d;return a.push(p,m,g,v),2}function Vs(e,t,s,i,r,n,o,a){const l=s-e,h=i-t;let c=Math.atan2(l,h),u=Math.atan2(r-e,n-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let f=c;const d=u-c,p=Math.abs(d),m=Math.sqrt(l*l+h*h),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,v=d/g;if(f+=v,a){o.push(e,t,s,i);for(let b=1,_=f;b<g;b++,_+=v)o.push(e,t,e+Math.sin(_)*m,t+Math.cos(_)*m);o.push(e,t,r,n)}else{o.push(s,i,e,t);for(let b=1,_=f;b<g;b++,_+=v)o.push(e+Math.sin(_)*m,t+Math.cos(_)*m,e,t);o.push(r,n,e,t)}return g*2}function Kw(e,t){const s=e.shape;let i=e.points||s.points.slice();const r=t.closePointEps;if(i.length===0)return;const n=e.lineStyle,o=new wt(i[0],i[1]),a=new wt(i[i.length-2],i[i.length-1]),l=s.type!==Zt.POLY||s.closeStroke,h=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){i=i.slice(),h&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const L=(o.x+a.x)*.5,tt=(a.y+o.y)*.5;i.unshift(L,tt),i.push(L,tt)}const c=t.points,u=i.length/2;let f=i.length;const d=c.length/2,p=n.width/2,m=p*p,g=n.miterLimit*n.miterLimit;let v=i[0],b=i[1],_=i[2],E=i[3],C=0,F=0,M=-(b-E),T=v-_,B=0,X=0,N=Math.sqrt(M*M+T*T);M/=N,T/=N,M*=p,T*=p;const G=n.alignment,R=(1-G)*2,I=G*2;l||(n.cap===Cs.ROUND?f+=Vs(v-M*(R-I)*.5,b-T*(R-I)*.5,v-M*R,b-T*R,v+M*I,b+T*I,c,!0)+2:n.cap===Cs.SQUARE&&(f+=Yu(v,b,M,T,R,I,!0,c))),c.push(v-M*R,b-T*R,v+M*I,b+T*I);for(let L=1;L<u-1;++L){v=i[(L-1)*2],b=i[(L-1)*2+1],_=i[L*2],E=i[L*2+1],C=i[(L+1)*2],F=i[(L+1)*2+1],M=-(b-E),T=v-_,N=Math.sqrt(M*M+T*T),M/=N,T/=N,M*=p,T*=p,B=-(E-F),X=_-C,N=Math.sqrt(B*B+X*X),B/=N,X/=N,B*=p,X*=p;const tt=_-v,Tt=b-E,O=_-C,et=F-E,ht=tt*O+Tt*et,vt=Tt*O-et*tt,bt=vt<0;if(Math.abs(vt)<.001*Math.abs(ht)){c.push(_-M*R,E-T*R,_+M*I,E+T*I),ht>=0&&(n.join===Ae.ROUND?f+=Vs(_,E,_-M*R,E-T*R,_-B*R,E-X*R,c,!1)+4:f+=2,c.push(_-B*I,E-X*I,_+B*R,E+X*R));continue}const Bt=(-M+v)*(-T+E)-(-M+_)*(-T+b),mt=(-B+C)*(-X+E)-(-B+_)*(-X+F),A=(tt*mt-O*Bt)/vt,V=(et*Bt-Tt*mt)/vt,U=(A-_)*(A-_)+(V-E)*(V-E),Y=_+(A-_)*R,rt=E+(V-E)*R,y=_-(A-_)*I,x=E-(V-E)*I,w=Math.min(tt*tt+Tt*Tt,O*O+et*et),S=bt?R:I,P=w+S*S*m,D=U<=P;let W=n.join;if(W===Ae.MITER&&U/m>g&&(W=Ae.BEVEL),D)switch(W){case Ae.MITER:{c.push(Y,rt,y,x);break}case Ae.BEVEL:{bt?c.push(Y,rt,_+M*I,E+T*I,Y,rt,_+B*I,E+X*I):c.push(_-M*R,E-T*R,y,x,_-B*R,E-X*R,y,x),f+=2;break}case Ae.ROUND:{bt?(c.push(Y,rt,_+M*I,E+T*I),f+=Vs(_,E,_+M*I,E+T*I,_+B*I,E+X*I,c,!0)+4,c.push(Y,rt,_+B*I,E+X*I)):(c.push(_-M*R,E-T*R,y,x),f+=Vs(_,E,_-M*R,E-T*R,_-B*R,E-X*R,c,!1)+4,c.push(_-B*R,E-X*R,y,x));break}}else{switch(c.push(_-M*R,E-T*R,_+M*I,E+T*I),W){case Ae.MITER:{bt?c.push(y,x,y,x):c.push(Y,rt,Y,rt),f+=2;break}case Ae.ROUND:{bt?f+=Vs(_,E,_+M*I,E+T*I,_+B*I,E+X*I,c,!0)+2:f+=Vs(_,E,_-M*R,E-T*R,_-B*R,E-X*R,c,!1)+2;break}}c.push(_-B*R,E-X*R,_+B*I,E+X*I),f+=2}}v=i[(u-2)*2],b=i[(u-2)*2+1],_=i[(u-1)*2],E=i[(u-1)*2+1],M=-(b-E),T=v-_,N=Math.sqrt(M*M+T*T),M/=N,T/=N,M*=p,T*=p,c.push(_-M*R,E-T*R,_+M*I,E+T*I),l||(n.cap===Cs.ROUND?f+=Vs(_-M*(R-I)*.5,E-T*(R-I)*.5,_-M*R,E-T*R,_+M*I,E+T*I,c,!1)+2:n.cap===Cs.SQUARE&&(f+=Yu(_,E,M,T,R,I,!1,c)));const st=t.indices,j=Yi.epsilon*Yi.epsilon;for(let L=d;L<f+d-2;++L)v=c[L*2],b=c[L*2+1],_=c[(L+1)*2],E=c[(L+1)*2+1],C=c[(L+2)*2],F=c[(L+2)*2+1],!(Math.abs(v*(E-F)+_*(F-b)+C*(b-E))<j)&&st.push(L,L+1,L+2)}function Zw(e,t){let s=0;const i=e.shape,r=e.points||i.points,n=i.type!==Zt.POLY||i.closeStroke;if(r.length===0)return;const o=t.points,a=t.indices,l=r.length/2,h=o.length/2;let c=h;for(o.push(r[0],r[1]),s=1;s<l;s++)o.push(r[s*2],r[s*2+1]),a.push(c,c+1),c++;n&&a.push(c,h)}function qu(e,t){e.lineStyle.native?Zw(e,t):Kw(e,t)}class Ph{static curveLength(t,s,i,r,n,o){const a=t-2*i+n,l=s-2*r+o,h=2*i-2*t,c=2*r-2*s,u=4*(a*a+l*l),f=4*(a*h+l*c),d=h*h+c*c,p=2*Math.sqrt(u+f+d),m=Math.sqrt(u),g=2*u*m,v=2*Math.sqrt(d),b=f/m;return(g*p+m*f*(p-v)+(4*d*u-f*f)*Math.log((2*m+b+p)/(b+v)))/(4*g)}static curveTo(t,s,i,r,n){const o=n[n.length-2],a=n[n.length-1],l=Yi._segmentsCount(Ph.curveLength(o,a,t,s,i,r));let h=0,c=0;for(let u=1;u<=l;++u){const f=u/l;h=o+(t-o)*f,c=a+(s-a)*f,n.push(h+(t+(i-t)*f-h)*f,c+(s+(r-s)*f-c)*f)}}}const Ra={[Zt.POLY]:Lp,[Zt.CIRC]:lo,[Zt.ELIP]:lo,[Zt.RECT]:jw,[Zt.RREC]:Yw},Ku=[],An=[];class ho{constructor(t,s=null,i=null,r=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=s,this.matrix=r,this.type=t.type}clone(){return new ho(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const vi=new wt,kp=class extends Yd{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ro,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),An.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Ku.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,s=null,i=null){const r=new ho(e,t,s,i);return this.graphicsData.push(r),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const s=new ho(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=i.lineStyle,i.holes.push(s),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let s=0;s<t.length;++s){const i=t[s];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,vi):vi.copyFrom(e),i.shape.contains(vi.x,vi.y))){let r=!1;if(i.holes){for(let n=0;n<i.holes.length;n++)if(i.holes[n].shape.contains(vi.x,vi.y)){r=!0;break}}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let s=null,i=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],i=s.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],h=l.fillStyle,c=l.lineStyle;Ra[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||c.visible)&&this.processHoles(l.holes);for(let f=0;f<2;f++){const d=f===0?h:c;if(!d.visible)continue;const p=d.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Ms.REPEAT,f===0?this.processFill(l):this.processLine(l);const v=this.points.length/2-g;v!==0&&(s&&!this._compareStyles(i,d)&&(s.end(m,g),s=null),s||(s=Ku.pop()||new qw,s.begin(d,m,g),this.batches.push(s),i=d),this.addUvs(this.points,e,d.texture,g,v,d.matrix))}}const r=this.indices.length,n=this.points.length/2;if(s&&s.end(r,n),this.batches.length===0){this.batchable=!0;return}const o=n>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const s=this.graphicsData[e],i=s.fillStyle,r=s.lineStyle;if(i&&!i.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,s=e.length;t<s;t++){const i=e[t];for(let r=0;r<i.size;r++){const n=i.start+r;this.indicesUint16[n]=this.indicesUint16[n]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<kp.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++ft._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),An.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,s=this.textureIds;let i=An.pop();i||(i=new wl,i.texArray=new Sl),i.texArray.count=0,i.start=0,i.size=0,i.type=qe.TRIANGLES;let r=0,n=null,o=0,a=!1,l=qe.TRIANGLES,h=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const u=this.batches[c],f=8,d=u.style,p=d.texture.baseTexture;a!==!!d.native&&(a=!!d.native,l=a?qe.LINES:qe.TRIANGLES,n=null,r=f,e++),n!==p&&(n=p,p._batchEnabled!==e&&(r===f&&(e++,r=0,i.size>0&&(i=An.pop(),i||(i=new wl,i.texArray=new Sl),this.drawCalls.push(i)),i.start=h,i.size=0,i.texArray.count=0,i.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=r,p.wrapMode=Ms.REPEAT,i.texArray.elements[i.texArray.count++]=p,r++)),i.size+=u.size,h+=u.size,o=p._batchLocation,this.addColors(t,d.color,d.alpha,u.attribSize,u.attribStart),this.addTextureIds(s,o,u.attribSize,u.attribStart)}ft._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,s=this.colors,i=this.textureIds,r=new ArrayBuffer(e.length*3*4),n=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<e.length/2;l++)n[a++]=e[l*2],n[a++]=e[l*2+1],n[a++]=t[l*2],n[a++]=t[l*2+1],o[a++]=s[l],n[a++]=i[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Lp.triangulate(e,this):Ra[e.type].triangulate(e,this)}processLine(e){qu(e,this);for(let t=0;t<e.holes.length;t++)qu(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const s=e[t];Ra[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let s=0;s<e.length/2;s++){const i=e[s*2],r=e[s*2+1];e[s*2]=t.a*i+t.c*r+t.tx,e[s*2+1]=t.b*i+t.d*r+t.ty}}addColors(e,t,s,i,r=0){const n=It.shared.setValue(t).toLittleEndianNumber(),o=It.shared.setValue(n).toPremultiplied(s);e.length=Math.max(e.length,r+i);for(let a=0;a<i;a++)e[r+a]=o}addTextureIds(e,t,s,i=0){e.length=Math.max(e.length,i+s);for(let r=0;r<s;r++)e[i+r]=t}addUvs(e,t,s,i,r,n=null){let o=0;const a=t.length,l=s.frame;for(;o<r;){let c=e[(i+o)*2],u=e[(i+o)*2+1];if(n){const f=n.a*c+n.c*u+n.tx;u=n.b*c+n.d*u+n.ty,c=f}o++,t.push(c/l.width,u/l.height)}const h=s.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,s,a,r)}adjustUvs(e,t,s,i){const r=t.baseTexture,n=1e-6,o=s+i*2,a=t.frame,l=a.width/r.width,h=a.height/r.height;let c=a.x/a.width,u=a.y/a.height,f=Math.floor(e[s]+n),d=Math.floor(e[s+1]+n);for(let p=s+2;p<o;p+=2)f=Math.min(f,Math.floor(e[p]+n)),d=Math.min(d,Math.floor(e[p+1]+n));c-=f,u-=d;for(let p=s;p<o;p+=2)e[p]=(e[p]+c)*l,e[p+1]=(e[p+1]+u)*h}};let Up=kp;Up.BATCHABLE_SIZE=100;class ko{constructor(){this.color=16777215,this.alpha=1,this.texture=Q.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new ko;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=Q.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Rh extends ko{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Cs.BUTT,this.join=Ae.MITER,this.miterLimit=10}clone(){const t=new Rh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Ma={},kn=class extends ye{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new ko,this._lineStyle=new Rh,this._matrix=null,this._holeMode=!1,this.state=ps.for2d(),this._geometry=e||new Up,this._geometry.refCount++,this._transformID=-1,this._tintColor=new It(16777215),this.blendMode=lt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new kn(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,s,i=.5,r=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:s,alignment:i,native:r}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Q.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Cs.BUTT,join:Ae.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const s=e.width>0&&e.alpha>0;return s?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:s},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Li,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Li,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const s=this.currentPath.points,i=s[s.length-2],r=s[s.length-1];return(i!==e||r!==t)&&s.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,s,i){this._initCurve();const r=this.currentPath.points;return r.length===0&&this.moveTo(0,0),Ph.curveTo(e,t,s,i,r),this}bezierCurveTo(e,t,s,i,r,n){return this._initCurve(),Ih.curveTo(e,t,s,i,r,n,this.currentPath.points),this}arcTo(e,t,s,i,r){this._initCurve(e,t);const n=this.currentPath.points,o=ju.curveTo(e,t,s,i,r,n);if(o){const{cx:a,cy:l,radius:h,startAngle:c,endAngle:u,anticlockwise:f}=o;this.arc(a,l,h,c,u,f)}return this}arc(e,t,s,i,r,n=!1){if(i===r)return this;if(!n&&r<=i?r+=io:n&&i<=r&&(i+=io),r-i===0)return this;const a=e+Math.cos(i)*s,l=t+Math.sin(i)*s,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),f=Math.abs(c[c.length-1]-l);u<h&&f<h||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return ju.arc(a,l,e,t,s,i,r,n,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:Q.WHITE,color:e,alpha:t})}normalizeColor(e){const t=It.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Q.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const s=e.alpha>0;return s?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:s},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,s,i){return this.drawShape(new pt(e,t,s,i))}drawRoundedRect(e,t,s,i,r){return this.drawShape(new Th(e,t,s,i,r))}drawCircle(e,t,s){return this.drawShape(new Eh(e,t,s))}drawEllipse(e,t,s,i){return this.drawShape(new wh(e,t,s,i))}drawPolygon(...e){let t,s=!0;const i=e[0];i.points?(s=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;const r=new Li(t);return r.closeStroke=s,this.drawShape(r),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Zt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,s=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(e.points);for(let i=0;i<s;i++){const r=e.batches[i],n=r.style.color,o=new Float32Array(this.vertexData.buffer,r.attribStart*4*2,r.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,r.attribStart*4*2,r.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,r.start*2,r.size),h={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:It.shared.setValue(n).toRgbArray(),_tintRGB:n,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,s=this.batches.length;t<s;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const t=this._resolveDirectShader(e),s=this._geometry,i=this.worldAlpha,r=t.uniforms,n=s.drawCalls;r.translationMatrix=this.transform.worldTransform,It.shared.setValue(this._tintColor).premultiply(i).toArray(r.tint),e.shader.bind(t),e.geometry.bind(s,t),e.state.set(this.state);for(let o=0,a=n.length;o<a;o++)this._renderDrawCallDirect(e,s.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:s,type:i,size:r,start:n}=t,o=s.count;for(let a=0;a<o;a++)e.texture.bind(s.elements[a],a);e.geometry.draw(i,r,n)}_resolveDirectShader(e){let t=this.shader;const s=this.pluginName;if(!t){if(!Ma[s]){const{maxTextures:i}=e.plugins[s],r=new Int32Array(i);for(let a=0;a<i;a++)r[a]=a;const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Dt,default:Le.from({uSamplers:r},!0)},o=e.plugins[s]._shader.program;Ma[s]=new Je(o,n)}t=Ma[s]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:s,maxX:i,maxY:r}=e.bounds;this._bounds.addFrame(this.transform,t,s,i,r)}containsPoint(e){return this.worldTransform.applyInverse(e,kn._TEMP_POINT),this._geometry.containsPoint(kn._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=It.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,s=t.a,i=t.b,r=t.c,n=t.d,o=t.tx,a=t.ty,l=this._geometry.points,h=this.vertexData;let c=0;for(let u=0;u<l.length;u+=2){const f=l[u],d=l[u+1];h[c++]=s*f+r*d+o,h[c++]=n*d+i*f+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let ni=kn;ni.curves=Yi;ni._TEMP_POINT=new wt;class Jw{constructor(t,s){this.uvBuffer=t,this.uvMatrix=s,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const s=this.uvBuffer.data;(!this.data||this.data.length!==s.length)&&(this.data=new Float32Array(s.length)),this.uvMatrix.multiplyUvs(s,this.data),this._updateID++}}const Da=new wt,Zu=new Li,Gp=class extends ye{constructor(e,t,s,i=qe.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=s||ps.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=q.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===qe.TRIANGLES&&t.length<Gp.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const t=this.geometry.buffers[0],s=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==s.length&&(this.vertexData=new Float32Array(s.length));const r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,l=r.d,h=r.tx,c=r.ty,u=this.vertexData;for(let f=0;f<u.length/2;f++){const d=s[f*2],p=s[f*2+1];u[f*2]=n*d+a*p+h,u[f*2+1]=o*d+l*p+c}if(this._roundPixels){const f=q.RESOLUTION;for(let d=0;d<u.length;++d)u[d]=Math.round(u[d]*f)/f}this.vertexDirty=i}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Jw(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Da);const t=this.geometry.getBuffer("aVertexPosition").data,s=Zu.points,i=this.geometry.getIndex().data,r=i.length,n=this.drawMode===4?3:1;for(let o=0;o+2<r;o+=n){const a=i[o]*2,l=i[o+1]*2,h=i[o+2]*2;if(s[0]=t[a],s[1]=t[a+1],s[2]=t[l],s[3]=t[l+1],s[4]=t[h],s[5]=t[h+1],Zu.contains(Da.x,Da.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Ll=Gp;Ll.BATCHABLE_SIZE=100;class Qw extends Fs{constructor(t,s,i){super();const r=new Lt(t),n=new Lt(s,!0),o=new Lt(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,at.FLOAT).addAttribute("aTextureCoord",n,2,!1,at.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var tT=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,eT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Ju extends Je{constructor(t,s){const i={uSampler:t,alpha:1,uTextureMatrix:Dt.IDENTITY,uColor:new Float32Array([1,1,1,1])};s=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},s),s.uniforms&&Object.assign(i,s.uniforms),super(s.program||De.from(eT,tT),i),this._colorDirty=!1,this.uvMatrix=new cp(t),this.batchable=s.program===void 0,this.pluginName=s.pluginName,this._tintColor=new It(s.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=s.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const s=this.texture.baseTexture.alphaMode;It.shared.setValue(this._tintColor).premultiply(this._alpha,s).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Qu{constructor(t,s,i){this.geometry=new Fs,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||at.FLOAT,offset:n.offset},s[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let s=0;this.indexBuffer=new Lt(Nx(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=s,s+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Lt(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new Lt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===at.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===at.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,s,i){for(let r=0;r<this.dynamicProperties.length;r++){const n=this.dynamicProperties[r];n.uploadFunction(t,s,i,n.type===at.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,s,i){for(let r=0;r<this.staticProperties.length;r++){const n=this.staticProperties[r];n.uploadFunction(t,s,i,n.type===at.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var sT=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,iT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Hp extends Mo{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Dt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:at.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Je.from(iT,sT,{}),this.state=ps.for2d()}render(t){const s=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer;let o=s.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=s[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=Xd(t.blendMode,h),n.state.set(this.state);const c=n.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=It.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let f=!1;for(let d=0,p=0;d<o;d+=r,p+=1){let m=o-d;m>r&&(m=r),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const g=a[p];g.uploadDynamic(s,d,m);const v=t._bufferUpdateIDs[p]||0;f=f||g._updateID<v,f&&(g._updateID=t._updateID,g.uploadStatic(s,d,m)),n.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const s=[],i=t._maxSize,r=t._batchSize,n=t._properties;for(let o=0;o<i;o+=r)s.push(new Qu(this.properties,n,r));return s}_generateOneMoreBuffer(t){const s=t._batchSize,i=t._properties;return new Qu(this.properties,i,s)}uploadVertices(t,s,i,r,n,o){let a=0,l=0,h=0,c=0;for(let u=0;u<i;++u){const f=t[s+u],d=f._texture,p=f.scale.x,m=f.scale.y,g=d.trim,v=d.orig;g?(l=g.x-f.anchor.x*v.width,a=l+g.width,c=g.y-f.anchor.y*v.height,h=c+g.height):(a=v.width*(1-f.anchor.x),l=v.width*-f.anchor.x,h=v.height*(1-f.anchor.y),c=v.height*-f.anchor.y),r[o]=l*p,r[o+1]=c*m,r[o+n]=a*p,r[o+n+1]=c*m,r[o+n*2]=a*p,r[o+n*2+1]=h*m,r[o+n*3]=l*p,r[o+n*3+1]=h*m,o+=n*4}}uploadPosition(t,s,i,r,n,o){for(let a=0;a<i;a++){const l=t[s+a].position;r[o]=l.x,r[o+1]=l.y,r[o+n]=l.x,r[o+n+1]=l.y,r[o+n*2]=l.x,r[o+n*2+1]=l.y,r[o+n*3]=l.x,r[o+n*3+1]=l.y,o+=n*4}}uploadRotation(t,s,i,r,n,o){for(let a=0;a<i;a++){const l=t[s+a].rotation;r[o]=l,r[o+n]=l,r[o+n*2]=l,r[o+n*3]=l,o+=n*4}}uploadUvs(t,s,i,r,n,o){for(let a=0;a<i;++a){const l=t[s+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+n]=l.x1,r[o+n+1]=l.y1,r[o+n*2]=l.x2,r[o+n*2+1]=l.y2,r[o+n*3]=l.x3,r[o+n*3+1]=l.y3,o+=n*4):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+n*2]=0,r[o+n*2+1]=0,r[o+n*3]=0,r[o+n*3+1]=0,o+=n*4)}}uploadTint(t,s,i,r,n,o){for(let a=0;a<i;++a){const l=t[s+a],h=It.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);r[o]=h,r[o+n]=h,r[o+n*2]=h,r[o+n*3]=h,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Hp.extension={name:"particle",type:K.RendererPlugin};it.add(Hp);var Uo=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(Uo||{});const Cn={willReadFrequently:!0},J=class{static get experimentalLetterSpacingSupported(){let e=J._experimentalLetterSpacingSupported;if(e!==void 0){const t=q.ADAPTER.getCanvasRenderingContext2D().prototype;e=J._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,i,r,n,o,a,l){this.text=e,this.style=t,this.width=s,this.height=i,this.lines=r,this.lineWidths=n,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(e,t,s,i=J._canvas){s=s??t.wordWrap;const r=t.toFontString(),n=J.measureFont(r);n.fontSize===0&&(n.fontSize=t.fontSize,n.ascent=t.fontSize);const o=i.getContext("2d",Cn);o.font=r;const l=(s?J.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const m=J._measureText(l[p],t.letterSpacing,o);h[p]=m,c=Math.max(c,m)}let u=c+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const f=t.lineHeight||n.fontSize+t.strokeThickness;let d=Math.max(f,n.fontSize+t.strokeThickness*2)+(l.length-1)*(f+t.leading);return t.dropShadow&&(d+=t.dropShadowDistance),new J(e,t,u,d,l,h,f+t.leading,c,n)}static _measureText(e,t,s){let i=!1;J.experimentalLetterSpacingSupported&&(J.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,i=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let r=s.measureText(e).width;return r>0&&(i?r-=t:r+=(J.graphemeSegmenter(e).length-1)*t),r}static wordWrap(e,t,s=J._canvas){const i=s.getContext("2d",Cn);let r=0,n="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,c=J.collapseSpaces(h),u=J.collapseNewlines(h);let f=!c;const d=t.wordWrapWidth+l,p=J.tokenize(e);for(let m=0;m<p.length;m++){let g=p[m];if(J.isNewline(g)){if(!u){o+=J.addLine(n),f=!c,n="",r=0;continue}g=" "}if(c){const b=J.isBreakingSpace(g),_=J.isBreakingSpace(n[n.length-1]);if(b&&_)continue}const v=J.getFromCache(g,l,a,i);if(v>d)if(n!==""&&(o+=J.addLine(n),n="",r=0),J.canBreakWords(g,t.breakWords)){const b=J.wordWrapSplit(g);for(let _=0;_<b.length;_++){let E=b[_],C=E,F=1;for(;b[_+F];){const T=b[_+F];if(!J.canBreakChars(C,T,g,_,t.breakWords))E+=T;else break;C=T,F++}_+=F-1;const M=J.getFromCache(E,l,a,i);M+r>d&&(o+=J.addLine(n),f=!1,n="",r=0),n+=E,r+=M}}else{n.length>0&&(o+=J.addLine(n),n="",r=0);const b=m===p.length-1;o+=J.addLine(g,!b),f=!1,n="",r=0}else v+r>d&&(f=!1,o+=J.addLine(n),n="",r=0),(n.length>0||!J.isBreakingSpace(g)||f)&&(n+=g,r+=v)}return o+=J.addLine(n,!1),o}static addLine(e,t=!0){return e=J.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,s,i){let r=s[e];return typeof r!="number"&&(r=J._measureText(e,t,i)+t,s[e]=r),r}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!J.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:J._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:J._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const r=e[i],n=e[i+1];if(J.isBreakingSpace(r,n)||J.isNewline(r)){s!==""&&(t.push(s),s=""),t.push(r);continue}s+=r}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,i,r){return!0}static wordWrapSplit(e){return J.graphemeSegmenter(e)}static measureFont(e){if(J._fonts[e])return J._fonts[e];const t={ascent:0,descent:0,fontSize:0},s=J._canvas,i=J._context;i.font=e;const r=J.METRICS_STRING+J.BASELINE_SYMBOL,n=Math.ceil(i.measureText(r).width);let o=Math.ceil(i.measureText(J.BASELINE_SYMBOL).width);const a=Math.ceil(J.HEIGHT_MULTIPLIER*o);if(o=o*J.BASELINE_MULTIPLIER|0,n===0||a===0)return J._fonts[e]=t,t;s.width=n,s.height=a,i.fillStyle="#f00",i.fillRect(0,0,n,a),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(r,0,o);const l=i.getImageData(0,0,n,a).data,h=l.length,c=n*4;let u=0,f=0,d=!1;for(u=0;u<o;++u){for(let p=0;p<c;p+=4)if(l[f+p]!==255){d=!0;break}if(!d)f+=c;else break}for(t.ascent=o-u,f=h-c,d=!1,u=a;u>o;--u){for(let p=0;p<c;p+=4)if(l[f+p]!==255){d=!0;break}if(!d)f-=c;else break}return t.descent=u-o,t.fontSize=t.ascent+t.descent,J._fonts[e]=t,t}static clearMetrics(e=""){e?delete J._fonts[e]:J._fonts={}}static get _canvas(){if(!J.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",Cn);if(s!=null&&s.measureText)return J.__canvas=t,t;e=q.ADAPTER.createCanvas()}catch{e=q.ADAPTER.createCanvas()}e.width=e.height=10,J.__canvas=e}return J.__canvas}static get _context(){return J.__context||(J.__context=J._canvas.getContext("2d",Cn)),J.__context}};let Kt=J;Kt.METRICS_STRING="|ÉqÅ";Kt.BASELINE_SYMBOL="M";Kt.BASELINE_MULTIPLIER=1.4;Kt.HEIGHT_MULTIPLIER=2;Kt.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(s=>s.segment)}return e=>[...e]})();Kt.experimentalLetterSpacing=!1;Kt._fonts={};Kt._newlines=[10,13];Kt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const rT=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],gr=class{constructor(e){this.styleID=0,this.reset(),Oa(this,e,e)}clone(){const e={};return Oa(e,this,gr.defaultStyle),new gr(e)}reset(){Oa(this,gr.defaultStyle,gr.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Ba(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Ba(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){nT(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Ba(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let i=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!rT.includes(i)&&(i=`"${i}"`),t[s]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let fs=gr;fs.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Uo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Ba(e){const t=It.shared;return Array.isArray(e)?e.map(s=>t.setValue(s).toHex()):t.setValue(e).toHex()}function nT(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}function Oa(e,t,s){for(const i in s)Array.isArray(t[i])?e[i]=t[i].slice():e[i]=t[i]}const oT={texture:!0,children:!1,baseTexture:!0},kl=class extends tr{constructor(e,t,s){let i=!1;s||(s=q.ADAPTER.createCanvas(),i=!0),s.width=3,s.height=3;const r=Q.from(s);r.orig=new pt,r.trim=new pt,super(r),this._ownCanvas=i,this.canvas=s,this.context=s.getContext("2d",{willReadFrequently:!0}),this._resolution=kl.defaultResolution??q.RESOLUTION,this._autoResolution=kl.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Kt.experimentalLetterSpacing}static set experimentalLetterSpacing(e){yt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Kt.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const s=this.context,i=Kt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),r=i.width,n=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,h=i.maxLineWidth,c=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=t.strokeThickness,s.textBaseline=t.textBaseline,s.lineJoin=t.lineJoin,s.miterLimit=t.miterLimit;let u,f;const d=t.dropShadow?2:1;for(let p=0;p<d;++p){const m=t.dropShadow&&p===0,g=m?Math.ceil(Math.max(1,n)+t.padding*2):0,v=g*this._resolution;if(m){s.fillStyle="black",s.strokeStyle="black";const _=t.dropShadowColor,E=t.dropShadowBlur*this._resolution,C=t.dropShadowDistance*this._resolution;s.shadowColor=It.shared.setValue(_).setAlpha(t.dropShadowAlpha).toRgbaString(),s.shadowBlur=E,s.shadowOffsetX=Math.cos(t.dropShadowAngle)*C,s.shadowOffsetY=Math.sin(t.dropShadowAngle)*C+v}else s.fillStyle=this._generateFillStyle(t,o,i),s.strokeStyle=t.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;let b=(a-c.fontSize)/2;a-c.fontSize<0&&(b=0);for(let _=0;_<o.length;_++)u=t.strokeThickness/2,f=t.strokeThickness/2+_*a+c.ascent+b,t.align==="right"?u+=h-l[_]:t.align==="center"&&(u+=(h-l[_])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[_],u+t.padding,f+t.padding-g,!0),t.fill&&this.drawLetterSpacing(o[_],u+t.padding,f+t.padding-g)}this.updateTexture()}drawLetterSpacing(e,t,s,i=!1){const n=this._style.letterSpacing;let o=!1;if(Kt.experimentalLetterSpacingSupported&&(Kt.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){i?this.context.strokeText(e,t,s):this.context.fillText(e,t,s);return}let a=t;const l=Kt.graphemeSegmenter(e);let h=this.context.measureText(e).width,c=0;for(let u=0;u<l.length;++u){const f=l[u];i?this.context.strokeText(f,a,s):this.context.fillText(f,a,s);let d="";for(let p=u+1;p<l.length;++p)d+=l[p];c=this.context.measureText(d).width,a+=h-c+n,h=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const n=Gx(e);n.data&&(e.width=n.width,e.height=n.height,this.context.putImageData(n.data,0,0))}const t=this._texture,s=this._style,i=s.trim?0:s.padding,r=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),r.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,s){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let r;const n=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-n-o*2,l=this.canvas.height/this._resolution-n-o*2,h=i.slice(),c=e.fillGradientStops.slice();if(!c.length){const u=h.length+1;for(let f=1;f<u;++f)c.push(f/u)}if(h.unshift(i[0]),c.unshift(0),h.push(i[i.length-1]),c.push(1),e.fillGradientType===Uo.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const u=s.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const d=s.lineHeight*(f-1)+u,p=s.lineHeight*f;let m=p;f>0&&d>p&&(m=(p+d)/2);const g=p+u,v=s.lineHeight*(f+1);let b=g;f+1<t.length&&v<g&&(b=(g+v)/2);const _=(b-m)/l;for(let E=0;E<h.length;E++){let C=0;typeof c[E]=="number"?C=c[E]:C=E/h.length;let F=Math.min(1,Math.max(0,m/l+C*_));F=Number(F.toFixed(5)),r.addColorStop(F,h[E])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const u=h.length+1;let f=1;for(let d=0;d<h.length;d++){let p;typeof c[d]=="number"?p=c[d]:p=f/u,r.addColorStop(p,h[d]),f++}}return r}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},oT,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Ss(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Ss(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof fs?this._style=e:this._style=new fs(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Go=kl;Go.defaultAutoResolution=!0;class aT{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function lT(e,t){var i;let s=!1;if((i=e==null?void 0:e._textures)!=null&&i.length){for(let r=0;r<e._textures.length;r++)if(e._textures[r]instanceof Q){const n=e._textures[r].baseTexture;t.includes(n)||(t.push(n),s=!0)}}return s}function hT(e,t){if(e.baseTexture instanceof ft){const s=e.baseTexture;return t.includes(s)||t.push(s),!0}return!1}function cT(e,t){if(e._texture&&e._texture instanceof Q){const s=e._texture.baseTexture;return t.includes(s)||t.push(s),!0}return!1}function uT(e,t){return t instanceof Go?(t.updateText(!0),!0):!1}function fT(e,t){if(t instanceof fs){const s=t.toFontString();return Kt.measureFont(s),!0}return!1}function dT(e,t){if(e instanceof Go){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const s=e._texture.baseTexture;return t.includes(s)||t.push(s),!0}return!1}function pT(e,t){return e instanceof fs?(t.includes(e)||t.push(e),!0):!1}const $p=class{constructor(e){this.limiter=new aT($p.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(dT),this.registerFindHook(pT),this.registerFindHook(lT),this.registerFindHook(hT),this.registerFindHook(cT),this.registerUploadHook(uT),this.registerUploadHook(fT)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,te.system.addOnce(this.tick,this,li.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let s=0,i=this.uploadHooks.length;s<i;s++)if(this.uploadHooks[s](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)te.system.addOnce(this.tick,this,li.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,s=e.length;t<s;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,s=this.addHooks.length;t<s&&!this.addHooks[t](e,this.queue);t++);if(e instanceof ye)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&te.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let co=$p;co.uploadsPerFrame=4;Object.defineProperties(q,{UPLOADS_PER_FRAME:{get(){return co.uploadsPerFrame},set(e){yt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),co.uploadsPerFrame=e}}});function Vp(e,t){return t instanceof ft?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function mT(e,t){if(!(t instanceof ni))return!1;const{geometry:s}=t;t.finishPoly(),s.updateBatches();const{batches:i}=s;for(let r=0;r<i.length;r++){const{texture:n}=i[r].style;n&&Vp(e,n.baseTexture)}return s.batchable||e.geometry.bind(s,t._resolveDirectShader(e)),!0}function gT(e,t){return e instanceof ni?(t.push(e),!0):!1}class Xp extends co{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(gT),this.registerUploadHook(Vp),this.registerUploadHook(mT)}}Xp.extension={name:"prepare",type:K.RendererSystem};it.add(Xp);var _T=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,yT=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,vT=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,tf=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,xT=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const In=new Dt;class zp extends Mo{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new op,this.state=ps.for2d()}contextChange(){const t=this.renderer,s={globals:t.globalUniforms};this.simpleShader=Je.from(tf,xT,s),this.shader=t.context.webGLVersion>1?Je.from(yT,_T,s):Je.from(tf,vT,s)}render(t){const s=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);const n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;r=i.uvs,r[0]=r[6]=-n,r[1]=r[3]=-o,r[2]=r[4]=1-n,r[5]=r[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let f=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;f&&(l._glTextures[s.CONTEXT_UID]?f=l.wrapMode!==Ms.CLAMP:l.wrapMode===Ms.CLAMP&&(l.wrapMode=Ms.REPEAT));const d=f?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,v=t._height;In.set(c.a*p/g,c.b*p/v,c.c*m/g,c.d*m/v,c.tx/g,c.ty/v),In.invert(),f?In.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=In.toArray(!0),d.uniforms.uColor=It.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,s.shader.bind(d),s.geometry.bind(i),this.state.blendMode=Xd(t.blendMode,h),s.state.set(this.state),s.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}zp.extension={name:"tilingSprite",type:K.RendererPlugin};it.add(zp);const _r=class{constructor(e,t,s=null){this.linkedSheets=[],this._texture=e instanceof Q?e:null,this.baseTexture=e instanceof ft?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const i=this.baseTexture.resource;this.resolution=this._updateResolution(s||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let s=Os(e,null);return s===null&&(s=parseFloat(t??"1")),s!==1&&this.baseTexture.setResolution(s),s}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=_r.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=_r.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const i=this._frameKeys[t],r=this._frames[i],n=r.frame;if(n){let o=null,a=null;const l=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,h=new pt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);r.rotated?o=new pt(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):o=new pt(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(a=new pt(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[i]=new Q(this.baseTexture,o,h,a,r.rotated?2:0,r.anchor,r.borders),Q.addToCache(this.textures[i],i)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const i=e[t][s];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*_r.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*_r.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Ul=_r;Ul.BATCH_SIZE=1e3;const bT=["jpg","png","jpeg","avif","webp"];function Wp(e,t,s){const i={};if(e.forEach(r=>{i[r]=t}),Object.keys(t.textures).forEach(r=>{i[r]=t.textures[r]}),!s){const r=se.dirname(e[0]);t.linkedSheets.forEach((n,o)=>{const a=Wp([`${r}/${t.data.meta.related_multi_packs[o]}`],n,!0);Object.assign(i,a)})}return i}const ET={extension:K.Asset,cache:{test:e=>e instanceof Ul,getCacheableAssets:(e,t)=>Wp(e,t,!1)},resolver:{test:e=>{const s=e.split("?")[0].split("."),i=s.pop(),r=s.pop();return i==="json"&&bT.includes(r)},parse:e=>{var s;const t=e.split(".");return{resolution:parseFloat(((s=q.RETINA_PREFIX.exec(e))==null?void 0:s[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:K.LoadParser,priority:es.Normal},async testParse(e,t){return se.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,s){var h,c;let i=se.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let r=i+e.meta.image;r=Fl(r,t.src);const o=(await s.load([r]))[r],a=new Ul(o.baseTexture,e,t.src);await a.parse();const l=(h=e==null?void 0:e.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const u=[];for(const d of l){if(typeof d!="string")continue;let p=i+d;(c=t.data)!=null&&c.ignoreMultiPack||(p=Fl(p,t.src),u.push(s.load({src:p,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(u);a.linkedSheets=f,f.forEach(d=>{d.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==d))})}return a},unload(e){e.destroy(!0)}}};it.add(ET);class uo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Un{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const s=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in s){const o=s[n].match(/^[a-z]+/gm)[0],a=s[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const c=a[h].split("="),u=c[0],f=c[1].replace(/"/gm,""),d=parseFloat(f),p=isNaN(d)?f:d;l[u]=p}i[o].push(l)}const r=new uo;return i.info.forEach(n=>r.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>r.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>r.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>r.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>r.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>r.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),r}}class Gl{static test(t){const s=t;return"getElementsByTagName"in s&&s.getElementsByTagName("page").length&&s.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const s=new uo,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<i.length;h++)s.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(let h=0;h<r.length;h++)s.common.push({lineHeight:parseInt(r[h].getAttribute("lineHeight"),10)});for(let h=0;h<n.length;h++)s.page.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});for(let h=0;h<o.length;h++){const c=o[h];s.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)s.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)s.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return s}}class Hl{static test(t){return typeof t=="string"&&t.includes("<font>")?Gl.test(q.ADAPTER.parseXML(t)):!1}static parse(t){return Gl.parse(q.ADAPTER.parseXML(t))}}const Fa=[Un,Gl,Hl];function wT(e){for(let t=0;t<Fa.length;t++)if(Fa[t].test(e))return Fa[t];return null}function TT(e,t,s,i,r,n){const o=s.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=s.dropShadow?s.dropShadowDistance:0,h=s.padding||0,c=e.width/i-l-h*2,u=e.height/i-l-h*2,f=o.slice(),d=s.fillGradientStops.slice();if(!d.length){const p=f.length+1;for(let m=1;m<p;++m)d.push(m/p)}if(f.unshift(o[0]),d.unshift(0),f.push(o[o.length-1]),d.push(1),s.fillGradientType===Uo.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,h,c/2,u+h);let p=0;const g=(n.fontProperties.fontSize+s.strokeThickness)/u;for(let v=0;v<r.length;v++){const b=n.lineHeight*v;for(let _=0;_<f.length;_++){let E=0;typeof d[_]=="number"?E=d[_]:E=_/f.length;const C=b/u+E*g;let F=Math.max(p,C);F=Math.min(F,1),a.addColorStop(F,f[_]),p=F}}}else{a=t.createLinearGradient(h,u/2,c+h,u/2);const p=f.length+1;let m=1;for(let g=0;g<f.length;g++){let v;typeof d[g]=="number"?v=d[g]:v=m/p,a.addColorStop(v,f[g]),m++}}return a}function ST(e,t,s,i,r,n,o){const a=s.text,l=s.fontProperties;t.translate(i,r),t.scale(n,n);const h=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=TT(e,t,o,n,[a],s),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,f=o.dropShadowBlur*n,d=o.dropShadowDistance*n;t.shadowColor=It.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,c+s.lineHeight-l.descent),o.fill&&t.fillText(a,h,c+s.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Gn(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function jp(e){return Array.from?Array.from(e):e.split("")}function AT(e){typeof e=="string"&&(e=[e]);const t=[];for(let s=0,i=e.length;s<i;s++){const r=e[s];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const n=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...jp(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Se=class{constructor(e,t,s){var h;const[i]=e.info,[r]=e.common,[n]=e.page,[o]=e.distanceField,a=Os(n.file),l={};this._ownsTextures=s,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<e.page.length;c++){const{id:u,file:f}=e.page[c];l[u]=t instanceof Array?t[c]:t[f],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[u].baseTexture.alphaMode=Ue.NO_PREMULTIPLIED_ALPHA,l[u].baseTexture.mipmap=ts.OFF)}for(let c=0;c<e.char.length;c++){const{id:u,page:f}=e.char[c];let{x:d,y:p,width:m,height:g,xoffset:v,yoffset:b,xadvance:_}=e.char[c];d/=a,p/=a,m/=a,g/=a,v/=a,b/=a,_/=a;const E=new pt(d+l[f].frame.x/a,p+l[f].frame.y/a,m,g);this.chars[u]={xOffset:v,yOffset:b,xAdvance:_,kerning:{},texture:new Q(l[f].baseTexture,E),page:f}}for(let c=0;c<e.kerning.length;c++){let{first:u,second:f,amount:d}=e.kerning[c];u/=a,f/=a,d/=a,this.chars[f]&&(this.chars[f].kerning[u]=d)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,s){let i;if(e instanceof uo)i=e;else{const n=wT(e);if(!n)throw new Error("Unrecognized data format for font.");i=n.parse(e)}t instanceof Q&&(t=[t]);const r=new Se(i,t,s);return Se.available[r.font]=r,r}static uninstall(e){const t=Se.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Se.available[e]}static from(e,t,s){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:r,resolution:n,textureWidth:o,textureHeight:a,...l}=Object.assign({},Se.defaultOptions,s),h=AT(i),c=t instanceof fs?t:new fs(t),u=o,f=new uo;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};let d=0,p=0,m,g,v,b=0;const _=[];for(let C=0;C<h.length;C++){m||(m=q.ADAPTER.createCanvas(),m.width=o,m.height=a,g=m.getContext("2d"),v=new ft(m,{resolution:n,...l}),_.push(new Q(v)),f.page.push({id:_.length-1,file:""}));const F=h[C],M=Kt.measureText(F,c,!1,m),T=M.width,B=Math.ceil(M.height),X=Math.ceil((c.fontStyle==="italic"?2:1)*T);if(p>=a-B*n){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${F}')`);--C,m=null,g=null,v=null,p=0,d=0,b=0;continue}if(b=Math.max(B+M.fontProperties.descent,b),X*n+d>=u){if(d===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${F}')`);--C,p+=b*n,p=Math.ceil(p),d=0,b=0;continue}ST(m,g,M,d,p,n,c);const N=Gn(M.text);f.char.push({id:N,page:_.length-1,x:d/n,y:p/n,width:X,height:B,xoffset:0,yoffset:0,xadvance:T-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),d+=(X+2*r)*n,d=Math.ceil(d)}for(let C=0,F=h.length;C<F;C++){const M=h[C];for(let T=0;T<F;T++){const B=h[T],X=g.measureText(M).width,N=g.measureText(B).width,R=g.measureText(M+B).width-(X+N);R&&f.kerning.push({first:Gn(M),second:Gn(B),amount:R})}}const E=new Se(f,_,!0);return Se.available[e]!==void 0&&Se.uninstall(e),Se.available[e]=E,E}};let oe=Se;oe.ALPHA=[["a","z"],["A","Z"]," "];oe.NUMERIC=[["0","9"]];oe.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];oe.ASCII=[[" ","~"]];oe.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Se.ALPHANUMERIC};oe.available={};var CT=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,IT=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ef=[],sf=[],rf=[],Yp=class extends ye{constructor(e,t={}){super();const{align:s,tint:i,maxWidth:r,letterSpacing:n,fontName:o,fontSize:a}=Object.assign({},Yp.styleDefaults,t);if(!oe.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=s,this._tintColor=new It(i),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=n,this._anchor=new As(()=>{this.dirty=!0},this,0,0),this._roundPixels=q.ROUND_PIXELS,this.dirty=!0,this._resolution=q.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var X;const e=oe.available[this._fontName],t=this.fontSize,s=t/e.size,i=new wt,r=[],n=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=jp(a),h=this._maxWidth*e.size/t,c=e.distanceFieldType==="none"?ef:sf;let u=null,f=0,d=0,p=0,m=-1,g=0,v=0,b=0,_=0;for(let N=0;N<l.length;N++){const G=l[N],R=Gn(G);if(/(?:\s)/.test(G)&&(m=N,g=f,_++),G==="\r"||G===`
`){n.push(f),o.push(-1),d=Math.max(d,f),++p,++v,i.x=0,i.y+=e.lineHeight,u=null,_=0;continue}const I=e.chars[R];if(!I)continue;u&&I.kerning[u]&&(i.x+=I.kerning[u]);const st=rf.pop()||{texture:Q.EMPTY,line:0,charCode:0,prevSpaces:0,position:new wt};st.texture=I.texture,st.line=p,st.charCode=R,st.position.x=Math.round(i.x+I.xOffset+this._letterSpacing/2),st.position.y=Math.round(i.y+I.yOffset),st.prevSpaces=_,r.push(st),f=st.position.x+Math.max(I.xAdvance-I.xOffset,I.texture.orig.width),i.x+=I.xAdvance+this._letterSpacing,b=Math.max(b,I.yOffset+I.texture.height),u=R,m!==-1&&h>0&&i.x>h&&(++v,Ni(r,1+m-v,1+N-m),N=m,m=-1,n.push(g),o.push(r.length>0?r[r.length-1].prevSpaces:0),d=Math.max(d,g),p++,i.x=0,i.y+=e.lineHeight,u=null,_=0)}const E=l[l.length-1];E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(f=g),n.push(f),d=Math.max(d,f),o.push(-1));const C=[];for(let N=0;N<=p;N++){let G=0;this._align==="right"?G=d-n[N]:this._align==="center"?G=(d-n[N])/2:this._align==="justify"&&(G=o[N]<0?0:(d-n[N])/o[N]),C.push(G)}const F=r.length,M={},T=[],B=this._activePagesMeshData;c.push(...B);for(let N=0;N<F;N++){const G=r[N].texture,R=G.baseTexture.uid;if(!M[R]){let I=c.pop();if(!I){const j=new Qw;let L,tt;e.distanceFieldType==="none"?(L=new Ju(Q.EMPTY),tt=lt.NORMAL):(L=new Ju(Q.EMPTY,{program:De.from(IT,CT),uniforms:{uFWidth:0}}),tt=lt.NORMAL_NPM);const Tt=new Ll(j,L);Tt.blendMode=tt,I={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Tt,vertices:null,uvs:null,indices:null}}I.index=0,I.indexCount=0,I.vertexCount=0,I.uvsCount=0,I.total=0;const{_textureCache:st}=this;st[R]=st[R]||new Q(G.baseTexture),I.mesh.texture=st[R],I.mesh.tint=this._tintColor.value,T.push(I),M[R]=I}M[R].total++}for(let N=0;N<B.length;N++)T.includes(B[N])||this.removeChild(B[N].mesh);for(let N=0;N<T.length;N++)T[N].mesh.parent!==this&&this.addChild(T[N].mesh);this._activePagesMeshData=T;for(const N in M){const G=M[N],R=G.total;if(!(((X=G.indices)==null?void 0:X.length)>6*R)||G.vertices.length<Ll.BATCHABLE_SIZE*2)G.vertices=new Float32Array(4*2*R),G.uvs=new Float32Array(4*2*R),G.indices=new Uint16Array(6*R);else{const I=G.total,st=G.vertices;for(let j=I*4*2;j<st.length;j++)st[j]=0}G.mesh.size=6*R}for(let N=0;N<F;N++){const G=r[N];let R=G.position.x+C[G.line]*(this._align==="justify"?G.prevSpaces:1);this._roundPixels&&(R=Math.round(R));const I=R*s,st=G.position.y*s,j=G.texture,L=M[j.baseTexture.uid],tt=j.frame,Tt=j._uvs,O=L.index++;L.indices[O*6+0]=0+O*4,L.indices[O*6+1]=1+O*4,L.indices[O*6+2]=2+O*4,L.indices[O*6+3]=0+O*4,L.indices[O*6+4]=2+O*4,L.indices[O*6+5]=3+O*4,L.vertices[O*8+0]=I,L.vertices[O*8+1]=st,L.vertices[O*8+2]=I+tt.width*s,L.vertices[O*8+3]=st,L.vertices[O*8+4]=I+tt.width*s,L.vertices[O*8+5]=st+tt.height*s,L.vertices[O*8+6]=I,L.vertices[O*8+7]=st+tt.height*s,L.uvs[O*8+0]=Tt.x0,L.uvs[O*8+1]=Tt.y0,L.uvs[O*8+2]=Tt.x1,L.uvs[O*8+3]=Tt.y1,L.uvs[O*8+4]=Tt.x2,L.uvs[O*8+5]=Tt.y2,L.uvs[O*8+6]=Tt.x3,L.uvs[O*8+7]=Tt.y3}this._textWidth=d*s,this._textHeight=(i.y+e.lineHeight)*s;for(const N in M){const G=M[N];if(this.anchor.x!==0||this.anchor.y!==0){let j=0;const L=this._textWidth*this.anchor.x,tt=this._textHeight*this.anchor.y;for(let Tt=0;Tt<G.total;Tt++)G.vertices[j++]-=L,G.vertices[j++]-=tt,G.vertices[j++]-=L,G.vertices[j++]-=tt,G.vertices[j++]-=L,G.vertices[j++]-=tt,G.vertices[j++]-=L,G.vertices[j++]-=tt}this._maxLineHeight=b*s;const R=G.mesh.geometry.getBuffer("aVertexPosition"),I=G.mesh.geometry.getBuffer("aTextureCoord"),st=G.mesh.geometry.getIndex();R.data=G.vertices,I.data=G.uvs,st.data=G.indices,R.update(),I.update(),st.update()}for(let N=0;N<r.length;N++)rf.push(r[N]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:s,size:i}=oe.available[this._fontName];if(s!=="none"){const{a:r,b:n,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+n*n),h=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(h))/2,u=this.fontSize/i,f=e._view.resolution;for(const d of this._activePagesMeshData)d.mesh.shader.uniforms.uFWidth=c*t*u*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=oe.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!oe.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??oe.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,i=oe.available[this._fontName].distanceFieldType==="none"?ef:sf;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter(r=>t[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=Q.EMPTY});for(const r in t)t[r].destroy(),delete t[r];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let PT=Yp;PT.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const RT=[".xml",".fnt"],MT={extension:{type:K.LoadParser,priority:es.Normal},name:"loadBitmapFont",test(e){return RT.includes(se.extname(e).toLowerCase())},async testParse(e){return Un.test(e)||Hl.test(e)},async parse(e,t,s){const i=Un.test(e)?Un.parse(e):Hl.parse(e),{src:r}=t,{page:n}=i,o=[];for(let h=0;h<n.length;++h){const c=n[h].file;let u=se.join(se.dirname(r),c);u=Fl(u,r),o.push(u)}const a=await s.load(o),l=o.map(h=>a[h]);return oe.install(i,l,!0)},async load(e,t){return(await q.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};it.add(MT);const Si=class extends fs{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Si(Object.keys(Si.defaultOptions).reduce((t,s)=>({...t,[s]:e[s]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Si.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:s}=Si;if(s[e]){const i=s[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return q.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((r,n)=>{const o=URL.createObjectURL(i),a=new FileReader;a.onload=()=>r([o,a.result]),a.onerror=n,a.readAsDataURL(i)})).then(async([i,r])=>{const n=Object.assign({family:se.basename(e,se.extname(e)),weight:"normal",style:"normal",src:i,dataSrc:r,refs:1,originalUrl:e,fontFace:null},t);s[e]=n,this._fonts.push(n),this.styleID++;const o=new FontFace(n.family,`url(${n.src})`,{weight:n.weight,style:n.style});n.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(s=>!this._overrides.includes(s));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(s=>this._overrides.includes(s));t.length>0&&(this._overrides=this._overrides.filter(s=>!t.includes(s)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Ox(e)),typeof e=="number"?Bx(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,s=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const r=`${s}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${r} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${r} ${e}`}reset(){Object.assign(this,Si.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=q.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Cr=Si;Cr.availableFonts={};Cr.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Ai=class extends tr{constructor(e="",t={}){super(Q.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const s=new Image,i=Q.from(s,{scaleMode:q.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new pt,i.trim=new pt,this.texture=i;const r="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject"),l=document.createElementNS(n,"div"),h=document.createElementNS(n,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Ai.defaultMaxWidth,this.maxHeight=Ai.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=s,this._loadImage=new Image,this._autoResolution=Ai.defaultAutoResolution,this._resolution=Ai.defaultResolution??q.RESOLUTION,this.text=e,this.style=t}measureText(e){var a,l;const{text:t,style:s,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:s.toCSS(i)}),this._styleElement.textContent=s.toGlobalCSS(),document.body.appendChild(this._svgRoot);const r=this._domElement.getBoundingClientRect();this._svgRoot.remove();const n=Math.min(this.maxWidth,Math.ceil(r.width)),o=Math.min(this.maxHeight,Math.ceil(r.height));return this._svgRoot.setAttribute("width",n.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),s!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(i)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:n+s.padding*2,height:o+s.padding*2}}async updateText(e=!0){const{style:t,_image:s,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:r,height:n}=this.measureText();s.width=i.width=Math.ceil(Math.max(1,r)),s.height=i.height=Math.ceil(Math.max(1,n)),this._loading||(this._loading=!0,await new Promise(o=>{i.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,s.src=i.src,i.onload=null,i.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:s,resolution:i}=this,{padding:r}=e,{baseTexture:n}=t;t.trim.width=t._frame.width=s.width/i,t.trim.height=t._frame.height=s.height/i,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-r*2,t.orig.height=t._frame.height-r*2,this._onTextureUpdate(),n.setRealSize(s.width,s.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var s,i,r,n,o;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Ai.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((s=this._style)==null||s.cleanFonts()),this._style=t,(i=this._svgRoot)==null||i.remove(),this._svgRoot=t,(r=this._domElement)==null||r.remove(),this._domElement=t,(n=this._foreignObject)==null||n.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Ss(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Ss(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Cr?(this.ownsStyle=!1,this._style=e):e instanceof fs?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Cr.from(e)):(this.ownsStyle=!0,this._style=new Cr(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Ho=Ai;Ho.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Ho.defaultMaxWidth=2024;Ho.defaultMaxHeight=2024;Ho.defaultAutoResolution=!0;const{isCollapsed:Na,drawType:cr,updateDrawType:nf,context:Ee,upDateContext:DT}=yo(Wr(ad)),BT=()=>{class e{constructor(s,i,r){Us(this,"app");Us(this,"container");Us(this,"isDraw");Us(this,"startPoint");Us(this,"lastPoint");Us(this,"graphics");this.app=new Ch({width:i,height:r,backgroundColor:16777215,antialias:!0,eventMode:"static"}),this.container=s,this.isDraw=!1,this.startPoint=this.lastPoint={x:0,y:0},this.initSize(i,r),this.bgMesh(),this.installEvent(),s.value.appendChild(this.app.view)}bgMesh(){const s=new ni;s.beginFill("transparent"),s.drawRect(0,0,this.app.screen.width,this.app.screen.height),s.endFill();const i=new pt(0,0,this.app.screen.width,this.app.screen.height);s.hitArea=i,s.lineStyle(1,0,.1);for(let r=0;r<this.app.screen.width;r+=20)s.moveTo(r,0),s.lineTo(r,this.app.screen.height);for(let r=0;r<this.app.screen.height;r+=20)s.moveTo(0,r),s.lineTo(this.app.screen.width,r);this.app.stage.addChild(s)}initSize(s,i){this.app.view.style&&(this.app.view.style.width=`${s/2}px`,this.app.view.style.height=`${i/2}px`),this.app.stage.scale.set(2),this.app.stage.x=-window.innerWidth/2,this.app.stage.y=-window.innerHeight/2}installEvent(){this.app.stage.on("wheel",s=>{this.app.stage.x+=s.deltaX*-1,this.app.stage.y+=s.deltaY*-1,this.app.stage.children.slice(1).forEach(i=>{i.x+=s.deltaX*-1,i.y+=s.deltaY*-1}),(this.app.stage.x>=0||this.app.stage.x<=-this.app.screen.width||this.app.stage.y>=0||this.app.stage.y<=-this.app.screen.height)&&(this.app.stage.x=-window.innerWidth/2,this.app.stage.y=-window.innerHeight/2)}),this.app.stage.on("pointerdown",s=>{Na.value=!1;const i=s.x+Math.abs(this.app.stage.x)/2,r=s.y+Math.abs(this.app.stage.y)/2;if(cr.value==="text")return this.text(i,r);this.startPoint=this.lastPoint={x:i,y:r},this.isDraw=!0}),this.app.stage.on("pointerup",()=>{var s;cr.value!=="arrow"&&((s=this.graphics)==null||s.removeChildren()),this.isDraw=!1,this.graphics&&(Na.value=!0),this.graphics=void 0,nf.value("select")}),this.app.stage.on("pointermove",s=>{if(!this.isDraw)return;const i=s.x+Math.abs(this.app.stage.x)/2,r=s.y+Math.abs(this.app.stage.y)/2,n=cr.value;this[n](i,r)})}select(){}pen(s,i){this.line(s,i)}pic(){}createGraphics(s){const i=new ni(s);this.app.stage.addChild(i),s&&this.setLineStyle(i,!0);const r=this;return i.isMove=!1,i.cursor="grab",i.on("pointerenter",()=>i.cursor="move"),i.on("pointerdown",function(n){var g;n.stopPropagation(),Na.value=!0;const o=v=>{const b=v.toString(16),_=6-b.length;return`#${new Array(6).fill(0).map((C,F)=>F>=_?b[F-_]:C).join("")}`},{width:a,color:l,alpha:h}=i.line;DT.value({strokeWidth:a,strokeColor:o(l),fillColor:o(i.fill.color),alpha:h}),(g=r.graphics)==null||g.removeChildren(),r.graphics=i,i.isMove=!0,i.startPoint={x:n.x,y:n.y};const{minX:c,minY:u,maxX:f,maxY:d}=this.geometry.bounds,p=[[c-10,u-10],[f+2,u-10],[f+2,d+2],[c-10,d+2]],m=new ni;this.addChild(m),m.lineStyle({width:1,color:0,alpha:.8}),m.beginFill(16777215,0),m.drawRect(c-2,u-2,f-c+4,d-u+4),p.forEach(([v,b])=>{m.beginFill(16777215,0),m.drawRect(v,b,8,8)})}),i.on("pointermove",n=>{var l,h;const o=n.x-(((l=i.startPoint)==null?void 0:l.x)||0),a=n.y-(((h=i.startPoint)==null?void 0:h.y)||0);i.isMove&&(i.x+=o,i.y+=a,i.startPoint={x:n.x,y:n.y})}),i.on("pointerup",n=>{n.stopPropagation(),i.isMove=!1}),i}setLineStyle(s=this.graphics,i){var n;if(!s)return;const r=(n=s.geometry.graphicsData[0])==null?void 0:n.shape;cr.value!=="pen"&&s.clear(),s.beginFill(Ee.value.fillColor,Ee.value.fillColor==="transparent"?0:Ee.value.alpha),s.lineStyle({width:Ee.value.strokeWidth,color:Ee.value.strokeColor,alpha:Ee.value.alpha,cap:Cs.ROUND}),i&&s.drawShape(r)}copy(){const s=xt(this.graphics.geometry);this.graphics=this.createGraphics(s),this.graphics.parent=xt(this.graphics.parent),this.graphics.position.set(10,10)}delGraphics(){const s=this.app.stage.getChildIndex(this.graphics);this.app.stage.removeChildAt(s)}rect(s,i){this.graphics=this.graphics||this.createGraphics(),this.setLineStyle(),this.graphics.drawPolygon([this.startPoint.x,this.startPoint.y,s,this.startPoint.y,s,i,this.startPoint.x,i])}diamond(s,i){this.graphics=this.graphics||this.createGraphics(),this.setLineStyle();const r=s-this.startPoint.x,n=i-this.startPoint.y;this.graphics.drawPolygon([this.startPoint.x,this.startPoint.y,this.startPoint.x+r,this.startPoint.y+n/2,this.startPoint.x,this.startPoint.y+n,this.startPoint.x-r,this.startPoint.y+n/2])}arc(s,i){this.graphics=this.graphics||this.createGraphics(),this.setLineStyle();const r=s-this.startPoint.x,n=i-this.startPoint.y,o=Math.pow(r*r+n*n,1/2)/2;this.graphics.drawEllipse(this.startPoint.x+r/2,this.startPoint.y+n/2,o,Math.abs(n)/2)}arrow(s,i){this.graphics=this.graphics||this.createGraphics(),this.setLineStyle(),this.graphics.moveTo(this.lastPoint.x,this.lastPoint.y),this.graphics.lineTo(s,i);const r=this.graphics.children.length?this.graphics.children[0]:this.createGraphics();this.graphics.addChild(r);const n=s-this.startPoint.x,o=i-this.startPoint.y,a=n<0?-1:1;let l=Math.atan2(o,n);a===-1&&(l=o<0?-Math.PI+l:Math.PI+l),this.setLineStyle(r),r.x=s,r.y=i,r.rotation=l,r.moveTo(0,0),r.lineTo(-20*a,-8),r.moveTo(0,0),r.lineTo(-20*a,8)}line(s,i){this.graphics=this.graphics||this.createGraphics(),this.setLineStyle(),this.graphics.moveTo(this.lastPoint.x,this.lastPoint.y),this.graphics.lineTo(s,i),cr.value==="pen"&&(this.lastPoint={x:s,y:i})}text(s,i){nf.value("select");const r=Ee.value.fontSize,n=new Go("",{fontFamily:"Arial",fontSize:Ee.value.fontSize,letterSpacing:2,fill:Ee.value.strokeColor});n.alpha=Ee.value.alpha,n.x=s,n.y=i-r;const o=document.createElement("input");o.style.cssText=`
        position: absolute;
        top: ${i-Math.abs(this.app.stage.y)/2}px;
        left: ${s-Math.abs(this.app.stage.x)/2}px;
        width: 10px;
        outline: none;
        border: none;
        font-size: ${r}px;
        text-indent: 2px;
        letter-spacing: 4px;
        transform: translateY(-72%);
        color: transparent;
        caret-color: ${Ee.value.strokeColor};
        background-color: transparent;
      `,this.container.value.appendChild(o),setTimeout(()=>o.focus()),o.oninput=a=>{n.text=a.target.value,o.style.width=`${n.width}px`,this.app.stage.addChild(n)},o.onblur=()=>{var a;return(a=o.parentNode)==null?void 0:a.removeChild(o)}}}return{CreateSceen:e}},OT={class:"header"},FT=["onClick"],NT=hi({__name:"Tabbar",setup(e){const t=Wr(),s=Ls([{name:"icon-zhizhen",action:"select"},{name:"icon-dantupailie",action:"rect"},{name:"icon-lingxing",action:"diamond"},{name:"icon-luyin",action:"arc"},{name:"icon-xiangshangjiantoucuxiao",action:"arrow"},{name:"icon-xian",action:"line"},{name:"icon-Icon_huabi",action:"pen"},{name:"icon-ziti",action:"text"},{name:"icon-tupian",action:"pic"}]);ti(()=>t.drawType,r=>{document.body.style.cursor=r==="select"?"default":"crosshair"});const i=r=>{t.updateDrawType(r)};return(r,n)=>(me(),Re("header",OT,[(me(!0),Re(pe,null,Va(s,o=>(me(),Re("span",{key:o.name,class:Ds(["item iconfont",[o.name,o.action===$t(t).drawType&&"active"]]),onClick:a=>i(o.action)},null,10,FT))),128))]))}});const LT=zr(NT,[["__scopeId","data-v-4451d56a"]]),kT=e=>(rh("data-v-c7157154"),e=e(),nh(),e),UT={class:"grid grid-flow-col auto-cols-min gap-1"},GT={class:"input-container"},HT=kT(()=>At("div",{class:"shrink-0 w-8 h-full leading-8 text-center bg-theme-color-deep"},"#",-1)),$T=hi({__name:"InputColor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,i=ae({get(){return s.modelValue},set(n){t("update:modelValue",n)}}),r=ae({get(){return/^#/.test(s.modelValue)?s.modelValue.slice(1):s.modelValue},set(n){n.length<6||t("update:modelValue",`#${n}`)}});return(n,o)=>(me(),Re("div",UT,[Wn(At("input",{type:"color","onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),class:Ds(["w-8 h-8",r.value==="transparent"&&r.value])},null,2),[[Za,i.value]]),At("div",GT,[HT,Wn(At("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a),type:"text",class:"w-full outline-0 flex-1 indent-2"},null,512),[[Za,r.value]])])]))}});const $l=zr($T,[["__scopeId","data-v-c7157154"]]),$o=e=>(rh("data-v-b130d79d"),e=e(),nh(),e),VT={class:"w-full bg-white md:mt-4 p-2 md:shadow-design md:rounded"},XT={class:"item"},zT=$o(()=>At("h3",{class:"title mt-0"},"描边",-1)),WT={class:"item"},jT=$o(()=>At("h3",{class:"title"},"背景",-1)),YT={class:"title"},qT={class:"flex"},KT=["for","title"],ZT=["onUpdate:modelValue","value","name","id"],JT={class:"item"},QT=$o(()=>At("h3",{class:"title"},"透明度",-1)),t1=$o(()=>At("h3",{class:"title"},"操作",-1)),e1=hi({__name:"Config",setup(e){const{drawInstance:t,context:s}=yo(Wr()),i=Ls([{title:"填充",model:"fillStyle",radioGroup:[{title:"实心",type:"fill",classes:"icon-yuanjiaochangfangxing"}]},{title:"描边宽度",model:"strokeWidth",radioGroup:[{title:"细",type:1,classes:"icon-xian3"},{title:"适中",type:2,classes:"icon-xian3 font-bold"},{title:"粗",type:4,classes:"icon-zhixiancu font-bold"}]},{title:"描边样式",model:"line",radioGroup:[{title:"实线",type:"solid",classes:"icon-xian3"},{title:"虚线",type:"dashed",classes:"icon-xuxian font-bold"}]},{title:"线条风格",model:"lineStyle",radioGroup:[{title:"朴素",type:"simple",classes:"icon-jurassic_curve"}]},{title:"边角",model:"horn",radioGroup:[{title:"直角",type:"right",classes:"icon-zhijiao"},{title:"圆角",type:"round",classes:"icon-yuanjiao"}]}]),r=()=>{t.value.copy()},n=()=>{t.value.delGraphics()};return(o,a)=>(me(),Re("main",VT,[At("div",XT,[zT,Yt($l,{modelValue:$t(s).strokeColor,"onUpdate:modelValue":a[0]||(a[0]=l=>$t(s).strokeColor=l)},null,8,["modelValue"])]),At("div",WT,[jT,Yt($l,{modelValue:$t(s).fillColor,"onUpdate:modelValue":a[1]||(a[1]=l=>$t(s).fillColor=l)},null,8,["modelValue"])]),(me(!0),Re(pe,null,Va(i,l=>(me(),Re("div",{class:"item",key:l.model},[At("h3",YT,um(l.title),1),At("div",qT,[(me(!0),Re(pe,null,Va(l.radioGroup,(h,c)=>(me(),Re("label",{key:c,for:l.model+c,title:h.title,class:Ds(["label",$t(s)[l.model]===h.type&&"active"])},[Wn(At("input",{"onUpdate:modelValue":u=>$t(s)[l.model]=u,type:"radio",value:h.type,name:l.model,id:l.model+c,class:"hidden"},null,8,ZT),[[b_,$t(s)[l.model]]]),At("div",{class:Ds(["iconfont",h.classes])},null,2)],10,KT))),128))])]))),128)),At("div",JT,[QT,Wn(At("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>$t(s).alpha=l),step:"0.1",type:"range",min:"0",max:"1",class:"w-10/12"},null,512),[[Za,$t(s).alpha]])]),At("div",{class:"item"},[t1,At("div",{class:"flex"},[At("div",{onClick:r,class:"action iconfont icon-fuzhi_copy cursor-pointer hover:bg-theme-color-deep"}),At("div",{onClick:n,class:"action iconfont icon-weibiaoti544 cursor-pointer hover:bg-theme-color-deep"})])])]))}});const s1=zr(e1,[["__scopeId","data-v-b130d79d"]]),qp=e=>(rh("data-v-4440f45c"),e=e(),nh(),e),i1={class:"top md:shadow-design md:rounded"},r1=qp(()=>At("div",{class:"item iconfont icon-weibiaoti544"},null,-1)),n1=qp(()=>At("div",{class:"item iconfont icon-export-img"},null,-1)),o1={class:"item bg-transparent hover:bg-transparent text-base p-0"},a1={class:"middle w-full"},l1=hi({__name:"Side",setup(e){const{isCollapsed:t,context:s}=yo(Wr());return(i,r)=>(me(),Re("aside",{class:Ds(["absolute mobile md:pc",[$t(t)&&"active"]])},[At("section",i1,[r1,n1,At("div",o1,[Yt($l,{modelValue:$t(s).bgColor,"onUpdate:modelValue":r[0]||(r[0]=n=>$t(s).bgColor=n)},null,8,["modelValue"])])]),At("section",a1,[Yt(s1)])],2))}});const h1=zr(l1,[["__scopeId","data-v-4440f45c"]]),c1=hi({__name:"index",setup(e){const t=Wr(),{CreateSceen:s}=BT(),i=ws();return ti(t.context,()=>{t.drawInstance.setLineStyle(void 0,!0)}),Hf(()=>{t.drawInstance=new s(i,window.innerWidth*2,window.innerHeight*2)}),(r,n)=>(me(),Re("section",null,[At("section",null,[Yt(LT),Yt(h1)]),At("main",{ref_key:"container",ref:i},null,512)]))}}),u1=Uy({history:ey("/style-palette/"),routes:[{path:"/",name:"home",component:c1}]}),Mh=S_(L_);Mh.use(ad);Mh.use(u1);Mh.mount("#app");
