## 事件循环

js是单线程任务，异步和多线程是通过`Event Loop`机制实现的。
由调用栈、消息队列(宏任务)、微任务队列组成。执行时会从全局栈中一行一行的执行，
遇到函数执行会压入调用栈中，函数执行返回后从栈中弹出。遇到fatch、事件回调、setTimeOut、setInterval
会加入到消息队列中，在调用栈清空的时候执行。遇到promise、async、await会加入到微任务队列中，在调用栈清空的时候立即执行，
处理期间加入的微任务会一同执行。

微任务的优先级高于宏任务。

## promise

三种状态：`pending`(进行中)、`resolved`(成功)、`rejected`(失败)。

当promse调用后，会以进行中的状态开始，最终会以成功或失败的状态结束，并在完成时调用相应的回调函数(then/catch)。
接收`resolve、reject`两个回调，前者触发成功，后者触发失败并改变promise转态，且以第一次触发的为准。`throw`会触发`reject`回调。
